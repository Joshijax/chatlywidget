{"version":3,"file":"js/app.js","mappings":"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","sources":["webpack://vue-widget/./src/testApp.vue","webpack://vue-widget/./src/utils/firebaseDb.js","webpack://vue-widget/./src/utils/firbase_utils.js","webpack://vue-widget/./src/views/test/chatmaintest.vue","webpack://vue-widget/./src/components/test/singleChat.vue","webpack://vue-widget/./src/components/test/singleChat.vue?2f03","webpack://vue-widget/./src/views/test/testing.vue","webpack://vue-widget/./src/components/NewImage.vue","webpack://vue-widget/./src/components/NewImage.vue?d6b8","webpack://vue-widget/./src/components/test/feedBack.vue","webpack://vue-widget/./src/components/test/feedBack.vue?8cc5","webpack://vue-widget/./src/components/chatComp/inputFields.vue","webpack://vue-widget/./src/components/chatComp/inputFields.vue?010e","webpack://vue-widget/./src/views/test/testing.vue?5def","webpack://vue-widget/./src/views/test/chatmaintest.vue?e000","webpack://vue-widget/./src/testApp.vue?efb9","webpack://vue-widget/./src/plugins/vuetify.js","webpack://vue-widget/./src/main.js","webpack://vue-widget/webpack/bootstrap","webpack://vue-widget/webpack/runtime/chunk loaded","webpack://vue-widget/webpack/runtime/compat get default export","webpack://vue-widget/webpack/runtime/define property getters","webpack://vue-widget/webpack/runtime/global","webpack://vue-widget/webpack/runtime/hasOwnProperty shorthand","webpack://vue-widget/webpack/runtime/make namespace object","webpack://vue-widget/webpack/runtime/publicPath","webpack://vue-widget/webpack/runtime/jsonp chunk loading","webpack://vue-widget/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"chat_123876\">\r\n    <transition name=\"bounce\">\r\n      <div\r\n        :style=\"[\r\n          showPop\r\n            ? 'border: 1px solid rgb(242, 242, 242); box-shadow: 6px 2px 15px 5px rgba(0, 0, 0, 0.1);'\r\n            : '',\r\n        ]\"\r\n      >\r\n        <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n        <chatmaintest\r\n          :checkFirst=\"checkFirst\"\r\n          @updateState=\"updateState\"\r\n          :addConversation=\"addConversation\"\r\n          :updateConversation=\"updateConversation\"\r\n          :removeConversation=\"removeConversation\"\r\n          :getConversationBy=\"getConversationBy\"\r\n          :showChat=\"showChat\"\r\n          :showPop=\"showPop\"\r\n          :stateval=\"stateval\"\r\n          :user=\"user\"\r\n          :unreadMsg=\"unreadMsg\"\r\n          :botName=\"botName\"\r\n          @createNewConvo=\"createNewConvo\"\r\n          @updateUnreadMsg=\"updateUnreadMsg\"\r\n          v-if=\"showPop\"\r\n        />\r\n      </div>\r\n    </transition>\r\n\r\n    <div class=\"chat-icon\" @click=\"toggleChat()\">\r\n      <transition name=\"bounce\">\r\n        <svg\r\n          v-if=\"!showPop\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 512 512\"\r\n        >\r\n          <path\r\n            d=\"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z\"\r\n          />\r\n        </svg>\r\n\r\n        <svg\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          v-else\r\n        >\r\n          <path\r\n            fill-rule=\"evenodd\"\r\n            clip-rule=\"evenodd\"\r\n            d=\"M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z\"\r\n            fill=\"white\"\r\n          ></path>\r\n        </svg>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createConversationId, getLastChat } from \"@/utils/firbase_utils\";\r\nimport chatmaintest from \"./views/test/chatmaintest.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showChat: false,\r\n      showPop: false,\r\n      user: \"\",\r\n      ip: \"\",\r\n      stateval: {},\r\n      unreadMsg: 0,\r\n      botName: \"Alex\",\r\n      isLoading: false,\r\n    };\r\n  },\r\n  components: { chatmaintest },\r\n\r\n  methods: {\r\n    updateUnreadMsg(value) {\r\n      this.unreadMsg = this.unreadMsg + value;\r\n      //   console.log(value, \"updating unread messge\", this.unreadMsg);\r\n    },\r\n    toggleChat() {\r\n      this.showPop = !this.showPop;\r\n      const newState = {\r\n        ...this.stateval,\r\n        state: {\r\n          ...this.stateval.state,\r\n          toggle: this.showPop,\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n\r\n    async checkFirst() {\r\n      let statecheck = localStorage.getItem(\"appState\");\r\n      if (statecheck === null) {\r\n        let data = {\r\n          user: {\r\n            role: \"lead\",\r\n            locale: \"en\",\r\n            hasConversations: true,\r\n          },\r\n          conversations: {\r\n            byId: {},\r\n          },\r\n          state: {\r\n            page: {\r\n              name: \"home\",\r\n              id: null,\r\n            },\r\n            toggle: false,\r\n          },\r\n        };\r\n        localStorage.setItem(\"appState\", JSON.stringify(data));\r\n      }\r\n    },\r\n    async updateState(newState) {\r\n      this.stateval = newState;\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n    addConversation(conversationId, conversationData) {\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: {\r\n            ...this.stateval.conversations.byId,\r\n            [conversationId]: conversationData,\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n    updateConversation(conversationId, conversationData) {\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: {\r\n            ...this.stateval.conversations.byId,\r\n            [conversationId]: {\r\n              ...this.stateval.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    removeConversation(conversationId) {\r\n      const {\r\n        [conversationId]: removedConversation,\r\n        ...remainingConversations\r\n      } = this.stateval.conversations.byId;\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: remainingConversations,\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n\r\n    async get_creat_user() {\r\n      // Check if we have a user ID cookie\r\n      // this.setCookie(\"userId\", \"10511221794\", 7)\r\n      // const userIdCookie = await this.getCookie(\"userId\");\r\n\r\n      const userIdCookie = localStorage.getItem(\"userId\");\r\n\r\n      // console.log(userIdCookie, \"okay the this\");\r\n\r\n      if (userIdCookie) {\r\n        // If we have a user ID cookie, use that\r\n        this.user = userIdCookie;\r\n      } else {\r\n        // Otherwise, fetch the user's IP address and create a new user ID\r\n        await fetch(\"https://api.ipify.org?format=json\")\r\n          .then((x) => x.json())\r\n          .then(({ ip }) => {\r\n            this.user = ip.split(\".\").join(\"\");\r\n            this.ip = ip;\r\n          });\r\n\r\n        // Set the new user ID as a cookie\r\n        // Cookies.set(\"userId\", this.user, { expires: 365 });\r\n        localStorage.setItem(\"userId\", this.user);\r\n      }\r\n\r\n      // console.log(this.ip, this.user, \"hellooooooooo\");\r\n    },\r\n\r\n    async saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n        ended: false,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    async createNewConvo() {\r\n      this.isLoading = true;\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const lastIdKey = Object.keys(conversationsById).pop();\r\n\r\n      const lastConversation = Object.values(conversationsById).pop();\r\n      const lastConversationEnded = lastConversation\r\n        ? lastConversation.ended\r\n        : true;\r\n      //   console.log(\r\n      //     \"Last conversation ended:\",\r\n      //     lastConversationEnded,\r\n      //     lastConversation,\r\n      //     lastIdKey\r\n      //   );\r\n\r\n      if (lastConversationEnded) {\r\n        this.isLoading = true;\r\n        let chatId = await createConversationId(this.user);\r\n        // console.log(chatId);\r\n        await this.saveConversationId(chatId);\r\n        this.isLoading = false;\r\n        this.$router.push({\r\n          name: \"conversation\",\r\n          params: { id: chatId },\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          name: \"conversation\",\r\n          params: { id: lastIdKey },\r\n        });\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    this.checkFirst();\r\n\r\n    const savedState =\r\n      JSON.parse(localStorage.getItem(\"appState\")) || this.stateval;\r\n    await this.updateState(savedState);\r\n\r\n    this.removeConversation(\"undefined\");\r\n\r\n    // this.addConversation(\"ei6I4cTFfnyA6KeiQXck\", {\r\n    //   fetchState: \"partial\",\r\n    //   read: true,\r\n    //   expire: 1679263135957,\r\n    // });\r\n  },\r\n\r\n  async created() {\r\n    await this.checkFirst();\r\n    await this.get_creat_user();\r\n    const appState = JSON.parse(localStorage.getItem(\"appState\")) ;\r\n    // console.log(\"Created...\", appState.router.location.name);\r\n    if (appState && appState.hasOwnProperty('state')) {\r\n    \r\n      this.showPop = appState.state.toggle;\r\n      \r\n    }else{\r\n        const newState = {\r\n        ...appState,\r\n        state: {\r\n          toggle: false,\r\n          page: {\r\n            name: \"home\",\r\n            id: null,\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n      }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scope>\r\n.badge {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background-color: red;\r\n  color: white;\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.chat-transition {\r\n  transition: all 0.3s ease-out;\r\n}\r\n\r\n#chat_123876 .chat-icon {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  cursor: pointer;\r\n  background: #1263ff;\r\n  padding: 15px;\r\n  border-radius: 50%;\r\n  width: 55px;\r\n  height: 52px;\r\n  z-index: 999999999;\r\n}\r\n\r\n#chat_123876 .chat-icon svg {\r\n  fill: #fff;\r\n}\r\n\r\n.bounce-enter-active {\r\n  animation: bounce-in 0.5s;\r\n}\r\n.bounce-leave-active {\r\n  animation: bounce-in 0.5s reverse;\r\n}\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n  50% {\r\n    transform: scale(1.25);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n</style>\r\n","import { initializeApp } from \"firebase/app\";\r\n\r\nimport { getFirestore, Timestamp } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCkr7FFrAeCGR1GRo_cUNPyFf5kz8Zm9Ho\",\r\n  authDomain: \"chatly-9e73d.firebaseapp.com\",\r\n  projectId: \"chatly-9e73d\",\r\n  storageBucket: \"chatly-9e73d.appspot.com\",\r\n  messagingSenderId: \"692360901272\",\r\n  appId: \"1:692360901272:web:f2e46455a122ed050216ed\",\r\n  measurementId: \"G-DN2SKEJYP6\",\r\n  storageBucket: \"\",\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nconst storage = getStorage(app);\r\n\r\nfunction StartFirebase() {\r\n  return getFirestore(app);\r\n}\r\n\r\nexport { StartFirebase, storage };\r\n","import { StartFirebase, storage } from \"./firebaseDb\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  getDoc,\r\n  doc,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  serverTimestamp,\r\n  orderBy,\r\n  updateDoc,\r\n  limit,\r\n} from \"firebase/firestore\";\r\nconst db = StartFirebase();\r\n\r\nconst createConversationId = async (user) => {\r\n  const dbref = collection(db, \"conversation\");\r\n  let val = \"\";\r\n  try {\r\n    const docRef = await addDoc(dbref, { step: 0, user: user, agent: \"\" }).then(\r\n      async (res) => {\r\n        // console.log(res, \"this is the resspin\");\r\n        // console.log(\"Document written with ID: \", res.id);\r\n        val = res.id;\r\n        const conversationDocRef = doc(db, \"conversation\", val);\r\n      }\r\n    );\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n  return val;\r\n};\r\n\r\nconst getStepConversation = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    console.log(snap.data(), \"steppsss\");\r\n    return snap.data().step;\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst getConversationAgent = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    return snap.data().agent;\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst setStepConversation = async (id, step) => {\r\n  const collectRef = collection(db, \"conversation\");\r\n  try {\r\n    await updateDoc(doc(collectRef, id), { step: step });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst updateConversationAgent = async (id, agent) => {\r\n  const collectRef = collection(db, \"conversation\");\r\n  try {\r\n    await updateDoc(doc(collectRef, id), { agent: agent });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst saveChats = async (message, id) => {\r\n  console.log(message, id, \"trying to save\");\r\n\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  const { text, type, user, isUser } = message;\r\n\r\n  const newMessage = {\r\n    ...message,\r\n    createdAt: serverTimestamp(),\r\n  };\r\n\r\n  // Add a new document to the sub-collection with the current timestamp\r\n  await addDoc(subcollectionRef, newMessage).then(async (res) => {\r\n    console.log(\"Document written with ID: \", res.id);\r\n\r\n    // Update the conversation document to indicate that a new message has been added\r\n    if (isUser) {\r\n      await updateDoc(parentDocRef, {\r\n        agentNewmessage: true,\r\n        lastMsgTime: serverTimestamp(),\r\n      });\r\n      console.log(\"Conversation document updated with agentNewmessage: true\");\r\n    } else {\r\n      await updateDoc(parentDocRef, {\r\n        userNewmessage: true,\r\n        lastMsgTime: serverTimestamp(),\r\n      });\r\n      console.log(\"Conversation document updated with userNewmessage: true\");\r\n    }\r\n  });\r\n};\r\n\r\nconst getConversation = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    return snap.data();\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst getLastChat = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n\r\n  // Create a reference to the sub-collection and order by \"createdAt\" in descending order\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n  const queryVal = query(\r\n    subcollectionRef,\r\n    orderBy(\"createdAt\", \"desc\"),\r\n    limit(1)\r\n  );\r\n\r\n  let parentData = await getDoc(doc(db, \"conversation\", id));\r\n  if (parentData.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    parentData = parentData.data();\r\n  }\r\n  // Get the first document in the query snapshot\r\n  const querySnapshot = await getDocs(queryVal);\r\n\r\n  // console.log(querySnapshot.docs[0].data(), \"fetch data\");\r\n  if (querySnapshot.docs.length > 0) {\r\n    const lastChatData = querySnapshot.docs[0].data();\r\n    return { lastChatData, parentData };\r\n  } else {\r\n    return { lastChatData: null, parentData };\r\n  }\r\n};\r\n\r\nconst findRefobj = async (table, obj, objval) => {\r\n  // console.log(table, obj, objval);\r\n  const refCollectionRef = collection(db, table);\r\n  const q = query(refCollectionRef, where(obj, \"==\", objval));\r\n  const querySnapshot = await getDocs(q);\r\n  // console.log(\"got here again\", querySnapshot);\r\n  if (querySnapshot.size === 0) {\r\n    // console.log(\"false\");\r\n    return false;\r\n  }\r\n\r\n  // console.log(\"got here again\");\r\n\r\n  // console.log(\"size\", querySnapshot.docs[0].data());\r\n\r\n  let valdata = querySnapshot.docs[0].data();\r\n  let value = {\r\n    wallet: valdata.wallet,\r\n    ref_code: valdata.ref_code,\r\n  };\r\n\r\n  // console.log(value, \"value\");\r\n\r\n  return valdata;\r\n};\r\n\r\nconst updateConvo = async (id, data) => {\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  await updateDoc(parentDocRef, data);\r\n};\r\n\r\nconst getConvoChats = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  // console.log(\"convo ID\", id);\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  const value = [];\r\n\r\n  // Create a reference to the sub-collection\r\n  // const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  // Create a reference to the sub-collection and order by \"createdAt\" in descending order\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  const orderedSubcollection = query(\r\n    subcollectionRef,\r\n    orderBy(\"createdAt\", \"asc\")\r\n  );\r\n\r\n  await updateDoc(parentDocRef, { userNewmessage: false });\r\n\r\n  // Get the documents in the sub-collection ordered by \"createdAt\"\r\n  const querySnapshot = await getDocs(orderedSubcollection);\r\n\r\n  // console.log(\"docs\", querySnapshot);\r\n\r\n  // Iterate over the documents in the query snapshot\r\n  querySnapshot.forEach((doc) => {\r\n    // console.log(doc.id, \" => \", doc.data());\r\n    value.push(doc.data());\r\n  });\r\n\r\n  return value;\r\n};\r\n\r\nconst readMessage = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  // console.log(\"convo ID\", id);\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n\r\n  await updateDoc(parentDocRef, { userNewmessage: false });\r\n};\r\n\r\nexport {\r\n  setStepConversation,\r\n  createConversationId,\r\n  saveChats,\r\n  getConvoChats,\r\n  getStepConversation,\r\n  getLastChat,\r\n  updateConversationAgent,\r\n  getConversationAgent,\r\n  findRefobj,\r\n  readMessage,\r\n  getConversation,\r\n  updateConvo,\r\n};\r\n","<template>\r\n  <div>\r\n    <div v-if=\"!showingConvo\">\r\n      <div id=\"chatview\">\r\n        <transition name=\"bounce\">\r\n          <div class=\"chat-container\">\r\n            <div class=\"chat-header\">\r\n              <h3>Chatly</h3>\r\n              <!-- <i class=\"fa fa-times\" @click=\"showPop = false\"></i> -->\r\n            </div>\r\n            <div ref=\"chatbody\" class=\"chat-body\" id=\"chat-body\">\r\n              <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n              <!-- Line loader for chat timeout -->\r\n              <!-- <div class=\"line-loader\" :style=\"{ width: loaderWidth + '%' }\"></div> -->\r\n              <div class=\"message-box\">\r\n                <v-list\r\n                  v-if=\"activeConversations.length > 0\"\r\n                  item-props\r\n                  lines=\"two\"\r\n                >\r\n                  <h3>Current conversation</h3>\r\n                  <SingleChat\r\n                    :convo=\"convo\"\r\n                    v-for=\"convo in activeConversations\"\r\n                    :key=\"convo.text\"\r\n                    :agent=\"convo.agent\"\r\n                    :user=\"user\"\r\n                    @updateUnreadMsg=\"updateUnreadMsg\"\r\n                    class=\"chat-transition\"\r\n                    @click=\"show(convo.conversationId)\"\r\n                  />\r\n                </v-list>\r\n                <v-list\r\n                  v-if=\"endedConversations.length > 0\"\r\n                  item-props\r\n                  lines=\"two\"\r\n                >\r\n                  <h3>Previous Closed Conversations</h3>\r\n                  <SingleChat\r\n                    :convo=\"convo\"\r\n                    v-for=\"convo in endedConversations\"\r\n                    :key=\"convo.text\"\r\n                    :agent=\"convo.agent\"\r\n                    :user=\"user\"\r\n                    @updateUnreadMsg=\"updateUnreadMsg\"\r\n                    class=\"chat-transition\"\r\n                    @click=\"show(convo.conversationId)\"\r\n                  />\r\n                </v-list>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"chat-footer\">\r\n              <v-btn\r\n                @click=\"createNewConvo\"\r\n                class=\"start\"\r\n                :aria-details=\"getCount\"\r\n                getCount\r\n                v-if=\"!getCount && !isLoading\"\r\n              >\r\n                Start Conversation\r\n              </v-btn>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n    <test\r\n      :botName=\"botName\"\r\n      :user=\"user\"\r\n      :conversationId=\"conversationId\"\r\n      @goBack=\"goBack\"\r\n      @goBackTo=\"goBackTo\"\r\n      @createNewConvo=\"createNewConvo\"\r\n      v-else\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SingleChat from \"../../components/test/singleChat.vue\";\r\nimport { createConversationId, getLastChat } from \"@/utils/firbase_utils\";\r\nimport io from \"socket.io-client\";\r\nimport { Timestamp } from \"firebase/firestore\";\r\nimport test from \"./testing.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      socketMainpage: null,\r\n      chatActive: false,\r\n      isLoading: false,\r\n      conversations: [],\r\n      showingConvo: false,\r\n      conversationId: \"\",\r\n      state: null,\r\n    };\r\n  },\r\n  props: [\"showPop\", \"addConversation\", \"user\", \"botName\", \"stateval\"],\r\n  components: {\r\n    SingleChat,\r\n    test,\r\n  },\r\n  methods: {\r\n    show(convoId) {\r\n      this.conversationId = \"\";\r\n      this.conversationId = convoId;\r\n      this.showingConvo = true;\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      this.state = data;\r\n      const newState = {\r\n        ...this.state,\r\n        state: {\r\n          ...this.state.state,\r\n          page: {\r\n            name: \"conversation\",\r\n            id: convoId,\r\n          },\r\n        },\r\n      };\r\n      this.$emit(\"updateState\", newState);\r\n    },\r\n\r\n    async goBack() {\r\n      this.showingConvo = false;\r\n      await this.init();\r\n      this.$forceUpdate();\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      this.state = data;\r\n      const newState = {\r\n        ...this.state,\r\n        state: {\r\n          ...this.state.state,\r\n          page: {\r\n            name: \"home\",\r\n            id: null,\r\n          },\r\n        },\r\n      };\r\n      this.$emit(\"updateState\", newState);\r\n    },\r\n\r\n    async goBackTo() {\r\n      this.showingConvo = false;\r\n      await this.init();\r\n      this.$forceUpdate();\r\n    },\r\n\r\n    updateUnreadMsg() {\r\n      this.$emit(\"updateUnreadMsg\");\r\n    },\r\n\r\n    async saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n        ended: false,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    handleNewMessage(newMessage) {\r\n      //   console.log(newMessage.createdAt, \"time check\");\r\n      const conversationIndex = this.conversations.findIndex(\r\n        (c) => c.conversationId === newMessage.conversationId\r\n      );\r\n      if (conversationIndex > -1) {\r\n        // Update the conversation with the new message text\r\n        const conversation = this.conversations[conversationIndex];\r\n        conversation.text = newMessage.text;\r\n        conversation.userNewmessage = true;\r\n        conversation.createdAt = newMessage.createdAt;\r\n        this.conversations.splice(conversationIndex, 1, conversation);\r\n\r\n        // Move the conversation to the top of the list\r\n      }\r\n    },\r\n\r\n    async getAllInfo(conversation) {\r\n      const result = await getLastChat(conversation);\r\n\r\n      let userNewmessage = (await result.parentData.userNewmessage) || false;\r\n      let lastMsg = await result.lastChatData;\r\n      if (result.lastChatData === null) {\r\n        lastMsg = {\r\n          text: \"hello message\",\r\n          user: \"Bot\",\r\n          createdAt: Timestamp.now(),\r\n        };\r\n      } else if (result.lastChatData.type === \"voice\") {\r\n        lastMsg = {\r\n          text: \"voice Message\",\r\n          user: result.lastChatData.user,\r\n          createdAt: result.lastChatData.createdAt,\r\n        };\r\n      } else if (result.lastChatData.type === \"image\") {\r\n        lastMsg = {\r\n          text: \"Image\",\r\n          user: result.lastChatData.user,\r\n          createdAt: result.lastChatData.createdAt,\r\n        };\r\n      }\r\n      let ended;\r\n      if (result.parentData.hasOwnProperty(\"ended\")) {\r\n        ended = result.parentData.ended;\r\n      } else {\r\n        ended = false;\r\n      }\r\n\r\n      return {\r\n        conversationId: conversation,\r\n        text: lastMsg.text,\r\n        user: lastMsg.user,\r\n        agent: result.parentData.agent,\r\n        ended,\r\n        userNewmessage: userNewmessage,\r\n        createdAt: lastMsg.createdAt,\r\n      };\r\n    },\r\n\r\n    async createNewConvo() {\r\n      console.log(\"click\");\r\n      this.isLoading = true;\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const lastIdKey = Object.keys(conversationsById).pop();\r\n\r\n      const lastConversation = Object.values(conversationsById).pop();\r\n      const lastConversationEnded = lastConversation\r\n        ? lastConversation.ended\r\n        : true;\r\n\r\n      if (lastConversationEnded) {\r\n        this.isLoading = true;\r\n        let chatId = await createConversationId(this.user);\r\n        // console.log(chatId);\r\n        await this.saveConversationId(chatId);\r\n        this.isLoading = false;\r\n        this.show(chatId);\r\n      } else {\r\n        this.show(lastIdKey);\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    isConversationIdExpired() {\r\n      const conversationId = localStorage.getItem(\"conversationId\");\r\n      if (conversationId) {\r\n        const conversationTimestamp = parseInt(conversationId.split(\"-\")[1]);\r\n        const now = Date.now();\r\n        const twoDaysInMilliseconds = 7 * 24 * 60 * 60 * 1000; // 2 days in milliseconds\r\n        return now - conversationTimestamp > twoDaysInMilliseconds;\r\n      }\r\n      return true; // conversation ID not found or invalid\r\n    },\r\n\r\n    async init() {\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const valuesArray = [];\r\n\r\n      for (const id in conversationsById) {\r\n        const obj = { ...conversationsById[id], id };\r\n        valuesArray.push(obj);\r\n      }\r\n\r\n      const reversedArray = valuesArray.reverse(); // reverse the order of the array\r\n\r\n      const firstThree = reversedArray.slice(0, 3); // get the first three elements of the reversed array\r\n\r\n      //   console.log(firstThree, \"data i want\");\r\n\r\n      for (let i = 0; i < firstThree.length; i++) {\r\n        const element = firstThree[i];\r\n        let convoInfo = await this.getAllInfo(element.id);\r\n\r\n        // Check if the conversation already exists in the array\r\n        const index = this.conversations.findIndex(\r\n          (c) => c.conversationId === convoInfo.conversationId\r\n        );\r\n\r\n        // If the conversation exists, update the existing object\r\n        if (index !== -1) {\r\n          this.conversations[index] = convoInfo;\r\n        } else {\r\n          // Otherwise, add the new object to the array\r\n          this.conversations.push(convoInfo);\r\n        }\r\n      }\r\n\r\n      console.log(this.conversations, \"this is fine\");\r\n\r\n      if (firstThree.length > 0) {\r\n        this.socketMainpage.emit(\"join\", {\r\n          id: firstThree[0].id,\r\n          user: this.user,\r\n        });\r\n      }\r\n\r\n      //   console.log(this.conversations, \"data i want\");\r\n\r\n      this.isLoading = false;\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    this.isLoading = true;\r\n    this.socketMainpage = io(\"http://18.212.173.184:3000/\");\r\n    this.socketMainpage.on(\"connect\", () => {\r\n      //   console.log(\"Connected to server\");\r\n    });\r\n\r\n    this.socketMainpage.on(\"newMessage\", (message) => {\r\n      message.createdAt = Timestamp.now();\r\n      //   console.log(message.conversationId, this.user, \"the new message\");\r\n      this.handleNewMessage(message);\r\n    });\r\n\r\n    const appState = JSON.parse(localStorage.getItem(\"appState\"));\r\n    if (appState) {\r\n      \r\n      if (appState.state.page.name === \"conversation\") {\r\n        this.conversationId = appState.state.page.id;\r\n        this.showingConvo = true;\r\n      }\r\n    }\r\n\r\n    await this.init();\r\n  },\r\n  computed: {\r\n    sortedConversations() {\r\n      return this.conversations.slice().sort((a, b) => {\r\n        return b.createdAt.seconds - a.createdAt.seconds;\r\n      });\r\n    },\r\n\r\n    activeConversations() {\r\n      return this.conversations.filter((c) => !c.ended);\r\n    },\r\n    endedConversations() {\r\n      return this.conversations.filter((c) => c.ended);\r\n    },\r\n\r\n    getCount() {\r\n      const endedCount = this.conversations.reduce((count, message) => {\r\n        return count + (!message.ended ? 1 : 0);\r\n      }, 0);\r\n      //   console.log(\"computed\", endedCount);\r\n\r\n      return endedCount > 0;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  width: 100%;\r\n\r\n  background-color: #fff;\r\n  border: 1px solid rgb(242, 242, 242);\r\n  box-shadow: rgba(0, 0, 0, 0.1) 6px 2px 15px 5px;\r\n  /* border: 1px solid #ccc; */\r\n\r\n  overflow: hidden;\r\n  font-family: Arial, sans-serif;\r\n  display: none; /* Hide the widget by default */\r\n  z-index: 9998;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Media query for larger screens */\r\n@media (min-width: 600px) {\r\n  .chat-container {\r\n    position: absolute;\r\n    bottom: 90px;\r\n    height: 90%;\r\n    right: 20px;\r\n    max-width: 400px; /* Adjust the maximum width as per your requirement */\r\n    max-height: 80%; /* Adjust the maximum height as per your requirement */\r\n    border-radius: 5px;\r\n  }\r\n  .chat-header {\r\n    border-radius: 10px 10px 0 0;\r\n  }\r\n}\r\n\r\n/* Media query for mobile view */\r\n@media (max-width: 600px) {\r\n  .chat-container {\r\n    position: fixed;\r\n    bottom: 80px;\r\n    height: 89%;\r\n    max-width: none;\r\n    max-height: none;\r\n    border-radius: 0 0 10px 10px;\r\n  }\r\n\r\n  .chat-header {\r\n    border-radius: 0;\r\n  }\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #f0f0f0;\r\n  padding: 10px;\r\n  text-align: center;\r\n  background: #0056ff 0% 0% no-repeat padding-box;\r\n  color: #ffffff;\r\n}\r\n\r\n.chat-header h3 {\r\n  margin: 0;\r\n}\r\n\r\n.chat-header .fa-times {\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-body {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  border-radius: 10px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar {\r\n  width: 12px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-thumb {\r\n  border-radius: 10px;\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  background-color: #555;\r\n}\r\n\r\n.chat-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n}\r\n\r\n.chat-footer input[type=\"text\"] {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.chat-footer textarea {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 6px;\r\n  resize: none;\r\n  overflow: auto;\r\n  max-height: 200px;\r\n}\r\n\r\n.chat-footer > .footButton {\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer > .footIcon {\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .start {\r\n  width: 100%;\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .text {\r\n  text-align: center;\r\n  font-size: 14px;\r\n  line-height: 21px;\r\n  padding-top: 0px;\r\n  color: rgb(115, 115, 115);\r\n}\r\n</style>\r\n","<template>\r\n  <div v-if=\"loaded\">\r\n    <v-list-item\r\n      :title=\"convo.text\"\r\n      :subtitle=\"convo.subtitle\"\r\n      :prepend-avatar=\"imageSrc\"\r\n      append-icon\r\n    >\r\n      <template #append>\r\n        <v-badge color=\"green\" v-if=\"convo.userNewmessage\">\r\n          <!-- <v-icon small>mdi-circle-medium</v-icon> -->\r\n        </v-badge>\r\n      </template>\r\n      <template v-slot:subtitle=\"{}\">\r\n        <span class=\"text-primary\">\r\n          {{\r\n            capitalizeName(\r\n              convo.user === \"bot\"\r\n                ? \"Alex\"\r\n                : convo.user === user\r\n                ? \"you\"\r\n                : agent || \"bot\"\r\n            )\r\n          }}\r\n        </span>\r\n        &mdash; {{ timeAgo(convo.createdAt) }}\r\n      </template>\r\n    </v-list-item>\r\n    <v-divider inset></v-divider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getLastChat } from \"@/utils/firbase_utils\";\r\nimport dayjs from \"dayjs\";\r\nimport relativeTime from \"dayjs/plugin/relativeTime\";\r\n\r\ndayjs.extend(relativeTime);\r\nexport default {\r\n  data: () => ({\r\n    loaded: false,\r\n  }),\r\n  props: [\"convo\", \"agent\", \"user\"],\r\n  components: {},\r\n\r\n  methods: {\r\n    capitalizeName(name) {\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n    timeAgo(timestamp) {\r\n      const now = dayjs();\r\n      const datetime = dayjs(timestamp.toDate());\r\n      let diff = datetime.diff(now, \"second\");\r\n      let suffix = diff > 0 ? \" ago\" : \" ago\";\r\n      diff = Math.abs(diff);\r\n\r\n      if (diff < 60) {\r\n        return `Just now`;\r\n      } else if (diff < 3600) {\r\n        let minutes = Math.floor(diff / 60);\r\n        return `${minutes} ${minutes > 1 ? \"minutes\" : \"minute\"}${suffix}`;\r\n      } else if (diff < 86400) {\r\n        let hours = Math.floor(diff / 3600);\r\n        return `${hours} ${hours > 1 ? \"hours\" : \"hour\"}${suffix}`;\r\n      } else {\r\n        let days = Math.floor(diff / 86400);\r\n        return `${days} ${days > 1 ? \"days\" : \"day\"}${suffix}`;\r\n      }\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    console.log(this.convo, \"the convovov\");\r\n    this.loaded = true;\r\n  },\r\n  computed: {\r\n    displayAgent() {\r\n      // let theUser = this.agent || \"bot\";\r\n      // if (this.convo.user === \"bot\") {\r\n      //   theUser = this.convo.user;\r\n      // }\r\n      return this.convo.user === \"bot\" ? \"Alex\" : this.agent || \"bot\";\r\n    },\r\n\r\n    imageSrc() {\r\n      // console.log(this.displayAgent, \"the agent \");\r\n      const url = `https://ui-avatars.com/api/?name=${this.displayAgent}&size=40&background=%23ccc&color=fff&color=fff&rounded=true&font-size=0.5`;\r\n      return url;\r\n    },\r\n\r\n    // ...other computed properties\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-list-item {\r\n  cursor: pointer !important;\r\n}\r\n</style>\r\n","import { render } from \"./singleChat.vue?vue&type=template&id=9f5dd014&scoped=true\"\nimport script from \"./singleChat.vue?vue&type=script&lang=js\"\nexport * from \"./singleChat.vue?vue&type=script&lang=js\"\n\nimport \"./singleChat.vue?vue&type=style&index=0&id=9f5dd014&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9f5dd014\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div v-show=\"!feedback\" id=\"chatview\">\r\n      <transition name=\"bounce\">\r\n        <div class=\"chat-container\">\r\n          <div class=\"chat-header\">\r\n            <v-icon\r\n              style=\"cursor: pointer\"\r\n              @click=\"$emit('goBack')\"\r\n              start\r\n              icon=\"mdi-arrow-left\"\r\n            ></v-icon>\r\n            <h3>Chatly {{ agent }}</h3>\r\n            <NewImage v-if=\"agent !== null\" :name=\"botName\" size=\"50\" />\r\n            <v-icon\r\n              v-if=\"!ended && ended !== null\"\r\n              color=\"white\"\r\n              @click=\"showFeeback\"\r\n              start\r\n              icon=\"mdi-close\"\r\n            ></v-icon>\r\n          </div>\r\n          <div\r\n            v-if=\"showLoader\"\r\n            class=\"line-loader\"\r\n            :style=\"{ width: loaderWidth + '%' }\"\r\n          ></div>\r\n          <div ref=\"chatbody\" class=\"chat-body\" id=\"chat-body\">\r\n            <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n            <!-- Line loader for chat timeout -->\r\n            <!-- <div class=\"line-loader\" :style=\"{ width: loaderWidth + '%' }\"></div> -->\r\n\r\n            <div class=\"message-box\">\r\n              <div\r\n                v-for=\"(message, index) in messages\"\r\n                :key=\"index\"\r\n                :value=\"user\"\r\n                :style=\"[\r\n                  !checkNxt(message, index) ? 'margin-bottom: 6px;' : '',\r\n                ]\"\r\n                :class=\"[\r\n                  message.user === user\r\n                    ? 'message-box__item outgoing'\r\n                    : message.user === 'user'\r\n                    ? 'message-box__item outgoing'\r\n                    : 'message-box__item incoming',\r\n                ]\"\r\n              >\r\n                <div v-if=\"message.type === 'text'\">\r\n                  <div v-show=\"checkPrev(message, index)\" class=\"name\">\r\n                    <NewImage\r\n                      v-if=\"message.user !== user\"\r\n                      :name=\"message.user == 'bot' ? botName : message.user\"\r\n                      :size=\"20\"\r\n                    />\r\n                    {{\r\n                      capitalizeName(\r\n                        message.user == \"bot\"\r\n                          ? botName\r\n                          : message.user === user\r\n                          ? \"you\"\r\n                          : message.user\r\n                      )\r\n                    }}\r\n                  </div>\r\n\r\n                  <div\r\n                    :class=\"[\r\n                      message.user === user\r\n                        ? 'user-text'\r\n                        : message.user === 'user'\r\n                        ? 'user-text'\r\n                        : 'bot-text',\r\n                    ]\"\r\n                  >\r\n                    <span v-html=\"renderMessage(message.text)\"></span>\r\n                  </div>\r\n                </div>\r\n                <div v-else-if=\"message.type === 'option'\">\r\n                  <div\r\n                    v-for=\"(options, index) in message.option\"\r\n                    :key=\"index\"\r\n                    style=\"margin-bottom: 5px\"\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      :name=\"`name${index}`\"\r\n                      :value=\"options.text\"\r\n                      :id=\"index\"\r\n                    />\r\n                    <label\r\n                      :for=\"index\"\r\n                      class=\"md-chip md-chip-clickable md-chip-hover\"\r\n                      @click=\"clickSelect(options)\"\r\n                    >\r\n                      {{ options.text }}</label\r\n                    >\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- if user just joined Chat -->\r\n                <div v-if=\"message.type === 'joined'\" class=\"just-joined\">\r\n                  <span class=\"join-message\"\r\n                    >{{ message.text }} Just joined chat</span\r\n                  >\r\n                </div>\r\n\r\n                <!-- if message type is input -->\r\n\r\n                <div v-else-if=\"message.type === 'input'\">\r\n                  <inputFields\r\n                    :message=\"message\"\r\n                    @handleInputSubmit=\"handleInputSubmit\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- if message type is voice -->\r\n                <div v-else-if=\"message.type === 'voice'\">\r\n                  <!-- <audio id=\"audio\" :src=\"message.text\" controls></audio> -->\r\n                  <button @click=\"playVoiceMessage(message)\">\r\n                    Play voice message\r\n                  </button>\r\n                </div>\r\n                <div v-else-if=\"message.type === 'image'\">\r\n                  <img :src=\"message.text\" alt=\"\" width=\"50\" height=\"50\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div style=\"text-align: left; margin-bottom: 15px\">\r\n                <div v-if=\"isTyping || loading\" id=\"loading-bubble\">\r\n                  <div class=\"spinner\">\r\n                    <div class=\"bounce1\"></div>\r\n                    <div class=\"bounce2\"></div>\r\n                    <div class=\"bounce3\"></div>\r\n                  </div>\r\n                  <!-- <div>{{ typingMsg }}</div> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"!ended\">\r\n            <div\r\n              v-if=\"previewImageUrl\"\r\n              style=\"position: relative; width: fit-content\"\r\n            >\r\n              <img\r\n                :src=\"previewImageUrl\"\r\n                style=\"max-width: 100%; max-height: 100px\"\r\n              />\r\n\r\n              <button\r\n                class=\"css-2chq30\"\r\n                @click=\"cancelImage\"\r\n                style=\"position: absolute; top: 5px; right: -10px\"\r\n              >\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M18 6L6 18M6 6L18 18\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n              <button\r\n                @click=\"sendImage\"\r\n                style=\"position: absolute; bottom: 5px; right: -10px\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M5 12H19M19 12L12 5M19 12L12 19\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <div\r\n              v-if=\"!automated\"\r\n              class=\"chat-footer\"\r\n              :style=\"[ended ? 'display: block' : '']\"\r\n            >\r\n              <textarea\r\n                rows=\"1\"\r\n                ref=\"message\"\r\n                :disabled=\"automated\"\r\n                v-model=\"newMessage\"\r\n                @keyup.enter=\"sendMessage\"\r\n                @keydown.shift.enter.prevent=\"insertNewLine\"\r\n                @keyup=\"onTyping\"\r\n                type=\"text\"\r\n                placeholder=\"Type a message...\"\r\n                style=\"max-height: calc(3 * (1.5em + 2px))\"\r\n              ></textarea>\r\n              <img\r\n                v-if=\"!recording\"\r\n                :src=\"require('@/assets/mic.png')\"\r\n                @click=\"startRecording\"\r\n                class=\"recordingIcon footIcon\"\r\n              />\r\n              <img\r\n                v-if=\"recording\"\r\n                :src=\"require('@/assets/stop.png')\"\r\n                @click=\"stopRecording\"\r\n                class=\"recordingIcon footIcon\"\r\n              />\r\n\r\n              <input\r\n                ref=\"fileInput\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                @change=\"handleFileUpload\"\r\n                style=\"display: none\"\r\n              />\r\n              <button\r\n                :aria-controls=\"$refs.fileInput\"\r\n                @click=\"$refs.fileInput.click()\"\r\n                aria-label=\"Attach file\"\r\n                class=\"footIcon\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M21.1525 10.8995L12.1369 19.9151C10.0866 21.9653 6.7625 21.9653 4.71225 19.9151C2.662 17.8648 2.662 14.5407 4.71225 12.4904L13.7279 3.47483C15.0947 2.108 17.3108 2.108 18.6776 3.47483C20.0444 4.84167 20.0444 7.05775 18.6776 8.42458L10.0156 17.0866C9.33213 17.7701 8.22409 17.7701 7.54068 17.0866C6.85726 16.4032 6.85726 15.2952 7.54068 14.6118L15.1421 7.01037\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n\r\n              <button\r\n                class=\"footButton\"\r\n                :disabled=\"newMessage === ''\"\r\n                @click=\"sendMessage\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M5 12H19M19 12L12 5M19 12L12 19\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            v-else\r\n            class=\"chat-footer\"\r\n            :style=\"[ended ? 'display: block' : '']\"\r\n          >\r\n            <div class=\"text\">Your conversation has ended</div>\r\n            <button @click=\"$emit('createNewConvo')\" class=\"start\">\r\n              Start Conversation\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n    <feedBack\r\n      @getConversationBy=\"getConversationBy\"\r\n      @updateConversation=\"updateConversation\"\r\n      v-show=\"feedback\"\r\n      :conversationId=\"conversationId\"\r\n      @goBack=\"feedback = false\"\r\n      @goBackTo=\"$emit('goBackTo')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import incoming from \"../../assets/incoming.mp3\";\r\n// import outgoing from \"../../assets/outgoing.mp3\";\r\nvar incoming = document.querySelector('audio[src$=\"incoming.mp3\"]');\r\nvar outgoing = document.querySelector('audio[src$=\"outgoing.mp3\"]');\r\nimport io from \"socket.io-client\";\r\nimport {\r\n  readMessage,\r\n  getConvoChats,\r\n  saveChats,\r\n  setStepConversation,\r\n  getConversation,\r\n} from \"@/utils/firbase_utils\";\r\n\r\nimport { storage } from \"@/utils/firebaseDb\";\r\n\r\nimport NewImage from \"../../components/NewImage.vue\";\r\nimport feedBack from \"../../components/test/feedBack.vue\";\r\nimport axios from \"axios\";\r\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\r\nimport inputFields from \"@/components/chatComp/inputFields.vue\";\r\n\r\nexport default {\r\n  name: \"chatView\",\r\n  data() {\r\n    return {\r\n      feedback: false,\r\n      socket: null,\r\n      automated: true,\r\n      loading: false,\r\n      showErrorDialog: true,\r\n      isLoading: false,\r\n      errorMessage: \"Error Message\",\r\n      showChat: false,\r\n      agent: null,\r\n      ip: \"\",\r\n      newMessage: \"\",\r\n      // conversationId: \"\",\r\n      isTyping: false,\r\n      joined: false,\r\n      typingMsg: \"\",\r\n      step: 0,\r\n      messages: [],\r\n      chatTimeout: null,\r\n      chatTimeoutDuration: 300000, // 5 minutes\r\n      chatStartTime: null,\r\n      loaderWidth: 0,\r\n      intervalIds: [],\r\n      showLoader: false,\r\n      convoEnded: false,\r\n      isBotEnabled: true,\r\n      ended: null,\r\n      selectedFile: null,\r\n      flow: [\r\n        {\r\n          step: 0,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Hi! I'm glad to assist you today. Let's know each other:\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              text: \"Do you have an order already?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 1.01,\r\n                  text: \"Yes\",\r\n                },\r\n                {\r\n                  id: 2,\r\n                  text: \"No\",\r\n                },\r\n              ],\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.01,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Please can we know this: \",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              inputs: [\r\n                {\r\n                  id: 1.02,\r\n                  type: \"email\",\r\n                  placeholder: \"email address\",\r\n                },\r\n              ],\r\n\r\n              type: \"input\",\r\n            },\r\n          ],\r\n        },\r\n\r\n        {\r\n          step: 1.02,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              user: \"user\",\r\n              inputs: [\r\n                {\r\n                  id: 1,\r\n                  type: \"number\",\r\n                  placeholder: \"Order Id\",\r\n                },\r\n              ],\r\n\r\n              type: \"input\",\r\n            },\r\n          ],\r\n        },\r\n\r\n        {\r\n          step: 1,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Please select what you want to do with the order\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 1.1,\r\n                  text: \"i want to make a return/swap\",\r\n                },\r\n                {\r\n                  id: 1.2,\r\n                  text: \"I want to know the order status\",\r\n                },\r\n                {\r\n                  id: 1.3,\r\n                  text: \"Others\",\r\n                },\r\n              ],\r\n\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.1,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can easly Return or swap an order here: <a href='https://site.com/return' target='_blank'>https://site.com/return</a> \",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.2,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can track your order here: <a href='https://site.com/tracking' target='_blank'>https://site.com/tracking</a>\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.3,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"Tell us how else can we help?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"What would you like to do?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 2.1,\r\n                  text: \"Place a new order\",\r\n                },\r\n                {\r\n                  id: 2.2,\r\n                  text: \"I have a question\",\r\n                },\r\n                {\r\n                  id: 2.3,\r\n                  text: \"Others\",\r\n                },\r\n              ],\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.1,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"What products do you want?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.2,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can ask any question, we are here for you\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.3,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"What other thing do you want us to do for you?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      newMessage: \"\",\r\n      recording: false,\r\n      mediaRecorder: null,\r\n      previewImageUrl: null,\r\n    };\r\n  },\r\n  components: {\r\n    NewImage,\r\n    feedBack,\r\n    inputFields,\r\n  },\r\n  props: [\r\n    \"addConversation\",\r\n    \"user\",\r\n    \"updateConversation\",\r\n    \"getConversationBy\",\r\n    \"botName\",\r\n    \"createNewConvo\",\r\n    \"conversationId\",\r\n  ],\r\n  methods: {\r\n    handleFileUpload(event) {\r\n      this.selectedFile = event.target.files[0];\r\n      // Create a data URL for the selected image and set it as the preview image\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        this.previewImageUrl = event.target.result;\r\n      };\r\n      reader.readAsDataURL(this.selectedFile);\r\n    },\r\n\r\n    async sendImage() {\r\n      const message = {\r\n        conversationId: this.conversationId,\r\n        username: this.user,\r\n        type: \"image\",\r\n\r\n        message: this.previewImageUrl,\r\n        isUser: true,\r\n      };\r\n\r\n      this.socket.emit(\"image\", message);\r\n\r\n      const newMessage = {\r\n        text: this.previewImageUrl,\r\n        type: \"image\",\r\n        user: this.user,\r\n        isUser: true,\r\n        conversationId: this.conversationId,\r\n      };\r\n      this.messages.push(newMessage);\r\n\r\n      // If an image is selected, upload it to Firebase Storage\r\n      //  const storageRef = storage.ref();\r\n      // const fileRef = storageRef.child(this.selectedFile.name);\r\n      // await fileRef.put(this.selectedFile);\r\n      // const fileUrl = await fileRef.getDownloadURL();\r\n\r\n      // const storageRef = ref(storage, this.selectedFile.name);\r\n\r\n      // // Data URL string\r\n      // const message4 =\r\n      //   \"data:text/plain;base64,5b6p5Y+344GX44G+44GX44Gf77yB44GK44KB44Gn44Go44GG77yB\";\r\n      // uploadString(storageRef, message4, \"data_url\").then((snapshot) => {\r\n      //   console.log(\"Uploaded a data_url string!\");\r\n      // });\r\n\r\n      // this.$emit(\"new-message\", {\r\n      //   type: \"image\",\r\n      //   content: fileUrl,\r\n      // });\r\n      // cons;\r\n      // // Reset the selectedFile and previewImageUrl properties\r\n      // this.selectedFile = null;\r\n      // this.previewImageUrl = null;\r\n      // this.cancelImage();\r\n    },\r\n\r\n    cancelImage() {\r\n      this.selectedFile = null;\r\n      this.previewImageUrl = null;\r\n    },\r\n\r\n    insertNewLine(event) {\r\n      if (event.shiftKey) {\r\n        const textarea = this.$refs.message;\r\n        const startPos = textarea.selectionStart;\r\n        const endPos = textarea.selectionEnd;\r\n        const currentValue = this.newMessage;\r\n        this.newMessage = `${currentValue.substring(\r\n          0,\r\n          startPos\r\n        )}\\n${currentValue.substring(endPos)}`;\r\n        // prevent the default behavior of inserting a new line\r\n        event.preventDefault();\r\n      }\r\n    },\r\n\r\n    showFeeback() {\r\n      this.feedback = true;\r\n    },\r\n\r\n    async joinConversation(conversationId) {\r\n      if (!this.ended) {\r\n        this.socket.emit(\"join\", { id: conversationId, user: this.user });\r\n        // console.log(`${this.user} just joined conversation ${conversationId}`);\r\n        this.joined = true;\r\n      }\r\n    },\r\n\r\n    async sendMessage() {\r\n      if (this.newMessage === \"\") {\r\n        return;\r\n      }\r\n      const message = { text: this.newMessage };\r\n      // const response = await axios.post('/api/messages', { conversationId: this.conversationId, message });\r\n      await this.socket.emit(\"message\", {\r\n        conversationId: this.conversationId,\r\n        type: \"text\",\r\n        username: this.user,\r\n        message: message,\r\n        isUser: true,\r\n      });\r\n\r\n      this.socket.emit(\"typing\", {\r\n        status: false,\r\n        user: this.user,\r\n        id: this.conversationId,\r\n      });\r\n      this.chatStartTime = Date.now();\r\n      localStorage.setItem(\"chatStarted\", true);\r\n      localStorage.setItem(\r\n        `chatStartTime-${this.conversationId}`,\r\n        this.chatStartTime\r\n      );\r\n      this.resetChatTimeout();\r\n      this.newMessage = \"\";\r\n    },\r\n\r\n    onTyping() {\r\n      if (!this.isTyping) {\r\n        this.socket.emit(\"typing\", {\r\n          status: true,\r\n          user: this.user,\r\n          id: this.conversationId,\r\n        });\r\n\r\n        setTimeout(() => {\r\n          this.socket.emit(\"typing\", {\r\n            status: false,\r\n            user: this.user,\r\n            id: this.conversationId,\r\n          });\r\n        }, 2000);\r\n      }\r\n    },\r\n\r\n    checkPrev(object, index) {\r\n      if (index === 0) {\r\n        return true;\r\n      }\r\n      if (this.messages[index - 1].user === object.user) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    checkNxt(object, index) {\r\n      if (index === 0) {\r\n        return true;\r\n      }\r\n      const lastIndex = this.messages.length - 1;\r\n      const currentIndex = this.messages.indexOf(object);\r\n      if (currentIndex === lastIndex) {\r\n        return true;\r\n      }\r\n      if (this.messages[index + 1].user === object.user) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    async newMessageSound(sound) {\r\n      var audio = new Audio(sound);\r\n      sound.play();\r\n    },\r\n\r\n    async clickSelect(msg) {\r\n      // console.log(msg, \"the message\");\r\n      this.newMessageSound(outgoing);\r\n      this.loading = true;\r\n      this.messages.pop();\r\n      const newMessage = {\r\n        id: msg.id,\r\n        text: msg.text,\r\n        user: this.user,\r\n        type: \"text\",\r\n        isUser: true,\r\n      };\r\n      this.messages = [...this.messages, newMessage];\r\n\r\n      this.loading = true;\r\n      console.log(this.step, \"this step\");\r\n      await this.checkCase(this.step, true, newMessage, false);\r\n      await this.checkCase(this.step, false, newMessage, false);\r\n      this.newMessageSound(incoming);\r\n      this.chatToChatbottom();\r\n      this.loading = false;\r\n    },\r\n\r\n    async handleInputSubmit(result) {\r\n      const { msg, inputValue, value } = result;\r\n\r\n      this.newMessageSound(outgoing);\r\n      this.loading = true;\r\n      this.messages.pop();\r\n      // const inputValue = event.target.elements[0].value.trim(); // Get the value of the first input element\r\n      const updateMsg = {\r\n        ...msg,\r\n        text: value,\r\n        value: inputValue,\r\n        type: \"input\",\r\n        user: this.user,\r\n        isUser: true,\r\n        saved: true,\r\n      };\r\n      // Perform actions with the input value, such as sending it to the server or updating the component's state\r\n      console.log(updateMsg);\r\n\r\n      this.messages = [...this.messages, updateMsg];\r\n\r\n      // this.loading = true;\r\n      console.log(this.step, \"this step\");\r\n      await this.checkCase(this.step, true, updateMsg, false);\r\n      await this.checkCase(this.step, false, updateMsg, false);\r\n      this.newMessageSound(incoming);\r\n      this.chatToChatbottom();\r\n      this.loading = false;\r\n    },\r\n\r\n    async checkCase(step, save, msg, first) {\r\n      console.log(step, save, msg);\r\n      // find the object that has the step give in the function value\r\n\r\n      let valueStep = this.flow.find((obj) => obj.step === step);\r\n\r\n      if (valueStep.next === \"end\" && first) {\r\n        // console.log(\"the end of it \");\r\n        if (!valueStep.auto) {\r\n          this.isSocketInConversation();\r\n          let intervalIdReq;\r\n\r\n          this.automated = false;\r\n        }\r\n        this.chatToChatbottom();\r\n        return;\r\n      }\r\n\r\n      if (save) {\r\n        // console.log(valueStep);\r\n        // if (msg.type === \"input\") {\r\n        //   console.log(\"got it2\", msg);\r\n        //   return;\r\n        // }\r\n        // console.log(\"got it\", msg);\r\n        // return;\r\n        valueStep.messages.pop();\r\n        // loop through and  save user options\r\n        for (let index = 0; index < valueStep.messages.length; index++) {\r\n          const element = valueStep.messages[index];\r\n          element.isUser = true;\r\n          await this.saveMessage(element, this.conversationId);\r\n        }\r\n\r\n        await saveChats(msg, this.conversationId);\r\n        await setStepConversation(this.conversationId, msg.id);\r\n        this.step = msg.id;\r\n      }\r\n\r\n      // No check and update next question for automated process\r\n      if (!save) {\r\n        for (let index = 0; index < valueStep.messages.length; index++) {\r\n          const element = valueStep.messages[index];\r\n          element.isUser = true;\r\n          // console.log(\"valueStep\", valueStep);\r\n          this.messages.push(element);\r\n          if (valueStep.next === \"end\" || !valueStep.auto) {\r\n            await this.saveMessage(element, this.conversationId);\r\n          }\r\n        }\r\n        if (valueStep.next === \"end\" && !valueStep.auto) {\r\n          await this.stopAutomate();\r\n          await this.sendToBot();\r\n        }\r\n      }\r\n      // console.log(valueStep.next, save, \"the values\", step);\r\n    },\r\n\r\n    async chatToChatbottom() {\r\n      if (document.querySelector(\"#chat-body\")) {\r\n        // console.log(\"scroll\");\r\n        document.querySelector(\"#chat-body\").scrollTop =\r\n          document.querySelector(\"#chat-body\").scrollHeight;\r\n      }\r\n    },\r\n\r\n    async saveMessage(msg, id) {\r\n      const newMessage = {\r\n        text: msg.text,\r\n        type: msg.type,\r\n        user: msg.user,\r\n        isUser: true,\r\n      };\r\n      await saveChats(newMessage, id);\r\n    },\r\n\r\n    requestAssistance() {\r\n      if (!this.agent && !this.ended) {\r\n        const data = { conversationId: this.conversationId, userId: this.user };\r\n        this.socket.emit(\"requestAssistance\", data);\r\n        // Check if chat session has already started\r\n        const chatStarted = localStorage.getItem(\"chatStarted\");\r\n        this.showLoader = true;\r\n      }\r\n    },\r\n\r\n    async stopAutomate() {\r\n      this.joinConversation(this.conversationId);\r\n      this.automated = false;\r\n      this.chatToChatbottom();\r\n      this.requestAssistance();\r\n    },\r\n\r\n    isSocketInConversation() {\r\n      const conversationRoom = `conversation:${this.conversationId}`;\r\n\r\n      this.socket.emit(\r\n        \"isSocketInConversation\",\r\n        conversationRoom,\r\n        (isJoined) => {\r\n          if (isJoined) {\r\n          } else {\r\n            this.joinConversation(this.conversationId);\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    async lastMessageIsBot() {\r\n      const lastMessage = this.messages[this.messages.length - 1];\r\n\r\n      if (lastMessage.type === \"voice\") {\r\n        return true;\r\n        // console.log(lastMessage, \"last message\");\r\n      }\r\n      return lastMessage && lastMessage.user === \"bot\";\r\n    },\r\n\r\n    startChatTimeout() {\r\n      // Calculate remaining time based on elapsed time\r\n      const elapsedTime = Date.now() - this.chatStartTime;\r\n      const remainingTime = Math.max(this.chatTimeoutDuration - elapsedTime, 0);\r\n\r\n      // Start the chat timeout timer\r\n      this.chatTimeout = setTimeout(() => {\r\n        // End the chat session on timeout\r\n        if (!this.ended) {\r\n          this.socket.emit(\"timeUp\", this.conversationId);\r\n        }\r\n\r\n        this.expiredConvId(true);\r\n      }, remainingTime);\r\n\r\n      // Update the line loader every second\r\n      const intervalId = setInterval(() => {\r\n        const elapsedTime = Date.now() - this.chatStartTime;\r\n        const remainingTime = Math.max(\r\n          this.chatTimeoutDuration - elapsedTime,\r\n          0\r\n        );\r\n        const remainingPercentage =\r\n          (remainingTime / this.chatTimeoutDuration) * 100;\r\n        this.loaderWidth = 100 - remainingPercentage;\r\n      }, 1000);\r\n\r\n      this.intervalIds.push(intervalId);\r\n    },\r\n\r\n    resetChatTimeout() {\r\n      // Reset the chat timeout timer\r\n      clearTimeout(this.chatTimeout);\r\n      if (!this.chatStartTime) {\r\n        this.chatStartTime = Date.now();\r\n      }\r\n      this.startChatTimeout();\r\n\r\n      // Clear the line loader interval\r\n      clearInterval(this.intervalIds.pop());\r\n      this.loaderWidth = 0;\r\n    },\r\n\r\n    getConversationById(conversationId) {\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\")) || {};\r\n      const conversation =\r\n        savedState.conversations?.byId[conversationId] || null;\r\n      return conversation;\r\n    },\r\n\r\n    getConversationIdFromLocalStorage() {\r\n      const conversationData = localStorage.getItem(\"conversationId\");\r\n      if (conversationData) {\r\n        const conversationId = conversationData.split(\"-\")[0];\r\n        return conversationId;\r\n      }\r\n      return null; // conversation ID not found or invalid\r\n    },\r\n\r\n    saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    isConversationIdExpired() {\r\n      // const conversationId = localStorage.getItem(\"conversationId\");\r\n      const convo = this.conversationId || this.conversationId;\r\n      const expire = this.getConversationById(convo);\r\n      if (convo && expire) {\r\n        const conversationTimestamp = parseInt(expire.expire);\r\n        const now = Date.now();\r\n        const twoDaysInMilliseconds = 7 * 24 * 60 * 60 * 1000; // 2 days in milliseconds\r\n        return now - conversationTimestamp > twoDaysInMilliseconds;\r\n      }\r\n      return true; // conversation ID not found or invalid\r\n    },\r\n\r\n    async expiredConvId(value) {\r\n      if (this.isConversationIdExpired() || value) {\r\n        // this.ended = true;\r\n      }\r\n    },\r\n\r\n    async getConversationId() {\r\n      let localChatId = this.conversationId || null;\r\n      if (localChatId === null) {\r\n        this.$router.push({ name: \"home\" });\r\n      }\r\n\r\n      return localChatId;\r\n    },\r\n\r\n    capitalizeName(name) {\r\n      // console.log(name, \"the name\");\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n\r\n    iniStartTime() {\r\n      this.chatStartTime = localStorage.getItem(\r\n        `chatStartTime-${this.conversationId}`\r\n      );\r\n      if (this.chatStartTime) {\r\n        // Restore chat start time from local storage\r\n\r\n        this.showLoader = true;\r\n        this.startChatTimeout();\r\n      }\r\n      // Set the chatStarted flag and chat start time in local storage\r\n      if (!this.chatStartTime) {\r\n        this.chatStartTime = Date.now();\r\n        localStorage.setItem(\r\n          `chatStartTime-${this.conversationId}`,\r\n          this.chatStartTime\r\n        );\r\n      }\r\n    },\r\n\r\n    async updateConversation(conversationId, conversationData) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const newState = {\r\n        ...data,\r\n        conversations: {\r\n          ...data.conversations,\r\n          byId: {\r\n            ...data.conversations.byId,\r\n            [conversationId]: {\r\n              ...data.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      //   this.updateState(newState);\r\n      // console.log(newState, \"updateing feedback\");\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    async sendToBot() {\r\n      // console.log(\"joshijax\", point);\r\n\r\n      let isbot = await this.lastMessageIsBot();\r\n      if (isbot || this.automated) {\r\n        this.sending = false;\r\n        this.isTyping = false;\r\n        return;\r\n      }\r\n      this.sending = true;\r\n      this.isTyping = true;\r\n      let imageMessages = this.messages.filter(\r\n        (msg) => msg.type === \"text\" || msg.type === \"input\"\r\n      );\r\n      let messageStrings = imageMessages.map((msg) => \"\\n\" + msg.text);\r\n\r\n      let allMessageText = \" \\nhello\\n \" + messageStrings.join(\"\");\r\n      console.log(allMessageText, \"TEXT\");\r\n      this.inputText = \"\";\r\n      try {\r\n        // console.log(allMessageText, \"TEXT2\");\r\n        const response = await axios({\r\n          method: \"post\",\r\n          url: \"http://54.162.89.39/answer-me/\",\r\n\r\n          data: {\r\n            prompt: allMessageText,\r\n          },\r\n        });\r\n\r\n        // console.log(\"JOSHIJAX\", typeof response.data.response);\r\n\r\n        await this.socket.emit(\"message\", {\r\n          conversationId: this.conversationId,\r\n          type: \"text\",\r\n          username: \"bot\",\r\n          message: { text: response.data.response },\r\n          isUser: false,\r\n        });\r\n        this.isTyping = false;\r\n      } catch (error) {\r\n        // console.error(error);\r\n        this.isTyping = false;\r\n      }\r\n      this.sending = false;\r\n    },\r\n\r\n    messageEndsWithGoodbye(statement) {\r\n      if (!statement) {\r\n        return false;\r\n      }\r\n      // Define common keywords and phrases that indicate a goodbye message\r\n      const goodbyeKeywords = [\r\n        \"goodbye\",\r\n        \"bye\",\r\n        \"farewell\",\r\n        \"see you\",\r\n        \"take care\",\r\n        \"have a nice\",\r\n        \"later\",\r\n      ];\r\n\r\n      // Define regular expressions to match common patterns in goodbye messages\r\n      const patterns = [\r\n        /\\b(thanks|thank you)\\b/gi,\r\n        /\\b(good night|night)\\b/gi,\r\n        /\\b(talk to you|chat with you)\\b/gi,\r\n        /\\b(see you|cu|ttyl|ttys)\\b/gi,\r\n        /\\b(be safe)\\b/gi,\r\n        /\\b(have a great|have a nice)\\b/gi,\r\n        /\\b(take care)\\b/gi,\r\n        /\\b(sleep well)\\b/gi,\r\n        /\\b(catch you later|laters)\\b/gi,\r\n      ];\r\n\r\n      // Check if the statement contains a goodbye keyword\r\n      for (const keyword of goodbyeKeywords) {\r\n        if (statement.toLowerCase().includes(keyword)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      // Check if the statement matches any of the common patterns\r\n      for (const pattern of patterns) {\r\n        if (pattern.test(statement)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      // If no keywords or patterns were found, assume it's not a goodbye message\r\n      return false;\r\n    },\r\n\r\n    renderMessage(message) {\r\n      // Detect links in the message and render them as clickable links\r\n      const linkRegex = /(https?|ftp):\\/\\/[^\\s]+/gi;\r\n\r\n      if (this.isLink(message)) {\r\n        // Replace the link in the message with an anchor tag element\r\n        message = message.replace(\r\n          linkRegex,\r\n          '<a href=\"$&\" target=\"_blank\">$&</a>'\r\n        );\r\n      }\r\n\r\n      return message;\r\n    },\r\n\r\n    isLink(text) {\r\n      // Match links that do not already have an anchor tag\r\n      const linkRegex = /^(?!.*?<a\\s).*?(https?|ftp):\\/\\/[^\\s]+.*$/i;\r\n      return linkRegex.test(text);\r\n    },\r\n\r\n    async iniChat() {\r\n      // console.log(\"joshijaxmsg\", this.botName);\r\n      this.isLoading = true;\r\n      let convoinfo = {};\r\n\r\n      convoinfo = await getConversation(this.conversationId);\r\n      this.agent = convoinfo.agent;\r\n\r\n      this.messages = await getConvoChats(this.conversationId);\r\n\r\n      // console.log(\"glory\", this.messages);\r\n\r\n      this.step = convoinfo.step;\r\n\r\n      await this.expiredConvId(false);\r\n\r\n      this.chatToChatbottom();\r\n\r\n      this.iniStartTime();\r\n      // await this.submitText();\r\n      this.isLoading = false;\r\n      if (convoinfo.hasOwnProperty(\"ended\")) {\r\n        this.ended = convoinfo.ended;\r\n        let item = this.getConversationBy(this.conversationId);\r\n\r\n        item.ended = convoinfo.ended;\r\n        // console.log(item, \"the item\");\r\n        await this.updateConversation(this.conversationId, item);\r\n      } else {\r\n        this.ended = false;\r\n      }\r\n\r\n      await this.checkCase(this.step, false, null, true);\r\n\r\n      if (!this.ended && this.isBotEnabled && !this.automated) {\r\n        let logivVal = await this.lastMessageIsBot();\r\n\r\n        if (!logivVal) {\r\n          this.sendToBot();\r\n        }\r\n      }\r\n    },\r\n\r\n    recordingAudio() {\r\n      this.recording = true;\r\n      navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\r\n        this.mediaRecorder = new MediaRecorder(stream);\r\n        const chunks = [];\r\n        this.mediaRecorder.addEventListener(\"dataavailable\", (event) => {\r\n          chunks.push(event.data);\r\n        });\r\n        this.mediaRecorder.addEventListener(\"stop\", () => {\r\n          this.recording = false;\r\n          const blob = new Blob(chunks, { type: \"audio/webm\" });\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(blob);\r\n          const conversationId = this.conversationId;\r\n          console.log(\"sending audio\", conversationId);\r\n          reader.addEventListener(\"loadend\", () => {\r\n            console.log(\"sending audio\", conversationId);\r\n            const message = {\r\n              conversationId: conversationId,\r\n              username: this.user,\r\n              type: \"voice\",\r\n              author: \"Me\",\r\n              message: reader.result,\r\n              isUser: true,\r\n            };\r\n            // this.socket.emit(\"voiceMessage\", message);\r\n            this.messages.push(message);\r\n          });\r\n        });\r\n        this.mediaRecorder.start();\r\n      });\r\n    },\r\n\r\n    requestMicrophonePermission() {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ audio: true })\r\n        .then((stream) => {\r\n          this.mediaStream = stream;\r\n          this.startRecording();\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    },\r\n\r\n    startRecording() {\r\n      if (navigator.permissions) {\r\n        navigator.permissions\r\n          .query({ name: \"microphone\" })\r\n          .then((permissionStatus) => {\r\n            if (permissionStatus.state === \"granted\") {\r\n              // permission already granted, proceed with recording\r\n              this.recordingAudio();\r\n            } else if (permissionStatus.state === \"prompt\") {\r\n              // permission not yet granted, show permission prompt\r\n              navigator.mediaDevices\r\n                .getUserMedia({ audio: true })\r\n                .then((stream) => {\r\n                  stream.getTracks().forEach((track) => track.stop());\r\n                  this.recordingAudio();\r\n                })\r\n                .catch((error) => {\r\n                  console.error(error);\r\n                });\r\n            } else if (permissionStatus.state === \"denied\") {\r\n              // permission denied, show error message or prompt user to enable permission\r\n              console.error(\"Permission denied for microphone\");\r\n            }\r\n          });\r\n      }\r\n    },\r\n\r\n    stopRecording() {\r\n      this.mediaRecorder.stop();\r\n    },\r\n\r\n    playVoiceMessage(message) {\r\n      const audio = new Audio(message.text);\r\n      const playButton = document.createElement(\"button\");\r\n      playButton.textContent = \"Play\";\r\n      playButton.onclick = () => {\r\n        audio.play();\r\n      };\r\n      playButton.click();\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    // console.log(\"botName 2\", this.botName);\r\n    this.socket = io(\"http://18.212.173.184:3000/\");\r\n    this.socket.on(\"connect\", () => {\r\n      // console.log(\"Connected to server\");\r\n\r\n      this.socket.emit(\"userType\", \"customer\");\r\n    });\r\n\r\n    // litsen to new\r\n\r\n    this.socket.on(\"newMessage\", async (message) => {\r\n      console.log(message.user, this.user);\r\n      if (message.user === this.user || message.user === \"user\") {\r\n        // console.log(\"sent out\", value);\r\n        await this.messages.push(message);\r\n        // console.log(this.messages, \"here final\");\r\n        await this.chatToChatbottom();\r\n        await this.newMessageSound(outgoing);\r\n        if (this.isBotEnabled) {\r\n          this.sendToBot();\r\n        }\r\n      } else {\r\n        // console.log(\"recieved\", message);\r\n        this.messages.push(message);\r\n        // console.log(this.messages, \"here final\");\r\n        this.chatToChatbottom();\r\n        this.newMessageSound(incoming);\r\n        readMessage(this.conversationId);\r\n      }\r\n    });\r\n\r\n    this.socket.on(\"joined\", async (message) => {\r\n      // console.log(\r\n      //   this.user != message.user,\r\n      //   this.user,\r\n      //   message.user,\r\n      //   \"the data i need\"\r\n      // );\r\n\r\n      if (this.user != message.user) {\r\n        if (this.agent !== message.user) {\r\n          this.messages.push(message);\r\n          // this.saveMessage(message);\r\n          await this.chatToChatbottom();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.socket.on(\"typing\", (isTyping) => {\r\n      // console.log(isTyping);\r\n      this.isTyping = isTyping.status;\r\n      this.typingMsg = `${isTyping.user} is typing`;\r\n      this.chatToChatbottom();\r\n    });\r\n\r\n    this.socket.on(\"requestAccepted\", async (data) => {\r\n      // console.log(data, \"requestAccepted\");\r\n      this.agent = data.userId;\r\n    });\r\n\r\n    await this.iniChat();\r\n  },\r\n\r\n  beforeUnmount() {\r\n    this.socket.off();\r\n  },\r\n\r\n  watch: {\r\n    messages: {\r\n      handler(newMessages) {\r\n        const lastMessage = newMessages[newMessages.length - 1];\r\n        if (\r\n          lastMessage &&\r\n          this.messageEndsWithGoodbye(lastMessage.text) &&\r\n          this.ended !== null &&\r\n          !this.ended\r\n        ) {\r\n          // console.log('Last message ended with \"Goodbye\"');\r\n\r\n          setTimeout(() => {\r\n            this.showFeeback();\r\n            // console.log('Last message ended with \"Goodbye\"')\r\n          }, 3000);\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n\r\n    conversationId: {\r\n      async handler(to, from) {\r\n        await this.iniChat();\r\n        // if (to.params.id !== from.params.id) {\r\n\r\n        // }\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    displayAgent() {\r\n      return this.agent || \"bot\";\r\n    },\r\n    // ...other computed properties\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  width: 100%;\r\n\r\n  background-color: #fff;\r\n  border: 1px solid rgb(242, 242, 242);\r\n  box-shadow: rgba(0, 0, 0, 0.1) 6px 2px 15px 5px;\r\n  /* border: 1px solid #ccc; */\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n  font-family: Arial, sans-serif;\r\n  display: none; /* Hide the widget by default */\r\n  z-index: 9998;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Media query for larger screens */\r\n@media (min-width: 600px) {\r\n  .chat-container {\r\n    position: absolute;\r\n    bottom: 90px;\r\n    height: 90%;\r\n    right: 20px;\r\n    max-width: 400px; /* Adjust the maximum width as per your requirement */\r\n    max-height: 80%; /* Adjust the maximum height as per your requirement */\r\n  }\r\n}\r\n\r\n/* Media query for mobile view */\r\n@media (max-width: 600px) {\r\n  .chat-container {\r\n    position: fixed;\r\n    bottom: 80px;\r\n    height: 89%;\r\n    max-width: none;\r\n    max-height: none;\r\n  }\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #f0f0f0;\r\n  padding: 10px;\r\n  text-align: center;\r\n  background: #0056ff 0% 0% no-repeat padding-box;\r\n  color: #ffffff;\r\n  border-radius: 10px 10px 0 0;\r\n}\r\n\r\n.chat-header h3 {\r\n  margin: 0;\r\n}\r\n\r\n.chat-header .fa-times {\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-body {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  border-radius: 10px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar {\r\n  width: 12px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-thumb {\r\n  border-radius: 10px;\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  background-color: #555;\r\n}\r\n\r\n.chat-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n}\r\n\r\n.chat-footer input[type=\"text\"] {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.chat-footer textarea {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 6px;\r\n  resize: none;\r\n  overflow: auto;\r\n  max-height: 200px;\r\n}\r\n\r\n.chat-footer > .footButton {\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer > .footIcon {\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .start {\r\n  width: 100%;\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .text {\r\n  text-align: center;\r\n  font-size: 14px;\r\n  line-height: 21px;\r\n  padding-top: 0px;\r\n  color: rgb(115, 115, 115);\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.bounce-enter-active {\r\n  animation: bounce-in 0.5s;\r\n}\r\n.bounce-leave-active {\r\n  animation: bounce-in 0.5s reverse;\r\n}\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n  50% {\r\n    transform: scale(1.25);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.message-bubble {\r\n  padding: 10px 20px;\r\n  border-radius: 20px;\r\n  margin-bottom: 10px;\r\n  /* max-width: 80%; */\r\n  word-wrap: break-word;\r\n  width: 100%;\r\n}\r\n\r\n/* for the chip select */\r\n\r\n.md-chip {\r\n  display: inline-block;\r\n  background: transparent;\r\n  padding: 0 12px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 32px;\r\n  font-size: 15px;\r\n}\r\n\r\n.md-chip.md-chip-hover:hover {\r\n  background: #ccc;\r\n}\r\n\r\n.md-chip-clickable {\r\n  cursor: pointer;\r\n}\r\n\r\n.md-chip,\r\n.md-chip-icon {\r\n  height: 32px;\r\n  line-height: 32px;\r\n}\r\n\r\n.md-chip-icon {\r\n  display: block;\r\n  float: left;\r\n  background: #009587;\r\n  width: 32px;\r\n  border-radius: 50%;\r\n  text-align: center;\r\n  color: white;\r\n  margin: 0 8px 0 -12px;\r\n}\r\n\r\n.md-chip-remove {\r\n  display: inline-block;\r\n  background: #aaa;\r\n  border: 0;\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  margin: 0 -4px 0 4px;\r\n  cursor: pointer;\r\n  font: inherit;\r\n  line-height: 20px;\r\n}\r\n\r\n.md-chip-remove:after {\r\n  color: #e0e0e0;\r\n  content: \"x\";\r\n}\r\n.md-chip-remove:hover {\r\n  background: #999;\r\n}\r\n.md-chip-remove:active {\r\n  background: #777;\r\n}\r\n\r\n.md-chips {\r\n  padding: 12px 0;\r\n}\r\n\r\n.md-chips.md-chip {\r\n  margin: 0 5px 3px 0;\r\n}\r\n\r\n.md-chip-raised {\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  display: none;\r\n}\r\n\r\ninput[type=\"checkbox\"]:checked + label {\r\n  -webkit-transition: all 500ms ease;\r\n  transition: all 500ms ease;\r\n  background-color: #1579b3;\r\n  color: white;\r\n  border-color: #fc6c27;\r\n}\r\n\r\n/* chat csss */\r\n\r\n.chat-body .message-content__item .chat-body-header {\r\n  border-bottom: 1px solid #e0e2e4;\r\n  padding: 20px 15px;\r\n  position: relative;\r\n  height: 95px;\r\n}\r\n.chat-body .message-content__item .chat-body-header .name {\r\n  font-size: 21px;\r\n  color: #535357;\r\n  font-weight: 500;\r\n}\r\n.chat-body .message-content__item .chat-body-header .phone {\r\n  font-size: 16px;\r\n  color: #a3a3a7;\r\n}\r\n.chat-body .message-content__item .chat-body-header img {\r\n  position: absolute;\r\n  top: 30px;\r\n  right: 15px;\r\n}\r\n.chat-body .message-box .message-box__item {\r\n  margin-bottom: 15px;\r\n}\r\n.chat-body .message-box .message-box__item.incoming {\r\n  text-align: left;\r\n}\r\n.chat-body .message-box .message-box__item.incoming .time {\r\n  right: 0;\r\n}\r\n.chat-body .message-box .message-box__item.outgoing {\r\n  text-align: right;\r\n}\r\n.chat-body .message-box .message-box__item.outgoing .time {\r\n  left: 0;\r\n}\r\n.chat-body .message-box .message-box__item .name {\r\n  color: #535357;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n}\r\n.chat-body .message-box .message-box__item .bot-text {\r\n  background: #f4f3f6 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #535357;\r\n  border-radius: 7px;\r\n  max-width: 61%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  position: relative;\r\n  /* margin-bottom: 20px; */\r\n}\r\n\r\n.chat-body .message-box .message-box__item .user-text {\r\n  background: #0056ff 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #ffffff;\r\n  border-radius: 7px;\r\n  max-width: 62%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  position: relative;\r\n  /* margin-bottom: 20px; */\r\n}\r\n\r\n.chat-body .message-form {\r\n  height: 75px;\r\n  border-top: 1px solid #e0e2e4;\r\n  padding: 20px 15px;\r\n}\r\n.chat-body .message-form input {\r\n  width: calc(100% - 50px);\r\n  border: none;\r\n  font-size: 16px;\r\n  margin-top: 5px;\r\n}\r\n.chat-body .message-form img {\r\n  float: right;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* SPINNER */\r\n\r\n.spinner {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  width: 45px;\r\n  height: 9px;\r\n  margin-left: -22px;\r\n  margin-top: -13px;\r\n  text-align: center;\r\n}\r\n\r\n.spinner > div {\r\n  width: 9px;\r\n  height: 9px;\r\n  background-color: #dcdcdc;\r\n  border-radius: 100%;\r\n  display: inline-block;\r\n  -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\r\n  animation: bouncedelay 1400ms ease-in-out infinite;\r\n  /* Prevent first frame from flickering when animation starts */\r\n  -webkit-animation-fill-mode: both;\r\n  animation-fill-mode: both;\r\n}\r\n\r\n.spinner .bounce1 {\r\n  -webkit-animation-delay: -0.32s;\r\n  animation-delay: -0.32s;\r\n}\r\n\r\n.spinner .bounce2 {\r\n  -webkit-animation-delay: -0.16s;\r\n  animation-delay: -0.16s;\r\n}\r\n\r\n@-webkit-keyframes bouncedelay {\r\n  0%,\r\n  80%,\r\n  100% {\r\n    transform: scale(0);\r\n    -webkit-transform: scale(0);\r\n  }\r\n  40% {\r\n    transform: scale(1);\r\n    -webkit-transform: scale(1);\r\n  }\r\n}\r\n@keyframes bouncedelay {\r\n  0%,\r\n  80%,\r\n  100% {\r\n    transform: scale(0);\r\n    -webkit-transform: scale(0);\r\n  }\r\n  40% {\r\n    transform: scale(1);\r\n    -webkit-transform: scale(1);\r\n  }\r\n}\r\n#container {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  display: -ms-flexbox;\r\n  justify-content: space-around;\r\n  -webkit-justify-content: space-around;\r\n  align-items: center;\r\n  -webkit-align-items: center;\r\n}\r\n\r\n#loading-bubble {\r\n  display: flex;\r\n  display: -ms-flexbox;\r\n  justify-content: center;\r\n  -webkit-justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  background: #f4f3f6 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #535357;\r\n  border-radius: 7px;\r\n  max-width: 55%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  -webkit-animation: message-bounce 2.5s infinite ease-in-out;\r\n  animation: message-bounce 2.5s ease-in-out infinite;\r\n  -webkit-animation-fill-mode: both;\r\n  animation-fill-mode: both;\r\n}\r\n#loading-bubble.grey {\r\n  background-color: #a5b0b5;\r\n}\r\n\r\n#loading-bubble .spinner {\r\n  position: static !important;\r\n  margin-top: -11px;\r\n  margin-left: 0px;\r\n}\r\n#loading-bubble .spinner div {\r\n  background-color: #2e66bd;\r\n}\r\n\r\n@-webkit-keyframes message-bounce {\r\n  0% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n    -webkit-transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n}\r\n\r\n@keyframes message-bounce {\r\n  0% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n    -webkit-transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n}\r\n\r\n.join-message {\r\n  background-color: green;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  margin: 10px;\r\n  max-width: 80%;\r\n}\r\n\r\n.just-joined {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n}\r\n\r\n.line-loader {\r\n  height: 4px;\r\n  background-color: #ccc;\r\n  position: relative;\r\n}\r\n\r\n.line-loader:before {\r\n  content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: #007aff;\r\n  animation: line-loader 5s linear;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes line-loader {\r\n  from {\r\n    width: 0%;\r\n  }\r\n  to {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.loading-div {\r\n  position: absolute;\r\n  /* top: 0; */\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(255, 255, 255, 0.7);\r\n  z-index: 1000;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.loading-div::after {\r\n  content: \"\";\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 3px solid #ccc;\r\n  border-top-color: #333;\r\n  border-radius: 50%;\r\n  animation: spin 1s ease-in-out infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.recordingIcon {\r\n  width: 25px;\r\n}\r\n</style>\r\n","<template>\r\n  <canvas ref=\"canvas\"></canvas>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    name: String,\r\n    size: {\r\n      type: Number,\r\n      default: 40,\r\n    },\r\n  },\r\n  mounted() {\r\n    const canvas = this.$refs.canvas;\r\n    const context = canvas.getContext(\"2d\");\r\n    const size = this.size; // Size of the canvas\r\n    const fontSize = size / 2; // Font size of the letter\r\n    const fontFamily = \"Arial\"; // Font family of the letter\r\n\r\n    // Set the canvas size\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n\r\n    // Draw the letter\r\n    context.fillStyle = \"#ccc\"; // Background color\r\n    context.fillRect(0, 0, size, size);\r\n    context.fillStyle = \"#fff\"; // Text color\r\n    context.textAlign = \"center\";\r\n    context.textBaseline = \"middle\";\r\n    context.font = `${fontSize}px ${fontFamily}`;\r\n    context.fillText(this.getNameInitial(), size / 2, size / 2);\r\n  },\r\n  methods: {\r\n    getNameInitial() {\r\n      return this.name ? this.name[0].toUpperCase() : \"B\";\r\n    },\r\n  },\r\n  watch: {\r\n    name: function (newValue, oldValue) {\r\n      console.log(newValue, \"there was a chnage\");\r\n      const canvas = this.$refs.canvas;\r\n      const context = canvas.getContext(\"2d\");\r\n      const size = 40; // Size of the canvas\r\n      const fontSize = size / 2; // Font size of the letter\r\n      const fontFamily = \"Arial\"; // Font family of the letter\r\n\r\n      // Set the canvas size\r\n      canvas.width = size;\r\n      canvas.height = size;\r\n\r\n      // Draw the letter\r\n      context.fillStyle = \"#ccc\"; // Background color\r\n      context.fillRect(0, 0, size, size);\r\n      context.fillStyle = \"#fff\"; // Text color\r\n      context.textAlign = \"center\";\r\n      context.textBaseline = \"middle\";\r\n      context.font = `${fontSize}px ${fontFamily}`;\r\n      context.fillText(this.getNameInitial(), size / 2, size / 2);\r\n      // Re-mount the component\r\n      // this.$nextTick(() => {\r\n      //   this.$forceUpdate();\r\n      // });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\ncanvas {\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n","import { render } from \"./NewImage.vue?vue&type=template&id=220b3d75&scoped=true\"\nimport script from \"./NewImage.vue?vue&type=script&lang=js\"\nexport * from \"./NewImage.vue?vue&type=script&lang=js\"\n\nimport \"./NewImage.vue?vue&type=style&index=0&id=220b3d75&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-220b3d75\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"chatview\">\r\n    <transition name=\"bounce\">\r\n      <div class=\"chat-container\">\r\n        <div class=\"chat-header\">\r\n          <v-icon\r\n            style=\"cursor: pointer\"\r\n            @click=\"$emit('goBack')\"\r\n            start\r\n            icon=\"mdi-arrow-left\"\r\n          ></v-icon>\r\n          <h3>Chatly</h3>\r\n        </div>\r\n\r\n        <div\r\n          ref=\"chatbody\"\r\n          class=\"chat-body\"\r\n          id=\"chat-body\"\r\n          style=\"display: flex; justify-content: center; align-items: center\"\r\n        >\r\n          <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n\r\n          <div style=\"max-width: 360px\" class=\"\">\r\n            <v-form ref=\"form\">\r\n              <h3 style=\"text-align: center\">\r\n                Please tell us how was your experience?\r\n              </h3>\r\n              <v-btn-toggle v-model=\"selectedEmoji\" mandatory>\r\n                <v-btn\r\n                  v-for=\"emoji in emojis\"\r\n                  :key=\"emoji.value\"\r\n                  :value=\"emoji.value\"\r\n                  class=\"ma-2 custom-btn\"\r\n                >\r\n                  <span class=\"emoji\">{{ emoji.label }}</span>\r\n                  <v-tooltip top>\r\n                    <span class=\"tooltip-value\">{{ emoji.value }}</span>\r\n                  </v-tooltip>\r\n                </v-btn>\r\n              </v-btn-toggle>\r\n              <v-text-field\r\n                v-model=\"comments\"\r\n                label=\"Additional Comments\"\r\n                :rules=\"rules.comments\"\r\n              ></v-text-field>\r\n              <v-btn\r\n                color=\"blue\"\r\n                @click=\"submitFeedback\"\r\n                :disabled=\"selectedEmoji === null\"\r\n                >Submit</v-btn\r\n              >\r\n            </v-form>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"chat-footer\">\r\n          <!-- <div\r\n                style=\"\r\n                  margin: 24px auto 12px;\r\n                  text-align: center;\r\n                  font-size: 14px;\r\n                  line-height: 21px;\r\n                  padding-top: 0px;\r\n                  color: rgb(115, 115, 115);\r\n                \"\r\n              >\r\n                Your conversation has ended\r\n              </div>\r\n              <button @click=\"createNewConvo\" class=\"start\">\r\n                Start Conversation\r\n              </button> -->\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <ErrorDialog\r\n      v-if=\"showErrorDialog\"\r\n      :error=\"errorMessage\"\r\n      @dismiss=\"hideErrorDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updateConvo } from \"@/utils/firbase_utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedEmoji: null,\r\n      comments: \"\",\r\n      isLoading: false,\r\n      emojis: [\r\n        { value: \"bad\", label: \"\" },\r\n        { value: \"fair\", label: \"\" },\r\n        { value: \"good\", label: \"\" },\r\n        { value: \"great\", label: \"\" },\r\n      ],\r\n      rules: {\r\n        comments: [\r\n          (value) => !!value || \"Comments are required\",\r\n          (value) =>\r\n            value.length <= 1000 ||\r\n            \"Comments must be less than 1000 characters\",\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  components: {},\r\n  props: [\"conversationId\"],\r\n\r\n  methods: {\r\n    async updateConversation(conversationId, conversationData) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const newState = {\r\n        ...data,\r\n        conversations: {\r\n          ...data.conversations,\r\n          byId: {\r\n            ...data.conversations.byId,\r\n            [conversationId]: {\r\n              ...data.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      //   this.updateState(newState);\r\n      console.log(newState, \"updateing feedback\");\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    async submitFeedback() {\r\n      if (this.$refs.form.validate()) {\r\n        await updateConvo(this.conversationId, {\r\n          ended: true,\r\n          comment: this.comments,\r\n          reaction: this.selectedEmoji,\r\n        });\r\n        let item = this.getConversationBy(this.conversationId);\r\n        console.log(\"the item\", item);\r\n        item.ended = true;\r\n        // console.log(item, \"the item\");\r\n        await this.updateConversation(this.conversationId, item);\r\n        this.$emit(\"goBackTo\");\r\n        // this.$router.push({ name: \"home\" });\r\n      }\r\n      // Code to submit feedback goes here\r\n    },\r\n  },\r\n\r\n  created() {},\r\n};\r\n</script>\r\n<style scoped>\r\n.v-btn-toggle {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.custom-btn {\r\n  font-size: 37px;\r\n  padding: 16px;\r\n}\r\n\r\n.emoji {\r\n  display: block;\r\n}\r\n\r\n.tooltip-value {\r\n  font-size: 14px;\r\n}\r\n\r\n.v-btn-group--density-default.v-btn-group {\r\n  height: 95px;\r\n}\r\n\r\n.chat-container {\r\n  width: 100%;\r\n\r\n  background-color: #fff;\r\n  border: 1px solid rgb(242, 242, 242);\r\n  box-shadow: rgba(0, 0, 0, 0.1) 6px 2px 15px 5px;\r\n  /* border: 1px solid #ccc; */\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n  font-family: Arial, sans-serif;\r\n  display: none; /* Hide the widget by default */\r\n  z-index: 9998;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Media query for larger screens */\r\n@media (min-width: 600px) {\r\n  .chat-container {\r\n    position: absolute;\r\n    bottom: 90px;\r\n    height: 90%;\r\n    right: 20px;\r\n    max-width: 400px; /* Adjust the maximum width as per your requirement */\r\n    max-height: 80%; /* Adjust the maximum height as per your requirement */\r\n  }\r\n}\r\n\r\n/* Media query for mobile view */\r\n@media (max-width: 600px) {\r\n  .chat-container {\r\n    position: fixed;\r\n    bottom: 80px;\r\n    height: 89%;\r\n    max-width: none;\r\n    max-height: none;\r\n  }\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #f0f0f0;\r\n  padding: 10px;\r\n  text-align: center;\r\n  background: #0056ff 0% 0% no-repeat padding-box;\r\n  color: #ffffff;\r\n  border-radius: 10px 10px 0 0;\r\n}\r\n\r\n.chat-header h3 {\r\n  margin: 0;\r\n}\r\n\r\n.chat-header .fa-times {\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-body {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  border-radius: 10px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar {\r\n  width: 12px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.chat-body::-webkit-scrollbar-thumb {\r\n  border-radius: 10px;\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n  background-color: #555;\r\n}\r\n\r\n.chat-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n}\r\n\r\n.chat-footer input[type=\"text\"] {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.chat-footer textarea {\r\n  flex-grow: 1;\r\n  padding: 10px;\r\n  border: 1px solid gray;\r\n  border-radius: 20px;\r\n  margin-right: 6px;\r\n  resize: none;\r\n  overflow: auto;\r\n  max-height: 200px;\r\n}\r\n\r\n.chat-footer > .footButton {\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer > .footIcon {\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .start {\r\n  width: 100%;\r\n  padding: 10px 20px;\r\n  color: #ffffff;\r\n  background-color: rgb(17, 103, 255);\r\n  border: none;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-footer .text {\r\n  text-align: center;\r\n  font-size: 14px;\r\n  line-height: 21px;\r\n  padding-top: 0px;\r\n  color: rgb(115, 115, 115);\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.bounce-enter-active {\r\n  animation: bounce-in 0.5s;\r\n}\r\n.bounce-leave-active {\r\n  animation: bounce-in 0.5s reverse;\r\n}\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n  50% {\r\n    transform: scale(1.25);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.message-bubble {\r\n  padding: 10px 20px;\r\n  border-radius: 20px;\r\n  margin-bottom: 10px;\r\n  /* max-width: 80%; */\r\n  word-wrap: break-word;\r\n  width: 100%;\r\n}\r\n\r\n/* for the chip select */\r\n\r\n.md-chip {\r\n  display: inline-block;\r\n  background: transparent;\r\n  padding: 0 12px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 32px;\r\n  font-size: 15px;\r\n}\r\n\r\n.md-chip.md-chip-hover:hover {\r\n  background: #ccc;\r\n}\r\n\r\n.md-chip-clickable {\r\n  cursor: pointer;\r\n}\r\n\r\n.md-chip,\r\n.md-chip-icon {\r\n  height: 32px;\r\n  line-height: 32px;\r\n}\r\n\r\n.md-chip-icon {\r\n  display: block;\r\n  float: left;\r\n  background: #009587;\r\n  width: 32px;\r\n  border-radius: 50%;\r\n  text-align: center;\r\n  color: white;\r\n  margin: 0 8px 0 -12px;\r\n}\r\n\r\n.md-chip-remove {\r\n  display: inline-block;\r\n  background: #aaa;\r\n  border: 0;\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  margin: 0 -4px 0 4px;\r\n  cursor: pointer;\r\n  font: inherit;\r\n  line-height: 20px;\r\n}\r\n\r\n.md-chip-remove:after {\r\n  color: #e0e0e0;\r\n  content: \"x\";\r\n}\r\n.md-chip-remove:hover {\r\n  background: #999;\r\n}\r\n.md-chip-remove:active {\r\n  background: #777;\r\n}\r\n\r\n.md-chips {\r\n  padding: 12px 0;\r\n}\r\n\r\n.md-chips.md-chip {\r\n  margin: 0 5px 3px 0;\r\n}\r\n\r\n.md-chip-raised {\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12),\r\n    0 3px 1px -2px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\ninput[type=\"checkbox\"] {\r\n  display: none;\r\n}\r\n\r\ninput[type=\"checkbox\"]:checked + label {\r\n  -webkit-transition: all 500ms ease;\r\n  transition: all 500ms ease;\r\n  background-color: #1579b3;\r\n  color: white;\r\n  border-color: #fc6c27;\r\n}\r\n\r\n/* chat csss */\r\n\r\n.chat-body .message-content__item .chat-body-header {\r\n  border-bottom: 1px solid #e0e2e4;\r\n  padding: 20px 15px;\r\n  position: relative;\r\n  height: 95px;\r\n}\r\n.chat-body .message-content__item .chat-body-header .name {\r\n  font-size: 21px;\r\n  color: #535357;\r\n  font-weight: 500;\r\n}\r\n.chat-body .message-content__item .chat-body-header .phone {\r\n  font-size: 16px;\r\n  color: #a3a3a7;\r\n}\r\n.chat-body .message-content__item .chat-body-header img {\r\n  position: absolute;\r\n  top: 30px;\r\n  right: 15px;\r\n}\r\n.chat-body .message-box .message-box__item {\r\n  margin-bottom: 15px;\r\n}\r\n.chat-body .message-box .message-box__item.incoming {\r\n  text-align: left;\r\n}\r\n.chat-body .message-box .message-box__item.incoming .time {\r\n  right: 0;\r\n}\r\n.chat-body .message-box .message-box__item.outgoing {\r\n  text-align: right;\r\n}\r\n.chat-body .message-box .message-box__item.outgoing .time {\r\n  left: 0;\r\n}\r\n.chat-body .message-box .message-box__item .name {\r\n  color: #535357;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n}\r\n.chat-body .message-box .message-box__item .bot-text {\r\n  background: #f4f3f6 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #535357;\r\n  border-radius: 7px;\r\n  max-width: 61%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  position: relative;\r\n  /* margin-bottom: 20px; */\r\n}\r\n\r\n.chat-body .message-box .message-box__item .user-text {\r\n  background: #0056ff 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #ffffff;\r\n  border-radius: 7px;\r\n  max-width: 62%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  position: relative;\r\n  /* margin-bottom: 20px; */\r\n}\r\n\r\n.chat-body .message-form {\r\n  height: 75px;\r\n  border-top: 1px solid #e0e2e4;\r\n  padding: 20px 15px;\r\n}\r\n.chat-body .message-form input {\r\n  width: calc(100% - 50px);\r\n  border: none;\r\n  font-size: 16px;\r\n  margin-top: 5px;\r\n}\r\n.chat-body .message-form img {\r\n  float: right;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* SPINNER */\r\n\r\n.spinner {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  width: 45px;\r\n  height: 9px;\r\n  margin-left: -22px;\r\n  margin-top: -13px;\r\n  text-align: center;\r\n}\r\n\r\n.spinner > div {\r\n  width: 9px;\r\n  height: 9px;\r\n  background-color: #dcdcdc;\r\n  border-radius: 100%;\r\n  display: inline-block;\r\n  -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\r\n  animation: bouncedelay 1400ms ease-in-out infinite;\r\n  /* Prevent first frame from flickering when animation starts */\r\n  -webkit-animation-fill-mode: both;\r\n  animation-fill-mode: both;\r\n}\r\n\r\n.spinner .bounce1 {\r\n  -webkit-animation-delay: -0.32s;\r\n  animation-delay: -0.32s;\r\n}\r\n\r\n.spinner .bounce2 {\r\n  -webkit-animation-delay: -0.16s;\r\n  animation-delay: -0.16s;\r\n}\r\n\r\n@-webkit-keyframes bouncedelay {\r\n  0%,\r\n  80%,\r\n  100% {\r\n    transform: scale(0);\r\n    -webkit-transform: scale(0);\r\n  }\r\n  40% {\r\n    transform: scale(1);\r\n    -webkit-transform: scale(1);\r\n  }\r\n}\r\n@keyframes bouncedelay {\r\n  0%,\r\n  80%,\r\n  100% {\r\n    transform: scale(0);\r\n    -webkit-transform: scale(0);\r\n  }\r\n  40% {\r\n    transform: scale(1);\r\n    -webkit-transform: scale(1);\r\n  }\r\n}\r\n#container {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  display: -ms-flexbox;\r\n  justify-content: space-around;\r\n  -webkit-justify-content: space-around;\r\n  align-items: center;\r\n  -webkit-align-items: center;\r\n}\r\n\r\n#loading-bubble {\r\n  display: flex;\r\n  display: -ms-flexbox;\r\n  justify-content: center;\r\n  -webkit-justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  background: #f4f3f6 0% 0% no-repeat padding-box;\r\n  display: inline-block;\r\n  padding: 20px 15px;\r\n  /* padding-right: 50px; */\r\n  font-size: 15px;\r\n  color: #535357;\r\n  border-radius: 7px;\r\n  max-width: 55%;\r\n  margin-top: 3px;\r\n  text-align: left;\r\n  -webkit-animation: message-bounce 2.5s infinite ease-in-out;\r\n  animation: message-bounce 2.5s ease-in-out infinite;\r\n  -webkit-animation-fill-mode: both;\r\n  animation-fill-mode: both;\r\n}\r\n#loading-bubble.grey {\r\n  background-color: #a5b0b5;\r\n}\r\n\r\n#loading-bubble .spinner {\r\n  position: static !important;\r\n  margin-top: -11px;\r\n  margin-left: 0px;\r\n}\r\n#loading-bubble .spinner div {\r\n  background-color: #2e66bd;\r\n}\r\n\r\n@-webkit-keyframes message-bounce {\r\n  0% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n    -webkit-transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n}\r\n\r\n@keyframes message-bounce {\r\n  0% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n    -webkit-transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(0.9);\r\n    -webkit-transform: scale(0.9);\r\n  }\r\n}\r\n\r\n.join-message {\r\n  background-color: green;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  margin: 10px;\r\n  max-width: 80%;\r\n}\r\n\r\n.just-joined {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n}\r\n\r\n.line-loader {\r\n  height: 4px;\r\n  background-color: #ccc;\r\n  position: relative;\r\n}\r\n\r\n.line-loader:before {\r\n  content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: #007aff;\r\n  animation: line-loader 5s linear;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes line-loader {\r\n  from {\r\n    width: 0%;\r\n  }\r\n  to {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.loading-div {\r\n  position: absolute;\r\n  /* top: 0; */\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(255, 255, 255, 0.7);\r\n  z-index: 1000;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.loading-div::after {\r\n  content: \"\";\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 3px solid #ccc;\r\n  border-top-color: #333;\r\n  border-radius: 50%;\r\n  animation: spin 1s ease-in-out infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.recordingIcon {\r\n  width: 25px;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./feedBack.vue?vue&type=template&id=7a35190a&scoped=true\"\nimport script from \"./feedBack.vue?vue&type=script&lang=js\"\nexport * from \"./feedBack.vue?vue&type=script&lang=js\"\n\nimport \"./feedBack.vue?vue&type=style&index=0&id=7a35190a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a35190a\"]])\n\nexport default __exports__","<template>\r\n  <div :aria-valuetext=\"message.saved\" v-if=\"!message.saved\">\r\n    <div\r\n      v-for=\"(input, index) in message.inputs\"\r\n      :key=\"index\"\r\n      class=\"input-div\"\r\n    >\r\n      <div class=\"input-placeholder\">\r\n        {{ capitalizeName(input.placeholder) }} {{ message.saved }}\r\n      </div>\r\n      <div class=\"input-container\">\r\n        <form @submit.prevent=\"handleInputSubmit(input, index)\">\r\n          <input\r\n            required\r\n            :type=\"input.type\"\r\n            autocomplete=\"off\"\r\n            :aria-label=\"input.placeholder\"\r\n            :ref=\"`inputField_${input.placeholder}_${index}`\"\r\n          />\r\n          <button v-if=\"input\" type=\"submit\" aria-label=\"Submit\" tabindex=\"0\">\r\n            <span aria-hidden=\"true\" class=\"\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n              >\r\n                <path\r\n                  d=\"M5.42773 4.70898C5.46387 4.85254 5.53809 4.98828 5.65039 5.10059L8.54932 8L5.64893 10.9004C5.31689 11.2324 5.31689 11.7705 5.64893 12.1025C5.98096 12.4336 6.51904 12.4336 6.85107 12.1025L10.3516 8.60059C10.5591 8.39355 10.6367 8.10449 10.585 7.83691C10.5537 7.67578 10.4761 7.52246 10.3516 7.39844L6.85254 3.89941C6.52051 3.56738 5.98242 3.56738 5.65039 3.89941C5.43066 4.11816 5.35645 4.42871 5.42773 4.70898Z\"\r\n                  fill=\"#ffffff\"\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div :aria-valuetext=\"message.saved\" v-else>\r\n    <div :key=\"index\" class=\"input-div\">\r\n      <div class=\"input-placeholder\">\r\n        {{ capitalizeName(message.placeholder) }}\r\n      </div>\r\n      <div class=\"input-container\">\r\n        <input\r\n          disabled\r\n          required\r\n          :type=\"message.type\"\r\n          autocomplete=\"off\"\r\n          :value=\"message.value\"\r\n          :aria-label=\"message.placeholder\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"message\"],\r\n  methods: {\r\n    async handleInputSubmit(msg, index) {\r\n      const inputValue = event.target.elements[0].value.trim();\r\n      const value = `My ${msg.placeholder} is: ${inputValue}`;\r\n\r\n      this.$emit(\"handleInputSubmit\", {\r\n        msg: msg,\r\n        inputValue: inputValue,\r\n        value: value,\r\n      });\r\n    },\r\n    capitalizeName(name) {\r\n      // console.log(name, \"the name\");\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.input-div {\r\n  position: relative;\r\n  padding: 26px 24px 24px;\r\n  margin-left: 45px;\r\n  text-align: left;\r\n  background-color: rgb(255, 255, 255);\r\n  border-radius: 5px;\r\n  color: rgb(0, 0, 0);\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 15px 0px,\r\n    rgba(0, 0, 0, 0.1) 0px 1px 2px 0px,\r\n    rgba(0, 87, 255, 0.5) 0px 2px 0px 0px inset;\r\n}\r\n\r\n.input-div .input-placeholder {\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n  line-height: 20px;\r\n}\r\n\r\n.input-container {\r\n  position: relative;\r\n}\r\n\r\n.input-container input {\r\n  width: 100%;\r\n  height: 40px;\r\n  padding: 11px 40px 11px 16px;\r\n  box-sizing: border-box;\r\n  font-size: 14px;\r\n  box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 3px 0px inset;\r\n  border: 1px solid rgb(225, 225, 225);\r\n  color: rgb(0, 0, 0);\r\n  border-radius: 4px;\r\n  background: rgb(250, 250, 250);\r\n  appearance: none;\r\n}\r\n\r\n.input-container button {\r\n  cursor: pointer;\r\n  z-index: 1;\r\n  position: absolute;\r\n  top: 0px;\r\n  right: 0px;\r\n  bottom: 0px;\r\n  width: 40px;\r\n  border-top-right-radius: 3px;\r\n  border-bottom-right-radius: 3px;\r\n  background-color: rgb(0, 87, 255);\r\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n  user-select: none;\r\n}\r\n</style>\r\n","import { render } from \"./inputFields.vue?vue&type=template&id=6e63086a&scoped=true\"\nimport script from \"./inputFields.vue?vue&type=script&lang=js\"\nexport * from \"./inputFields.vue?vue&type=script&lang=js\"\n\nimport \"./inputFields.vue?vue&type=style&index=0&id=6e63086a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6e63086a\"]])\n\nexport default __exports__","import { render } from \"./testing.vue?vue&type=template&id=6e7b5a1c&scoped=true\"\nimport script from \"./testing.vue?vue&type=script&lang=js\"\nexport * from \"./testing.vue?vue&type=script&lang=js\"\n\nimport \"./testing.vue?vue&type=style&index=0&id=6e7b5a1c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6e7b5a1c\"]])\n\nexport default __exports__","import { render } from \"./chatmaintest.vue?vue&type=template&id=4f457cb2&scoped=true\"\nimport script from \"./chatmaintest.vue?vue&type=script&lang=js\"\nexport * from \"./chatmaintest.vue?vue&type=script&lang=js\"\n\nimport \"./chatmaintest.vue?vue&type=style&index=0&id=4f457cb2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f457cb2\"]])\n\nexport default __exports__","import { render } from \"./testApp.vue?vue&type=template&id=03a5cc49\"\nimport script from \"./testApp.vue?vue&type=script&lang=js\"\nexport * from \"./testApp.vue?vue&type=script&lang=js\"\n\nimport \"./testApp.vue?vue&type=style&index=0&id=03a5cc49&scope=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Styles\nimport '@mdi/font/css/materialdesignicons.css'\nimport 'vuetify/styles'\n\n// Vuetify\nimport { createVuetify } from 'vuetify'\n\nexport default createVuetify(\n  // https://vuetifyjs.com/en/introduction/why-vuetify/#feature-guides\n)\n","import { createApp, defineCustomElement } from \"vue\";\r\n\r\nimport testApp from \"./testApp.vue\";\r\nimport vuetify from \"./plugins/vuetify\";\r\n\r\ncreateApp(testApp).use(vuetify).mount(\"#chatly-app\");\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_widget\"] = self[\"webpackChunkvue_widget\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9023); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","xmlns","viewBox","_createElementVNode","d","_hoisted_4","width","height","fill","_hoisted_7","_createElementBlock","_hoisted_1","_createVNode","_Transition","name","style","$data","_hoisted_2","_createBlock","_component_chatmaintest","checkFirst","$options","onUpdateState","addConversation","updateConversation","removeConversation","getConversationBy","showChat","showPop","stateval","user","unreadMsg","botName","onCreateNewConvo","onUpdateUnreadMsg","onClick","_hoisted_6","_hoisted_3","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","getStorage","StartFirebase","getFirestore","db","createConversationId","async","dbref","collection","val","addDoc","step","agent","then","res","doc","error","setStepConversation","collectRef","updateDoc","console","log","saveChats","message","parentDocRef","subcollectionRef","text","type","isUser","newMessage","createdAt","serverTimestamp","agentNewmessage","lastMsgTime","userNewmessage","getConversation","snap","getDoc","exists","data","getLastChat","queryVal","query","orderBy","limit","parentData","querySnapshot","getDocs","docs","length","lastChatData","updateConvo","getConvoChats","value","orderedSubcollection","forEach","push","readMessage","ref","_component_test","$props","conversationId","onGoBack","onGoBackTo","_hoisted_5","_component_v_list","lines","_hoisted_8","_Fragment","convo","_component_SingleChat","key","_hoisted_9","_hoisted_10","_component_v_btn","getCount","_ctx","_component_v_list_item","title","subtitle","append","_component_v_badge","color","_component_v_divider","inset","dayjs","relativeTime","loaded","props","components","methods","capitalizeName","charAt","toUpperCase","slice","timeAgo","timestamp","now","datetime","toDate","diff","suffix","Math","abs","minutes","floor","hours","days","this","computed","displayAgent","imageSrc","url","__exports__","_hoisted_23","stroke","_hoisted_28","_hoisted_30","_hoisted_36","_hoisted_39","_component_v_icon","start","icon","_component_NewImage","size","index","innerHTML","option","options","for","_hoisted_14","_hoisted_15","_component_inputFields","onHandleInputSubmit","src","alt","_hoisted_21","_hoisted_22","_hoisted_41","_hoisted_26","rows","disabled","onKeyup","onKeydown","placeholder","require","accept","onChange","fileInput","click","_component_feedBack","onGetConversationBy","onUpdateConversation","String","Number","default","mounted","canvas","$refs","context","getContext","fontSize","fontFamily","fillStyle","fillRect","textAlign","textBaseline","font","fillText","getNameInitial","watch","newValue","oldValue","_component_v_form","_component_v_btn_toggle","mandatory","emoji","label","_component_v_tooltip","top","_component_v_text_field","rules","comments","_hoisted_11","_component_ErrorDialog","onDismiss","selectedEmoji","isLoading","emojis","conversationData","JSON","parse","localStorage","getItem","newState","conversations","byId","setItem","stringify","hasOwnProperty","form","validate","ended","comment","reaction","item","$emit","created","tabindex","saved","required","autocomplete","inputs","input","onSubmit","msg","inputValue","event","target","elements","trim","incoming","document","querySelector","outgoing","feedback","socket","automated","loading","showErrorDialog","errorMessage","ip","isTyping","joined","typingMsg","messages","chatTimeout","chatTimeoutDuration","chatStartTime","loaderWidth","intervalIds","showLoader","convoEnded","isBotEnabled","selectedFile","flow","next","auto","recording","mediaRecorder","previewImageUrl","NewImage","feedBack","inputFields","handleFileUpload","files","reader","FileReader","onload","result","readAsDataURL","username","emit","cancelImage","insertNewLine","shiftKey","textarea","startPos","selectionStart","endPos","selectionEnd","currentValue","substring","preventDefault","showFeeback","status","Date","resetChatTimeout","onTyping","setTimeout","checkPrev","object","checkNxt","lastIndex","currentIndex","indexOf","sound","Audio","play","newMessageSound","pop","checkCase","chatToChatbottom","updateMsg","save","first","valueStep","find","obj","isSocketInConversation","element","saveMessage","stopAutomate","sendToBot","scrollTop","scrollHeight","requestAssistance","userId","joinConversation","conversationRoom","isJoined","lastMessage","startChatTimeout","elapsedTime","remainingTime","max","expiredConvId","intervalId","setInterval","remainingPercentage","clearTimeout","clearInterval","getConversationById","savedState","conversation","getConversationIdFromLocalStorage","split","saveConversationId","fetchState","read","expire","isConversationIdExpired","conversationTimestamp","parseInt","twoDaysInMilliseconds","localChatId","$router","iniStartTime","isbot","lastMessageIsBot","sending","imageMessages","filter","messageStrings","map","allMessageText","join","inputText","response","axios","method","prompt","messageEndsWithGoodbye","statement","goodbyeKeywords","patterns","keyword","toLowerCase","includes","pattern","test","renderMessage","linkRegex","isLink","replace","convoinfo","logivVal","recordingAudio","navigator","mediaDevices","getUserMedia","audio","stream","MediaRecorder","chunks","addEventListener","blob","Blob","author","requestMicrophonePermission","mediaStream","startRecording","catch","permissions","permissionStatus","state","getTracks","track","stop","stopRecording","playVoiceMessage","playButton","createElement","textContent","onclick","io","on","iniChat","beforeUnmount","off","handler","newMessages","deep","to","from","immediate","socketMainpage","chatActive","showingConvo","SingleChat","show","convoId","page","init","$forceUpdate","updateUnreadMsg","handleNewMessage","conversationIndex","findIndex","c","splice","lastMsg","Timestamp","conversationsById","lastIdKey","Object","keys","lastConversation","values","lastConversationEnded","chatId","valuesArray","reversedArray","reverse","firstThree","i","convoInfo","getAllInfo","appState","sortedConversations","sort","a","b","seconds","activeConversations","endedConversations","endedCount","reduce","count","chatmaintest","toggleChat","toggle","updateState","statecheck","role","locale","hasConversations","removedConversation","remainingConversations","userIdCookie","fetch","x","json","params","get_creat_user","render","createVuetify","createApp","testApp","use","vuetify","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","prop","prototype","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}