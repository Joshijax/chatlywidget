{"version":3,"file":"js/app.js","mappings":"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","sources":["webpack://vue-widget/./src/testApp.vue","webpack://vue-widget/./src/utils/firebaseDb.js","webpack://vue-widget/./src/utils/firbase_utils.js","webpack://vue-widget/./src/views/test/chatmaintest.vue","webpack://vue-widget/./src/components/test/singleChat.vue","webpack://vue-widget/./src/components/test/singleChat.vue?2f03","webpack://vue-widget/./src/views/test/testing.vue","webpack://vue-widget/./src/components/NewImage.vue","webpack://vue-widget/./src/components/NewImage.vue?d6b8","webpack://vue-widget/./src/components/test/feedBack.vue","webpack://vue-widget/./src/components/test/feedBack.vue?8cc5","webpack://vue-widget/./src/components/chatComp/inputFields.vue","webpack://vue-widget/./src/components/chatComp/inputFields.vue?010e","webpack://vue-widget/./src/utils/intentManager.js","webpack://vue-widget/./src/components/chatComp/inputGroup.vue","webpack://vue-widget/./src/components/chatComp/inputGroup.vue?8d13","webpack://vue-widget/./src/views/test/testing.vue?5def","webpack://vue-widget/./src/views/test/chatmaintest.vue?e000","webpack://vue-widget/./src/testApp.vue?efb9","webpack://vue-widget/./src/plugins/vuetify.js","webpack://vue-widget/./src/main.js","webpack://vue-widget/webpack/bootstrap","webpack://vue-widget/webpack/runtime/chunk loaded","webpack://vue-widget/webpack/runtime/compat get default export","webpack://vue-widget/webpack/runtime/define property getters","webpack://vue-widget/webpack/runtime/global","webpack://vue-widget/webpack/runtime/hasOwnProperty shorthand","webpack://vue-widget/webpack/runtime/make namespace object","webpack://vue-widget/webpack/runtime/publicPath","webpack://vue-widget/webpack/runtime/jsonp chunk loading","webpack://vue-widget/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"chat_123876\">\r\n    <transition name=\"bounce\">\r\n      <div\r\n        :style=\"[\r\n          showPop\r\n            ? 'border: 1px solid rgb(242, 242, 242); box-shadow: 6px 2px 15px 5px rgba(0, 0, 0, 0.1);'\r\n            : '',\r\n        ]\"\r\n      >\r\n        <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n        <chatmaintest\r\n          :checkFirst=\"checkFirst\"\r\n          @updateState=\"updateState\"\r\n          :addConversation=\"addConversation\"\r\n          :updateConversation=\"updateConversation\"\r\n          :removeConversation=\"removeConversation\"\r\n          :getConversationBy=\"getConversationBy\"\r\n          :showChat=\"showChat\"\r\n          :showPop=\"showPop\"\r\n          :stateval=\"stateval\"\r\n          :user=\"user\"\r\n          :unreadMsg=\"unreadMsg\"\r\n          :botName=\"botName\"\r\n          @createNewConvo=\"createNewConvo\"\r\n          @updateUnreadMsg=\"updateUnreadMsg\"\r\n          v-if=\"showPop\"\r\n        />\r\n      </div>\r\n    </transition>\r\n\r\n    <div class=\"chat-icon\" @click=\"toggleChat()\">\r\n      <transition name=\"bounce\">\r\n        <svg\r\n          v-if=\"!showPop\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 512 512\"\r\n        >\r\n          <path\r\n            d=\"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z\"\r\n          />\r\n        </svg>\r\n\r\n        <svg\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          v-else\r\n        >\r\n          <path\r\n            fill-rule=\"evenodd\"\r\n            clip-rule=\"evenodd\"\r\n            d=\"M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z\"\r\n            fill=\"white\"\r\n          ></path>\r\n        </svg>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createConversationId, getLastChat } from \"@/utils/firbase_utils\";\r\nimport chatmaintest from \"./views/test/chatmaintest.vue\";\r\nimport style from \"@/assets/css/main.css\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      showChat: false,\r\n      showPop: false,\r\n      user: \"\",\r\n      ip: \"\",\r\n      stateval: {},\r\n      unreadMsg: 0,\r\n      botName: \"Alex\",\r\n      isLoading: false,\r\n    };\r\n  },\r\n  components: { chatmaintest },\r\n\r\n  methods: {\r\n    updateUnreadMsg(value) {\r\n      this.unreadMsg = this.unreadMsg + value;\r\n      //   console.log(value, \"updating unread messge\", this.unreadMsg);\r\n    },\r\n    toggleChat() {\r\n      this.showPop = !this.showPop;\r\n      const newState = {\r\n        ...this.stateval,\r\n        state: {\r\n          ...this.stateval.state,\r\n          toggle: this.showPop,\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n\r\n    async checkFirst() {\r\n      let statecheck = localStorage.getItem(\"appState\");\r\n      if (statecheck === null) {\r\n        let data = {\r\n          user: {\r\n            role: \"lead\",\r\n            locale: \"en\",\r\n            hasConversations: true,\r\n          },\r\n          conversations: {\r\n            byId: {},\r\n          },\r\n          state: {\r\n            page: {\r\n              name: \"home\",\r\n              id: null,\r\n            },\r\n            toggle: false,\r\n          },\r\n        };\r\n        localStorage.setItem(\"appState\", JSON.stringify(data));\r\n      }\r\n    },\r\n    async updateState(newState) {\r\n      this.stateval = newState;\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n    addConversation(conversationId, conversationData) {\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: {\r\n            ...this.stateval.conversations.byId,\r\n            [conversationId]: conversationData,\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n    updateConversation(conversationId, conversationData) {\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: {\r\n            ...this.stateval.conversations.byId,\r\n            [conversationId]: {\r\n              ...this.stateval.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n    removeConversation(conversationId) {\r\n      const {\r\n        [conversationId]: removedConversation,\r\n        ...remainingConversations\r\n      } = this.stateval.conversations.byId;\r\n      const newState = {\r\n        ...this.stateval,\r\n        conversations: {\r\n          ...this.stateval.conversations,\r\n          byId: remainingConversations,\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    },\r\n\r\n    async get_creat_user() {\r\n      // Check if we have a user ID cookie\r\n      // this.setCookie(\"userId\", \"10511221794\", 7)\r\n      // const userIdCookie = await this.getCookie(\"userId\");\r\n\r\n      const userIdCookie = localStorage.getItem(\"userId\");\r\n\r\n      // console.log(userIdCookie, \"okay the this\");\r\n\r\n      if (userIdCookie) {\r\n        // If we have a user ID cookie, use that\r\n        this.user = userIdCookie;\r\n      } else {\r\n        // Otherwise, fetch the user's IP address and create a new user ID\r\n        await fetch(\"https://api.ipify.org?format=json\")\r\n          .then((x) => x.json())\r\n          .then(({ ip }) => {\r\n            this.user = ip.split(\".\").join(\"\");\r\n            this.ip = ip;\r\n          });\r\n\r\n        // Set the new user ID as a cookie\r\n        // Cookies.set(\"userId\", this.user, { expires: 365 });\r\n        localStorage.setItem(\"userId\", this.user);\r\n      }\r\n\r\n      // console.log(this.ip, this.user, \"hellooooooooo\");\r\n    },\r\n\r\n    async saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n        ended: false,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    async createNewConvo() {\r\n      this.isLoading = true;\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const lastIdKey = Object.keys(conversationsById).pop();\r\n\r\n      const lastConversation = Object.values(conversationsById).pop();\r\n      const lastConversationEnded = lastConversation\r\n        ? lastConversation.ended\r\n        : true;\r\n      //   console.log(\r\n      //     \"Last conversation ended:\",\r\n      //     lastConversationEnded,\r\n      //     lastConversation,\r\n      //     lastIdKey\r\n      //   );\r\n\r\n      if (lastConversationEnded) {\r\n        this.isLoading = true;\r\n        let chatId = await createConversationId(this.user);\r\n        // console.log(chatId);\r\n        await this.saveConversationId(chatId);\r\n        this.isLoading = false;\r\n        this.$router.push({\r\n          name: \"conversation\",\r\n          params: { id: chatId },\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          name: \"conversation\",\r\n          params: { id: lastIdKey },\r\n        });\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    this.checkFirst();\r\n\r\n    const savedState =\r\n      JSON.parse(localStorage.getItem(\"appState\")) || this.stateval;\r\n    await this.updateState(savedState);\r\n\r\n    this.removeConversation(\"undefined\");\r\n\r\n    // this.addConversation(\"ei6I4cTFfnyA6KeiQXck\", {\r\n    //   fetchState: \"partial\",\r\n    //   read: true,\r\n    //   expire: 1679263135957,\r\n    // });\r\n  },\r\n\r\n  async created() {\r\n    await this.checkFirst();\r\n    await this.get_creat_user();\r\n    const appState = JSON.parse(localStorage.getItem(\"appState\"));\r\n    // console.log(\"Created...\", appState.router.location.name);\r\n    if (appState && appState.hasOwnProperty(\"state\")) {\r\n      this.showPop = appState.state.toggle;\r\n    } else {\r\n      const newState = {\r\n        ...appState,\r\n        state: {\r\n          toggle: false,\r\n          page: {\r\n            name: \"home\",\r\n            id: null,\r\n          },\r\n        },\r\n      };\r\n      this.updateState(newState);\r\n    }\r\n  },\r\n};\r\n</script>\r\n","import { initializeApp } from \"firebase/app\";\r\n\r\nimport { getFirestore, Timestamp } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCkr7FFrAeCGR1GRo_cUNPyFf5kz8Zm9Ho\",\r\n  authDomain: \"chatly-9e73d.firebaseapp.com\",\r\n  projectId: \"chatly-9e73d\",\r\n  storageBucket: \"chatly-9e73d.appspot.com\",\r\n  messagingSenderId: \"692360901272\",\r\n  appId: \"1:692360901272:web:f2e46455a122ed050216ed\",\r\n  measurementId: \"G-DN2SKEJYP6\",\r\n  storageBucket: \"\",\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nconst storage = getStorage(app);\r\n\r\nfunction StartFirebase() {\r\n  return getFirestore(app);\r\n}\r\n\r\nexport { StartFirebase, storage };\r\n","import { StartFirebase, storage } from \"./firebaseDb\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  getDoc,\r\n  doc,\r\n  query,\r\n  where,\r\n  addDoc,\r\n  serverTimestamp,\r\n  orderBy,\r\n  updateDoc,\r\n  limit,\r\n} from \"firebase/firestore\";\r\nconst db = StartFirebase();\r\n\r\nconst createConversationId = async (user) => {\r\n  const dbref = collection(db, \"conversation\");\r\n  let val = \"\";\r\n  try {\r\n    const docRef = await addDoc(dbref, { step: 0, user: user, agent: \"\" }).then(\r\n      async (res) => {\r\n        // console.log(res, \"this is the resspin\");\r\n        // console.log(\"Document written with ID: \", res.id);\r\n        val = res.id;\r\n        const conversationDocRef = doc(db, \"conversation\", val);\r\n      }\r\n    );\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n  return val;\r\n};\r\n\r\nconst getStepConversation = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    console.log(snap.data(), \"steppsss\");\r\n    return snap.data().step;\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst getConversationAgent = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    return snap.data().agent;\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst setStepConversation = async (id, step) => {\r\n  const collectRef = collection(db, \"conversation\");\r\n  try {\r\n    await updateDoc(doc(collectRef, id), { step: step });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst updateConversationAgent = async (id, agent) => {\r\n  const collectRef = collection(db, \"conversation\");\r\n  try {\r\n    await updateDoc(doc(collectRef, id), { agent: agent });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst saveChats = async (message, id) => {\r\n  console.log(message, id, \"trying to save\");\r\n\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  const { text, type, user, isUser } = message;\r\n\r\n  const newMessage = {\r\n    ...message,\r\n    createdAt: serverTimestamp(),\r\n  };\r\n\r\n  // Add a new document to the sub-collection with the current timestamp\r\n  await addDoc(subcollectionRef, newMessage).then(async (res) => {\r\n    console.log(\"Document written with ID: \", res.id);\r\n\r\n    // Update the conversation document to indicate that a new message has been added\r\n    if (isUser) {\r\n      await updateDoc(parentDocRef, {\r\n        agentNewmessage: true,\r\n        lastMsgTime: serverTimestamp(),\r\n      });\r\n      console.log(\"Conversation document updated with agentNewmessage: true\");\r\n    } else {\r\n      await updateDoc(parentDocRef, {\r\n        userNewmessage: true,\r\n        lastMsgTime: serverTimestamp(),\r\n      });\r\n      console.log(\"Conversation document updated with userNewmessage: true\");\r\n    }\r\n  });\r\n};\r\n\r\nconst getConversation = async (id) => {\r\n  const snap = await getDoc(doc(db, \"conversation\", id));\r\n\r\n  if (snap.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    return snap.data();\r\n  } else {\r\n    console.log(\"No such document\");\r\n  }\r\n};\r\n\r\nconst getLastChat = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n\r\n  // Create a reference to the sub-collection and order by \"createdAt\" in descending order\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n  const queryVal = query(\r\n    subcollectionRef,\r\n    orderBy(\"createdAt\", \"desc\"),\r\n    limit(1)\r\n  );\r\n\r\n  let parentData = await getDoc(doc(db, \"conversation\", id));\r\n  if (parentData.exists()) {\r\n    // console.log(snap.data(), \"steppsss\");\r\n    parentData = parentData.data();\r\n  }\r\n  // Get the first document in the query snapshot\r\n  const querySnapshot = await getDocs(queryVal);\r\n\r\n  // console.log(querySnapshot.docs[0].data(), \"fetch data\");\r\n  if (querySnapshot.docs.length > 0) {\r\n    const lastChatData = querySnapshot.docs[0].data();\r\n    return { lastChatData, parentData };\r\n  } else {\r\n    return { lastChatData: null, parentData };\r\n  }\r\n};\r\n\r\nconst findRefobj = async (table, obj, objval) => {\r\n  // console.log(table, obj, objval);\r\n  const refCollectionRef = collection(db, table);\r\n  const q = query(refCollectionRef, where(obj, \"==\", objval));\r\n  const querySnapshot = await getDocs(q);\r\n  // console.log(\"got here again\", querySnapshot);\r\n  if (querySnapshot.size === 0) {\r\n    // console.log(\"false\");\r\n    return false;\r\n  }\r\n\r\n  // console.log(\"got here again\");\r\n\r\n  // console.log(\"size\", querySnapshot.docs[0].data());\r\n\r\n  let valdata = querySnapshot.docs[0].data();\r\n  let value = {\r\n    wallet: valdata.wallet,\r\n    ref_code: valdata.ref_code,\r\n  };\r\n\r\n  // console.log(value, \"value\");\r\n\r\n  return valdata;\r\n};\r\n\r\nconst updateConvo = async (id, data) => {\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  await updateDoc(parentDocRef, data);\r\n};\r\n\r\nconst getConvoChats = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  // console.log(\"convo ID\", id);\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n  const value = [];\r\n\r\n  // Create a reference to the sub-collection\r\n  // const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  // Create a reference to the sub-collection and order by \"createdAt\" in descending order\r\n  const subcollectionRef = collection(parentDocRef, \"chat\");\r\n\r\n  const orderedSubcollection = query(\r\n    subcollectionRef,\r\n    orderBy(\"createdAt\", \"asc\")\r\n  );\r\n\r\n  await updateDoc(parentDocRef, { userNewmessage: false });\r\n\r\n  // Get the documents in the sub-collection ordered by \"createdAt\"\r\n  const querySnapshot = await getDocs(orderedSubcollection);\r\n\r\n  // console.log(\"docs\", querySnapshot);\r\n\r\n  // Iterate over the documents in the query snapshot\r\n  querySnapshot.forEach((doc) => {\r\n    // console.log(doc.id, \" => \", doc.data());\r\n    value.push(doc.data());\r\n  });\r\n\r\n  return value;\r\n};\r\n\r\nconst readMessage = async (id) => {\r\n  // Create a reference to the parent document that contains the sub-collection\r\n  // console.log(\"convo ID\", id);\r\n  const parentDocRef = doc(db, \"conversation\", id);\r\n\r\n  await updateDoc(parentDocRef, { userNewmessage: false });\r\n};\r\n\r\nexport {\r\n  setStepConversation,\r\n  createConversationId,\r\n  saveChats,\r\n  getConvoChats,\r\n  getStepConversation,\r\n  getLastChat,\r\n  updateConversationAgent,\r\n  getConversationAgent,\r\n  findRefobj,\r\n  readMessage,\r\n  getConversation,\r\n  updateConvo,\r\n};\r\n","<template>\r\n  <div>\r\n    <div v-if=\"!showingConvo\">\r\n      <div id=\"chatview\">\r\n        <transition name=\"bounce\">\r\n          <div class=\"chat-container\">\r\n            <div class=\"chat-header\">\r\n              <h3 class=\"h1-chatly1345\">Arthian</h3>\r\n              <!-- <i class=\"fa fa-times\" @click=\"showPop = false\"></i> -->\r\n            </div>\r\n            <div ref=\"chatbody\" class=\"chat-body\" id=\"chat-body\">\r\n              <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n              <!-- Line loader for chat timeout -->\r\n              <!-- <div class=\"line-loader\" :style=\"{ width: loaderWidth + '%' }\"></div> -->\r\n              <div class=\"message-box\">\r\n                <v-list\r\n                  v-if=\"activeConversations.length > 0\"\r\n                  item-props\r\n                  lines=\"two\"\r\n                >\r\n                  <h3 class=\"h1-chatly1345\">Current conversation</h3>\r\n                  <SingleChat\r\n                    :convo=\"convo\"\r\n                    v-for=\"convo in activeConversations\"\r\n                    :key=\"convo.text\"\r\n                    :agent=\"convo.agent\"\r\n                    :user=\"user\"\r\n                    @updateUnreadMsg=\"updateUnreadMsg\"\r\n                    class=\"chat-transition\"\r\n                    @click=\"show(convo.conversationId)\"\r\n                  />\r\n                </v-list>\r\n                <v-list\r\n                  v-if=\"endedConversations.length > 0\"\r\n                  item-props\r\n                  lines=\"two\"\r\n                >\r\n                  <h3>Previous Closed Conversations</h3>\r\n                  <SingleChat\r\n                    :convo=\"convo\"\r\n                    v-for=\"convo in endedConversations\"\r\n                    :key=\"convo.text\"\r\n                    :agent=\"convo.agent\"\r\n                    :user=\"user\"\r\n                    @updateUnreadMsg=\"updateUnreadMsg\"\r\n                    class=\"chat-transition\"\r\n                    @click=\"show(convo.conversationId)\"\r\n                  />\r\n                </v-list>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"chat-footer\">\r\n              <v-btn\r\n                @click=\"createNewConvo\"\r\n                class=\"start\"\r\n                :aria-details=\"getCount\"\r\n                getCount\r\n                v-if=\"!getCount && !isLoading\"\r\n              >\r\n                Start Conversation\r\n              </v-btn>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n    <test\r\n      :botName=\"botName\"\r\n      :user=\"user\"\r\n      :conversationId=\"conversationId\"\r\n      @goBack=\"goBack\"\r\n      @goBackTo=\"goBackTo\"\r\n      @createNewConvo=\"createNewConvo\"\r\n      v-else\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SingleChat from \"../../components/test/singleChat.vue\";\r\nimport { createConversationId, getLastChat } from \"@/utils/firbase_utils\";\r\nimport io from \"socket.io-client\";\r\nimport { Timestamp } from \"firebase/firestore\";\r\nimport test from \"./testing.vue\";\r\n// import style from \"\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      socketMainpage: null,\r\n      chatActive: false,\r\n      isLoading: false,\r\n      conversations: [],\r\n      showingConvo: false,\r\n      conversationId: \"\",\r\n      state: null,\r\n    };\r\n  },\r\n  props: [\"showPop\", \"addConversation\", \"user\", \"botName\", \"stateval\"],\r\n  components: {\r\n    SingleChat,\r\n    test,\r\n  },\r\n  methods: {\r\n    show(convoId) {\r\n      this.conversationId = \"\";\r\n      this.conversationId = convoId;\r\n      this.showingConvo = true;\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      this.state = data;\r\n      const newState = {\r\n        ...this.state,\r\n        state: {\r\n          ...this.state.state,\r\n          page: {\r\n            name: \"conversation\",\r\n            id: convoId,\r\n          },\r\n        },\r\n      };\r\n      this.$emit(\"updateState\", newState);\r\n    },\r\n\r\n    async goBack() {\r\n      this.showingConvo = false;\r\n      await this.init();\r\n      this.$forceUpdate();\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      this.state = data;\r\n      const newState = {\r\n        ...this.state,\r\n        state: {\r\n          ...this.state.state,\r\n          page: {\r\n            name: \"home\",\r\n            id: null,\r\n          },\r\n        },\r\n      };\r\n      this.$emit(\"updateState\", newState);\r\n    },\r\n\r\n    async goBackTo() {\r\n      this.showingConvo = false;\r\n      await this.init();\r\n      this.$forceUpdate();\r\n    },\r\n\r\n    updateUnreadMsg() {\r\n      this.$emit(\"updateUnreadMsg\");\r\n    },\r\n\r\n    async saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n        ended: false,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    handleNewMessage(newMessage) {\r\n      //   console.log(newMessage.createdAt, \"time check\");\r\n      const conversationIndex = this.conversations.findIndex(\r\n        (c) => c.conversationId === newMessage.conversationId\r\n      );\r\n      if (conversationIndex > -1) {\r\n        // Update the conversation with the new message text\r\n        const conversation = this.conversations[conversationIndex];\r\n        conversation.text = newMessage.text;\r\n        conversation.userNewmessage = true;\r\n        conversation.createdAt = newMessage.createdAt;\r\n        this.conversations.splice(conversationIndex, 1, conversation);\r\n\r\n        // Move the conversation to the top of the list\r\n      }\r\n    },\r\n\r\n    async getAllInfo(conversation) {\r\n      const result = await getLastChat(conversation);\r\n\r\n      let userNewmessage = (await result.parentData.userNewmessage) || false;\r\n      let lastMsg = await result.lastChatData;\r\n      if (result.lastChatData === null) {\r\n        lastMsg = {\r\n          text: \"hello message\",\r\n          user: \"Bot\",\r\n          createdAt: Timestamp.now(),\r\n        };\r\n      } else if (result.lastChatData.type === \"voice\") {\r\n        lastMsg = {\r\n          text: \"voice Message\",\r\n          user: result.lastChatData.user,\r\n          createdAt: result.lastChatData.createdAt,\r\n        };\r\n      } else if (result.lastChatData.type === \"image\") {\r\n        lastMsg = {\r\n          text: \"Image\",\r\n          user: result.lastChatData.user,\r\n          createdAt: result.lastChatData.createdAt,\r\n        };\r\n      }\r\n      let ended;\r\n      if (result.parentData.hasOwnProperty(\"ended\")) {\r\n        ended = result.parentData.ended;\r\n      } else {\r\n        ended = false;\r\n      }\r\n\r\n      return {\r\n        conversationId: conversation,\r\n        text: lastMsg.text,\r\n        user: lastMsg.user,\r\n        agent: result.parentData.agent,\r\n        ended,\r\n        userNewmessage: userNewmessage,\r\n        createdAt: lastMsg.createdAt,\r\n      };\r\n    },\r\n\r\n    async createNewConvo() {\r\n      console.log(\"click\");\r\n      this.isLoading = true;\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const lastIdKey = Object.keys(conversationsById).pop();\r\n\r\n      const lastConversation = Object.values(conversationsById).pop();\r\n      const lastConversationEnded = lastConversation\r\n        ? lastConversation.ended\r\n        : true;\r\n\r\n      if (lastConversationEnded) {\r\n        this.isLoading = true;\r\n        let chatId = await createConversationId(this.user);\r\n        // console.log(chatId);\r\n        await this.saveConversationId(chatId);\r\n        this.isLoading = false;\r\n        this.show(chatId);\r\n      } else {\r\n        this.show(lastIdKey);\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    isConversationIdExpired() {\r\n      const conversationId = localStorage.getItem(\"conversationId\");\r\n      if (conversationId) {\r\n        const conversationTimestamp = parseInt(conversationId.split(\"-\")[1]);\r\n        const now = Date.now();\r\n        const twoDaysInMilliseconds = 7 * 24 * 60 * 60 * 1000; // 2 days in milliseconds\r\n        return now - conversationTimestamp > twoDaysInMilliseconds;\r\n      }\r\n      return true; // conversation ID not found or invalid\r\n    },\r\n\r\n    async init() {\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\"));\r\n\r\n      const conversationsById = savedState.conversations.byId;\r\n\r\n      const valuesArray = [];\r\n\r\n      for (const id in conversationsById) {\r\n        const obj = { ...conversationsById[id], id };\r\n        valuesArray.push(obj);\r\n      }\r\n\r\n      const reversedArray = valuesArray.reverse(); // reverse the order of the array\r\n\r\n      const firstThree = reversedArray.slice(0, 3); // get the first three elements of the reversed array\r\n\r\n      //   console.log(firstThree, \"data i want\");\r\n\r\n      for (let i = 0; i < firstThree.length; i++) {\r\n        const element = firstThree[i];\r\n        let convoInfo = await this.getAllInfo(element.id);\r\n\r\n        // Check if the conversation already exists in the array\r\n        const index = this.conversations.findIndex(\r\n          (c) => c.conversationId === convoInfo.conversationId\r\n        );\r\n\r\n        // If the conversation exists, update the existing object\r\n        if (index !== -1) {\r\n          this.conversations[index] = convoInfo;\r\n        } else {\r\n          // Otherwise, add the new object to the array\r\n          this.conversations.push(convoInfo);\r\n        }\r\n      }\r\n\r\n      console.log(this.conversations, \"this is fine\");\r\n\r\n      if (firstThree.length > 0) {\r\n        this.socketMainpage.emit(\"join\", {\r\n          id: firstThree[0].id,\r\n          user: this.user,\r\n        });\r\n      }\r\n\r\n      //   console.log(this.conversations, \"data i want\");\r\n\r\n      this.isLoading = false;\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    this.isLoading = true;\r\n    this.socketMainpage = io(\"https://chatlysocket.herokuapp.com/\");\r\n    this.socketMainpage.on(\"connect\", () => {\r\n      //   console.log(\"Connected to server\");\r\n    });\r\n\r\n    this.socketMainpage.on(\"newMessage\", (message) => {\r\n      message.createdAt = Timestamp.now();\r\n      //   console.log(message.conversationId, this.user, \"the new message\");\r\n      this.handleNewMessage(message);\r\n    });\r\n\r\n    const appState = JSON.parse(localStorage.getItem(\"appState\"));\r\n    if (appState) {\r\n      if (appState.state.page.name === \"conversation\") {\r\n        this.conversationId = appState.state.page.id;\r\n        this.showingConvo = true;\r\n      }\r\n    }\r\n\r\n    await this.init();\r\n  },\r\n  computed: {\r\n    sortedConversations() {\r\n      return this.conversations.slice().sort((a, b) => {\r\n        return b.createdAt.seconds - a.createdAt.seconds;\r\n      });\r\n    },\r\n\r\n    activeConversations() {\r\n      return this.conversations.filter((c) => !c.ended);\r\n    },\r\n    endedConversations() {\r\n      return this.conversations.filter((c) => c.ended);\r\n    },\r\n\r\n    getCount() {\r\n      const endedCount = this.conversations.reduce((count, message) => {\r\n        return count + (!message.ended ? 1 : 0);\r\n      }, 0);\r\n      //   console.log(\"computed\", endedCount);\r\n\r\n      return endedCount > 0;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div v-if=\"loaded\">\r\n    <v-list-item\r\n      :title=\"convo.text\"\r\n      :subtitle=\"convo.subtitle\"\r\n      :prepend-avatar=\"imageSrc\"\r\n      append-icon\r\n    >\r\n      <template #append>\r\n        <v-badge color=\"green\" v-if=\"convo.userNewmessage\">\r\n          <!-- <v-icon small>mdi-circle-medium</v-icon> -->\r\n        </v-badge>\r\n      </template>\r\n      <template v-slot:subtitle=\"{}\">\r\n        <span class=\"text-primary\">\r\n          {{\r\n            capitalizeName(\r\n              convo.user === \"bot\"\r\n                ? \"Alex\"\r\n                : convo.user === user\r\n                ? \"you\"\r\n                : agent || \"bot\"\r\n            )\r\n          }}\r\n        </span>\r\n        &mdash; {{ timeAgo(convo.createdAt) }}\r\n      </template>\r\n    </v-list-item>\r\n    <v-divider inset></v-divider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getLastChat } from \"@/utils/firbase_utils\";\r\nimport dayjs from \"dayjs\";\r\nimport relativeTime from \"dayjs/plugin/relativeTime\";\r\n\r\ndayjs.extend(relativeTime);\r\nexport default {\r\n  data: () => ({\r\n    loaded: false,\r\n  }),\r\n  props: [\"convo\", \"agent\", \"user\"],\r\n  components: {},\r\n\r\n  methods: {\r\n    capitalizeName(name) {\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n    timeAgo(timestamp) {\r\n      const now = dayjs();\r\n      const datetime = dayjs(timestamp.toDate());\r\n      let diff = datetime.diff(now, \"second\");\r\n      let suffix = diff > 0 ? \" ago\" : \" ago\";\r\n      diff = Math.abs(diff);\r\n\r\n      if (diff < 60) {\r\n        return `Just now`;\r\n      } else if (diff < 3600) {\r\n        let minutes = Math.floor(diff / 60);\r\n        return `${minutes} ${minutes > 1 ? \"minutes\" : \"minute\"}${suffix}`;\r\n      } else if (diff < 86400) {\r\n        let hours = Math.floor(diff / 3600);\r\n        return `${hours} ${hours > 1 ? \"hours\" : \"hour\"}${suffix}`;\r\n      } else {\r\n        let days = Math.floor(diff / 86400);\r\n        return `${days} ${days > 1 ? \"days\" : \"day\"}${suffix}`;\r\n      }\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    console.log(this.convo, \"the convovov\");\r\n    this.loaded = true;\r\n  },\r\n  computed: {\r\n    displayAgent() {\r\n      // let theUser = this.agent || \"bot\";\r\n      // if (this.convo.user === \"bot\") {\r\n      //   theUser = this.convo.user;\r\n      // }\r\n      return this.convo.user === \"bot\" ? \"Alex\" : this.agent || \"bot\";\r\n    },\r\n\r\n    imageSrc() {\r\n      // console.log(this.displayAgent, \"the agent \");\r\n      const url = `https://ui-avatars.com/api/?name=${this.displayAgent}&size=40&background=%23ccc&color=fff&color=fff&rounded=true&font-size=0.5`;\r\n      return url;\r\n    },\r\n\r\n    // ...other computed properties\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./singleChat.vue?vue&type=template&id=06be367d\"\nimport script from \"./singleChat.vue?vue&type=script&lang=js\"\nexport * from \"./singleChat.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div v-show=\"!feedback\" id=\"chatview\">\r\n      <transition name=\"bounce\">\r\n        <div class=\"chat-container\">\r\n          <div class=\"chat-header\">\r\n            <img\r\n              @click=\"$emit('goBack')\"\r\n              width=\"32\"\r\n              height=\"32\"\r\n              style=\"cursor: pointer\"\r\n              src=\"https://img.icons8.com/windows/32/ffffff/long-arrow-left.png\"\r\n              alt=\"long-arrow-left\"\r\n            />\r\n            <h3 class=\"h1-chatly1345\">Arthian {{ agent }}</h3>\r\n            <NewImage v-if=\"agent !== null\" :name=\"botName\" size=\"50\" />\r\n            <img\r\n              v-if=\"!ended && ended !== null\"\r\n              @click=\"showFeeback\"\r\n              width=\"40\"\r\n              height=\"40\"\r\n              src=\"https://img.icons8.com/ios/50/ffffff/delete-sign.png\"\r\n              alt=\"delete-sign\"\r\n            />\r\n          </div>\r\n          <div\r\n            v-if=\"showLoader\"\r\n            class=\"line-loader\"\r\n            :style=\"{ width: loaderWidth + '%' }\"\r\n          ></div>\r\n          <div ref=\"chatbody\" class=\"chat-body\" id=\"chat-body\">\r\n            <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n            <!-- Line loader for chat timeout -->\r\n            <!-- <div class=\"line-loader\" :style=\"{ width: loaderWidth + '%' }\"></div> -->\r\n\r\n            <div class=\"message-box\">\r\n              <div\r\n                v-for=\"(message, index) in messages\"\r\n                :key=\"index\"\r\n                :value=\"user\"\r\n                :style=\"[\r\n                  !checkNxt(message, index) ? 'margin-bottom: 6px;' : '',\r\n                ]\"\r\n                :class=\"[\r\n                  message.user === user\r\n                    ? 'message-box__item outgoing'\r\n                    : message.user === 'user'\r\n                    ? 'message-box__item outgoing'\r\n                    : 'message-box__item incoming',\r\n                ]\"\r\n              >\r\n                <div v-if=\"message.type === 'text'\">\r\n                  <div v-show=\"checkPrev(message, index)\" class=\"name\">\r\n                    <NewImage\r\n                      v-if=\"message.user !== user\"\r\n                      :name=\"message.user == 'bot' ? botName : message.user\"\r\n                      :size=\"20\"\r\n                    />\r\n                    {{\r\n                      capitalizeName(\r\n                        message.user == \"bot\"\r\n                          ? botName\r\n                          : message.user === user\r\n                          ? \"you\"\r\n                          : message.user\r\n                      )\r\n                    }}\r\n                  </div>\r\n\r\n                  <div\r\n                    :class=\"[\r\n                      message.user === user\r\n                        ? 'user-text'\r\n                        : message.user === 'user'\r\n                        ? 'user-text'\r\n                        : 'bot-text',\r\n                    ]\"\r\n                  >\r\n                    <span v-html=\"renderMessage(message.text)\"></span>\r\n                  </div>\r\n                </div>\r\n                <div v-else-if=\"message.type === 'option'\">\r\n                  <div\r\n                    v-for=\"(options, index) in message.option\"\r\n                    :key=\"index\"\r\n                    style=\"margin-bottom: 5px\"\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      :name=\"`name${index}`\"\r\n                      :value=\"options.text\"\r\n                      :id=\"index\"\r\n                    />\r\n                    <label\r\n                      :for=\"index\"\r\n                      class=\"md-chip md-chip-clickable md-chip-hover\"\r\n                      @click=\"clickSelect(options)\"\r\n                    >\r\n                      {{ options.text }}</label\r\n                    >\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- if user just joined Chat -->\r\n                <div v-if=\"message.type === 'joined'\" class=\"just-joined\">\r\n                  <span class=\"join-message\"\r\n                    >{{ message.text }} Just joined chat</span\r\n                  >\r\n                </div>\r\n\r\n                <!-- if message type is input -->\r\n\r\n                <div v-else-if=\"message.type === 'input'\">\r\n                  <inputFields\r\n                    :message=\"message\"\r\n                    @handleInputSubmit=\"handleInputSubmit\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- if message type is voice -->\r\n                <div v-else-if=\"message.type === 'voice'\">\r\n                  <!-- <audio id=\"audio\" :src=\"message.text\" controls></audio> -->\r\n                  <button @click=\"playVoiceMessage(message)\">\r\n                    Play voice message\r\n                  </button>\r\n                </div>\r\n                <div v-else-if=\"message.type === 'image'\">\r\n                  <img :src=\"message.text\" alt=\"\" width=\"50\" height=\"50\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"orderRequested\" class=\"message-box__item outgoing\">\r\n                <inputGroup @handleOrderRequest=\"handleOrderRequest\" />\r\n              </div>\r\n\r\n              <div style=\"text-align: left; margin-bottom: 15px\">\r\n                <div v-if=\"isTyping || loading\" id=\"loading-bubble\">\r\n                  <div class=\"spinner\">\r\n                    <div class=\"bounce1\"></div>\r\n                    <div class=\"bounce2\"></div>\r\n                    <div class=\"bounce3\"></div>\r\n                  </div>\r\n                  <!-- <div>{{ typingMsg }}</div> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"!ended\">\r\n            <div\r\n              v-if=\"previewImageUrl\"\r\n              style=\"position: relative; width: fit-content\"\r\n            >\r\n              <img\r\n                :src=\"previewImageUrl\"\r\n                style=\"\r\n                  max-width: 100%;\r\n                  max-height: 100px;\r\n                  min-width: 100%;\r\n                  min-height: 100px;\r\n                \"\r\n              />\r\n\r\n              <button\r\n                class=\"css-2chq30\"\r\n                @click=\"cancelImage\"\r\n                style=\"position: absolute; top: 5px; right: -10px\"\r\n              >\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M18 6L6 18M6 6L18 18\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n              <button\r\n                @click.prevent=\"sendImage\"\r\n                style=\"position: absolute; bottom: 5px; right: -10px\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M5 12H19M19 12L12 5M19 12L12 19\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <div\r\n              v-if=\"!automated\"\r\n              class=\"chat-footer\"\r\n              :style=\"[ended ? 'display: block' : '']\"\r\n            >\r\n              <textarea\r\n                rows=\"1\"\r\n                ref=\"message\"\r\n                :disabled=\"automated\"\r\n                v-model=\"newMessage\"\r\n                @keyup.enter=\"sendMessage\"\r\n                @keydown.shift.enter.prevent=\"insertNewLine\"\r\n                @keyup=\"onTyping\"\r\n                type=\"text\"\r\n                placeholder=\"Type a message...\"\r\n                style=\"max-height: calc(3 * (1.5em + 2px))\"\r\n              ></textarea>\r\n              <img\r\n                v-if=\"!recording\"\r\n                :src=\"require('@/assets/mic.png')\"\r\n                @click=\"startRecording\"\r\n                class=\"recordingIcon footIcon\"\r\n              />\r\n              <img\r\n                v-if=\"recording\"\r\n                :src=\"require('@/assets/stop.png')\"\r\n                @click=\"stopRecording\"\r\n                class=\"recordingIcon footIcon\"\r\n              />\r\n\r\n              <input\r\n                ref=\"fileInput\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                @change=\"handleFileUpload\"\r\n                style=\"display: none\"\r\n              />\r\n              <button\r\n                :aria-controls=\"$refs.fileInput\"\r\n                @click=\"$refs.fileInput.click()\"\r\n                aria-label=\"Attach file\"\r\n                class=\"footIcon\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M21.1525 10.8995L12.1369 19.9151C10.0866 21.9653 6.7625 21.9653 4.71225 19.9151C2.662 17.8648 2.662 14.5407 4.71225 12.4904L13.7279 3.47483C15.0947 2.108 17.3108 2.108 18.6776 3.47483C20.0444 4.84167 20.0444 7.05775 18.6776 8.42458L10.0156 17.0866C9.33213 17.7701 8.22409 17.7701 7.54068 17.0866C6.85726 16.4032 6.85726 15.2952 7.54068 14.6118L15.1421 7.01037\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n\r\n              <button\r\n                class=\"footButton\"\r\n                :disabled=\"newMessage === ''\"\r\n                @click=\"sendMessage\"\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M5 12H19M19 12L12 5M19 12L12 19\"\r\n                    stroke=\"currentColor\"\r\n                    stroke-width=\"2\"\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                  ></path>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            v-else\r\n            class=\"chat-footer\"\r\n            :style=\"[ended ? 'display: block' : '']\"\r\n          >\r\n            <div class=\"text\">Your conversation has ended</div>\r\n            <button @click=\"$emit('createNewConvo')\" class=\"start\">\r\n              Start Conversation\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n    <feedBack\r\n      @getConversationBy=\"getConversationBy\"\r\n      @updateConversation=\"updateConversation\"\r\n      v-show=\"feedback\"\r\n      :conversationId=\"conversationId\"\r\n      @goBack=\"feedback = false\"\r\n      @goBackTo=\"$emit('goBackTo')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import incoming from \"../../assets/incoming.mp3\";\r\n// import outgoing from \"../../assets/outgoing.mp3\";\r\nvar incoming = document.querySelector('audio[src$=\"incoming.mp3\"]');\r\nvar outgoing = document.querySelector('audio[src$=\"outgoing.mp3\"]');\r\nimport io from \"socket.io-client\";\r\nimport {\r\n  readMessage,\r\n  getConvoChats,\r\n  saveChats,\r\n  setStepConversation,\r\n  getConversation,\r\n} from \"@/utils/firbase_utils\";\r\n\r\nimport { storage } from \"@/utils/firebaseDb\";\r\n\r\nimport NewImage from \"../../components/NewImage.vue\";\r\nimport feedBack from \"../../components/test/feedBack.vue\";\r\nimport axios from \"axios\";\r\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\r\nimport inputFields from \"@/components/chatComp/inputFields.vue\";\r\nimport classifyIntent from \"@/utils/intentManager\";\r\nimport inputGroup from \"@/components/chatComp/inputGroup.vue\";\r\n\r\nexport default {\r\n  name: \"chatView\",\r\n  data() {\r\n    return {\r\n      feedback: false,\r\n      socket: null,\r\n      automated: true,\r\n      loading: false,\r\n      showErrorDialog: true,\r\n      isLoading: false,\r\n      errorMessage: \"Error Message\",\r\n      showChat: false,\r\n      agent: null,\r\n      orderRequested: false,\r\n      ip: \"\",\r\n      newMessage: \"\",\r\n      // conversationId: \"\",\r\n      isTyping: false,\r\n      joined: false,\r\n      typingMsg: \"\",\r\n      step: 0,\r\n      messages: [],\r\n      chatTimeout: null,\r\n      chatTimeoutDuration: 300000, // 5 minutes\r\n      chatStartTime: null,\r\n      loaderWidth: 0,\r\n      intervalIds: [],\r\n      showLoader: false,\r\n      convoEnded: false,\r\n      isBotEnabled: true,\r\n      ended: null,\r\n      selectedFile: null,\r\n      trackOrderMsg: {\r\n        text: \"Sure we can helo with that <br> Please can we know this: \",\r\n        user: \"bot\",\r\n        type: \"text\",\r\n      },\r\n      flow: [\r\n        {\r\n          step: 0,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Hi! I'm glad to assist you today. Let's know each other:\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              text: \"Do you have an order already?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 1.01,\r\n                  text: \"Yes\",\r\n                },\r\n                {\r\n                  id: 2,\r\n                  text: \"No\",\r\n                },\r\n              ],\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.01,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Please can we know this: \",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              inputs: [\r\n                {\r\n                  id: 1.02,\r\n                  type: \"email\",\r\n                  placeholder: \"email address\",\r\n                },\r\n              ],\r\n\r\n              type: \"input\",\r\n            },\r\n          ],\r\n        },\r\n\r\n        {\r\n          step: 1.02,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              user: \"user\",\r\n              inputs: [\r\n                {\r\n                  id: 1,\r\n                  type: \"number\",\r\n                  placeholder: \"Order Id\",\r\n                },\r\n              ],\r\n\r\n              type: \"input\",\r\n            },\r\n          ],\r\n        },\r\n\r\n        {\r\n          step: 1,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"Please select what you want to do with the order\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 1.1,\r\n                  text: \"i want to make a return/swap\",\r\n                },\r\n                {\r\n                  id: 1.2,\r\n                  text: \"I want to know the order status\",\r\n                },\r\n                {\r\n                  id: 1.3,\r\n                  text: \"Others\",\r\n                },\r\n              ],\r\n\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.1,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can easly Return or swap an order here: <a href='https://site.com/return' target='_blank'>https://site.com/return</a> \",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.2,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can track your order here: <a href='https://site.com/tracking' target='_blank'>https://site.com/tracking</a>\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 1.3,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"Tell us how else can we help?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2,\r\n          next: true,\r\n          auto: true,\r\n          messages: [\r\n            {\r\n              text: \"What would you like to do?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n            {\r\n              user: \"user\",\r\n              option: [\r\n                {\r\n                  id: 2.1,\r\n                  text: \"Place a new order\",\r\n                },\r\n                {\r\n                  id: 2.2,\r\n                  text: \"I have a question\",\r\n                },\r\n                {\r\n                  id: 2.3,\r\n                  text: \"Others\",\r\n                },\r\n              ],\r\n              type: \"option\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.1,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"What products do you want?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.2,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"You can ask any question, we are here for you\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          step: 2.3,\r\n          next: \"end\",\r\n          auto: false,\r\n          messages: [\r\n            {\r\n              text: \"What other thing do you want us to do for you?\",\r\n              user: \"bot\",\r\n              type: \"text\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      newMessage: \"\",\r\n      recording: false,\r\n      mediaRecorder: null,\r\n      previewImageUrl: null,\r\n    };\r\n  },\r\n  components: {\r\n    NewImage,\r\n    feedBack,\r\n    inputFields,\r\n    inputGroup,\r\n  },\r\n  props: [\r\n    \"addConversation\",\r\n    \"user\",\r\n    \"updateConversation\",\r\n    \"getConversationBy\",\r\n    \"botName\",\r\n    \"createNewConvo\",\r\n    \"conversationId\",\r\n  ],\r\n  methods: {\r\n    handleFileUpload(event) {\r\n      this.selectedFile = event.target.files[0];\r\n      // Create a data URL for the selected image and set it as the preview image\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        this.previewImageUrl = event.target.result;\r\n      };\r\n      reader.readAsDataURL(this.selectedFile);\r\n    },\r\n\r\n    async sendImage() {\r\n      const message = {\r\n        conversationId: this.conversationId,\r\n        username: this.user,\r\n        type: \"image\",\r\n\r\n        message: this.previewImageUrl,\r\n        isUser: true,\r\n      };\r\n\r\n      this.socket.emit(\"image\", message);\r\n\r\n      const newMessage = {\r\n        text: this.previewImageUrl,\r\n        type: \"image\",\r\n        user: this.user,\r\n        isUser: true,\r\n        conversationId: this.conversationId,\r\n      };\r\n      this.messages.push(newMessage);\r\n\r\n      this.previewImageUrl = \"\";\r\n    },\r\n\r\n    cancelImage() {\r\n      this.selectedFile = null;\r\n      this.previewImageUrl = null;\r\n    },\r\n\r\n    insertNewLine(event) {\r\n      if (event.shiftKey) {\r\n        const textarea = this.$refs.message;\r\n        const startPos = textarea.selectionStart;\r\n        const endPos = textarea.selectionEnd;\r\n        const currentValue = this.newMessage;\r\n        this.newMessage = `${currentValue.substring(\r\n          0,\r\n          startPos\r\n        )}\\n${currentValue.substring(endPos)}`;\r\n        // prevent the default behavior of inserting a new line\r\n        event.preventDefault();\r\n      }\r\n    },\r\n\r\n    showFeeback() {\r\n      this.feedback = true;\r\n    },\r\n\r\n    async joinConversation(conversationId) {\r\n      if (!this.ended) {\r\n        this.socket.emit(\"join\", { id: conversationId, user: this.user });\r\n        this.joined = true;\r\n      }\r\n    },\r\n\r\n    Processmessage(source) {\r\n      let imageMessages = this.messages.filter(\r\n        (msg) => msg.type === \"text\" || msg.type === \"input\"\r\n      );\r\n      let messageStrings = [];\r\n      messageStrings = imageMessages.map((msg) => \"\\n\" + msg.text);\r\n\r\n      const lastMessage = imageMessages[imageMessages.length - 1].text;\r\n\r\n      if (!lastMessage) {\r\n        // The message is empty or contains only whitespace\r\n        return;\r\n      }\r\n      let intent = classifyIntent(lastMessage);\r\n\r\n      switch (intent) {\r\n        case \"TRACK_ORDER\":\r\n          return this.processTrackOrder();\r\n        case \"RETURN_ORDER\":\r\n        // return processReturnOrder(message);\r\n        // Add cases for other intents and their corresponding processing logic\r\n        default:\r\n          return this.sendToBot();\r\n      }\r\n    },\r\n\r\n    async handleOrderRequest(values) {\r\n      const { email, orderId } = values;\r\n      let emailMsg = {\r\n        text: email,\r\n        value: email,\r\n        type: \"input\",\r\n        user: this.user,\r\n        isUser: true,\r\n        saved: true,\r\n        placeholder: \"Email Address\",\r\n      };\r\n\r\n      let orderIdMsg = {\r\n        text: orderId,\r\n        value: orderId,\r\n        type: \"input\",\r\n        user: this.user,\r\n        isUser: true,\r\n        saved: true,\r\n        placeholder: \"OrderId\",\r\n      };\r\n\r\n      await this.saveMessage(this.trackOrderMsg, this.conversationId);\r\n      await this.saveMessage(emailMsg, this.conversationId);\r\n      await this.saveMessage(orderIdMsg, this.conversationId);\r\n\r\n      this.newMessageSound(outgoing);\r\n\r\n      this.messages.push(emailMsg);\r\n      this.messages.push(orderIdMsg);\r\n      this.orderRequested = false;\r\n\r\n      this.isTyping = true;\r\n\r\n      this.sendToBotIntent(\"order_tracking\", {\r\n        email: email,\r\n        orderId: orderId,\r\n      });\r\n    },\r\n\r\n    processTrackOrder() {\r\n      // Step 1: Extract necessary information from the message (e.g., order ID)\r\n      this.messages.push(this.trackOrderMsg);\r\n      this.orderRequested = true;\r\n    },\r\n\r\n    async sendMessage() {\r\n      if (this.newMessage.trim() === \"\") {\r\n        // The message is empty or contains only whitespace\r\n        return;\r\n      }\r\n\r\n      const message = { text: this.newMessage };\r\n      // const response = await axios.post('/api/messages', { conversationId: this.conversationId, message });\r\n      await this.socket.emit(\"message\", {\r\n        conversationId: this.conversationId,\r\n        type: \"text\",\r\n        username: this.user,\r\n        message: message,\r\n        isUser: true,\r\n      });\r\n\r\n      this.socket.emit(\"typing\", {\r\n        status: false,\r\n        user: this.user,\r\n        id: this.conversationId,\r\n      });\r\n      this.chatStartTime = Date.now();\r\n      localStorage.setItem(\"chatStarted\", true);\r\n      localStorage.setItem(\r\n        `chatStartTime-${this.conversationId}`,\r\n        this.chatStartTime\r\n      );\r\n      this.resetChatTimeout();\r\n      this.newMessage = \"\";\r\n    },\r\n\r\n    onTyping() {\r\n      if (!this.isTyping) {\r\n        this.socket.emit(\"typing\", {\r\n          status: true,\r\n          user: this.user,\r\n          id: this.conversationId,\r\n        });\r\n\r\n        setTimeout(() => {\r\n          this.socket.emit(\"typing\", {\r\n            status: false,\r\n            user: this.user,\r\n            id: this.conversationId,\r\n          });\r\n        }, 2000);\r\n      }\r\n    },\r\n\r\n    checkPrev(object, index) {\r\n      if (index === 0) {\r\n        return true;\r\n      }\r\n      if (this.messages[index - 1].user === object.user) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    checkNxt(object, index) {\r\n      if (index === 0) {\r\n        return true;\r\n      }\r\n      const lastIndex = this.messages.length - 1;\r\n      const currentIndex = this.messages.indexOf(object);\r\n      if (currentIndex === lastIndex) {\r\n        return true;\r\n      }\r\n      if (this.messages[index + 1].user === object.user) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    async newMessageSound(sound) {\r\n      // var audio = new Audio(sound);\r\n\r\n      try {\r\n        sound.play();\r\n      } catch (error) {\r\n        console.log(\"error playing\");\r\n      }\r\n\r\n      // let previousTitle = document.title;\r\n\r\n      // let newTitle = \"You have a new message 📩\";\r\n\r\n      // // Set the new title\r\n      // document.title = newTitle;\r\n\r\n      // // Revert back to the previous title after specified seconds\r\n      // setTimeout(function () {\r\n      //   document.title = previousTitle;\r\n      // }, 2000);\r\n    },\r\n\r\n    async clickSelect(msg) {\r\n      this.newMessageSound(outgoing);\r\n      this.loading = true;\r\n      this.messages.pop();\r\n      const newMessage = {\r\n        id: msg.id,\r\n        text: msg.text,\r\n        user: this.user,\r\n        type: \"text\",\r\n        isUser: true,\r\n      };\r\n      this.messages = [...this.messages, newMessage];\r\n\r\n      this.loading = true;\r\n      await this.checkCase(this.step, true, newMessage, false);\r\n      await this.checkCase(this.step, false, newMessage, false);\r\n      this.newMessageSound(incoming);\r\n      this.chatToChatbottom();\r\n      this.loading = false;\r\n    },\r\n\r\n    async handleInputSubmit(result) {\r\n      const { msg, inputValue, value, id, placeholder } = result;\r\n\r\n      this.newMessageSound(outgoing);\r\n      this.loading = true;\r\n      this.messages.pop();\r\n      const updateMsg = {\r\n        id,\r\n        text: value,\r\n        value: inputValue,\r\n        type: \"input\",\r\n        user: this.user,\r\n        isUser: true,\r\n        saved: true,\r\n        placeholder,\r\n      };\r\n      // Perform actions with the input value, such as sending it to the server or updating the component's state\r\n\r\n      this.messages = [...this.messages, updateMsg];\r\n\r\n      // this.loading = true;\r\n      await this.checkCase(this.step, true, updateMsg, false);\r\n      await this.checkCase(this.step, false, updateMsg, false);\r\n      this.newMessageSound(incoming);\r\n      this.chatToChatbottom();\r\n      this.loading = false;\r\n    },\r\n\r\n    async checkCase(step, save, msg, first) {\r\n      // find the object that has the step give in the function value\r\n\r\n      let valueStep = this.flow.find((obj) => obj.step === step);\r\n\r\n      if (valueStep.next === \"end\" && first) {\r\n        if (!valueStep.auto) {\r\n          this.isSocketInConversation();\r\n          let intervalIdReq;\r\n\r\n          this.automated = false;\r\n        }\r\n        this.chatToChatbottom();\r\n        return;\r\n      }\r\n\r\n      if (save) {\r\n        valueStep.messages.pop();\r\n        // loop through and  save user options\r\n        for (let index = 0; index < valueStep.messages.length; index++) {\r\n          const element = valueStep.messages[index];\r\n          element.isUser = true;\r\n          await this.saveMessage(element, this.conversationId);\r\n        }\r\n\r\n        await saveChats(msg, this.conversationId);\r\n        await setStepConversation(this.conversationId, msg.id);\r\n        this.step = msg.id;\r\n      }\r\n\r\n      // No check and update next question for automated process\r\n      if (!save) {\r\n        for (let index = 0; index < valueStep.messages.length; index++) {\r\n          const element = valueStep.messages[index];\r\n          element.isUser = true;\r\n          this.messages.push(element);\r\n          if (valueStep.next === \"end\" || !valueStep.auto) {\r\n            await this.saveMessage(element, this.conversationId);\r\n          }\r\n          this.chatToChatbottom();\r\n        }\r\n        if (valueStep.next === \"end\" && !valueStep.auto) {\r\n          await this.stopAutomate();\r\n          // await this.Processmessage();\r\n        }\r\n      }\r\n    },\r\n\r\n    async chatToChatbottom() {\r\n      if (\r\n        document\r\n          .querySelector(\"#chatly-app\")\r\n          .shadowRoot.querySelector(\"#chat-body\")\r\n      ) {\r\n        const chatBody = document\r\n          .querySelector(\"#chatly-app\")\r\n          .shadowRoot.querySelector(\"#chat-body\");\r\n\r\n        chatBody.scrollTop = chatBody.scrollHeight;\r\n      }\r\n    },\r\n\r\n    async saveMessage(msg, id) {\r\n      // const newMessage = {\r\n      //   text: msg.text,\r\n      //   type: msg.type,\r\n      //   user: msg.user,\r\n      //   isUser: true,\r\n      // };\r\n      await saveChats(msg, id);\r\n    },\r\n\r\n    requestAssistance() {\r\n      if (!this.agent && !this.ended) {\r\n        const data = { conversationId: this.conversationId, userId: this.user };\r\n        this.socket.emit(\"requestAssistance\", data);\r\n        // Check if chat session has already started\r\n        const chatStarted = localStorage.getItem(\"chatStarted\");\r\n        this.showLoader = true;\r\n      }\r\n    },\r\n\r\n    async stopAutomate() {\r\n      this.joinConversation(this.conversationId);\r\n      this.automated = false;\r\n      this.chatToChatbottom();\r\n      this.requestAssistance();\r\n    },\r\n\r\n    isSocketInConversation() {\r\n      const conversationRoom = `conversation:${this.conversationId}`;\r\n\r\n      this.socket.emit(\r\n        \"isSocketInConversation\",\r\n        conversationRoom,\r\n        (isJoined) => {\r\n          if (isJoined) {\r\n          } else {\r\n            this.joinConversation(this.conversationId);\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    async lastMessageIsBot() {\r\n      const lastMessage = this.messages[this.messages.length - 1];\r\n\r\n      if (lastMessage.type === \"voice\" || lastMessage.type === \"image\") {\r\n        return true;\r\n      }\r\n      return lastMessage && lastMessage.user === \"bot\";\r\n    },\r\n\r\n    startChatTimeout() {\r\n      // Calculate remaining time based on elapsed time\r\n      const elapsedTime = Date.now() - this.chatStartTime;\r\n      const remainingTime = Math.max(this.chatTimeoutDuration - elapsedTime, 0);\r\n\r\n      // Start the chat timeout timer\r\n      this.chatTimeout = setTimeout(() => {\r\n        // End the chat session on timeout\r\n        if (!this.ended) {\r\n          this.socket.emit(\"timeUp\", this.conversationId);\r\n        }\r\n\r\n        this.expiredConvId(true);\r\n      }, remainingTime);\r\n\r\n      // Update the line loader every second\r\n      const intervalId = setInterval(() => {\r\n        const elapsedTime = Date.now() - this.chatStartTime;\r\n        const remainingTime = Math.max(\r\n          this.chatTimeoutDuration - elapsedTime,\r\n          0\r\n        );\r\n        const remainingPercentage =\r\n          (remainingTime / this.chatTimeoutDuration) * 100;\r\n        this.loaderWidth = 100 - remainingPercentage;\r\n      }, 1000);\r\n\r\n      this.intervalIds.push(intervalId);\r\n    },\r\n\r\n    resetChatTimeout() {\r\n      // Reset the chat timeout timer\r\n      clearTimeout(this.chatTimeout);\r\n      if (!this.chatStartTime) {\r\n        this.chatStartTime = Date.now();\r\n      }\r\n      this.startChatTimeout();\r\n\r\n      // Clear the line loader interval\r\n      clearInterval(this.intervalIds.pop());\r\n      this.loaderWidth = 0;\r\n    },\r\n\r\n    getConversationById(conversationId) {\r\n      const savedState = JSON.parse(localStorage.getItem(\"appState\")) || {};\r\n      const conversation =\r\n        savedState.conversations?.byId[conversationId] || null;\r\n      return conversation;\r\n    },\r\n\r\n    getConversationIdFromLocalStorage() {\r\n      const conversationData = localStorage.getItem(\"conversationId\");\r\n      if (conversationData) {\r\n        const conversationId = conversationData.split(\"-\")[0];\r\n        return conversationId;\r\n      }\r\n      return null; // conversation ID not found or invalid\r\n    },\r\n\r\n    saveConversationId(conversationId) {\r\n      // Check if conversation ID has expired\r\n\r\n      const timestamp = Date.now();\r\n\r\n      const conversationData = {\r\n        fetchState: \"partial\",\r\n        read: true,\r\n        expire: timestamp,\r\n      };\r\n      this.addConversation(conversationId, conversationData);\r\n\r\n      // localStorage.setItem(\"conversationId\", conversationData);\r\n    },\r\n\r\n    isConversationIdExpired() {\r\n      // const conversationId = localStorage.getItem(\"conversationId\");\r\n      const convo = this.conversationId || this.conversationId;\r\n      const expire = this.getConversationById(convo);\r\n      if (convo && expire) {\r\n        const conversationTimestamp = parseInt(expire.expire);\r\n        const now = Date.now();\r\n        const twoDaysInMilliseconds = 7 * 24 * 60 * 60 * 1000; // 2 days in milliseconds\r\n        return now - conversationTimestamp > twoDaysInMilliseconds;\r\n      }\r\n      return true; // conversation ID not found or invalid\r\n    },\r\n\r\n    async expiredConvId(value) {\r\n      if (this.isConversationIdExpired() || value) {\r\n        // this.ended = true;\r\n      }\r\n    },\r\n\r\n    async getConversationId() {\r\n      let localChatId = this.conversationId || null;\r\n      if (localChatId === null) {\r\n        this.$router.push({ name: \"home\" });\r\n      }\r\n\r\n      return localChatId;\r\n    },\r\n\r\n    capitalizeName(name) {\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n\r\n    iniStartTime() {\r\n      this.chatStartTime = localStorage.getItem(\r\n        `chatStartTime-${this.conversationId}`\r\n      );\r\n      if (this.chatStartTime) {\r\n        // Restore chat start time from local storage\r\n\r\n        this.showLoader = true;\r\n        this.startChatTimeout();\r\n      }\r\n      // Set the chatStarted flag and chat start time in local storage\r\n      if (!this.chatStartTime) {\r\n        this.chatStartTime = Date.now();\r\n        localStorage.setItem(\r\n          `chatStartTime-${this.conversationId}`,\r\n          this.chatStartTime\r\n        );\r\n      }\r\n    },\r\n\r\n    async updateConversation(conversationId, conversationData) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const newState = {\r\n        ...data,\r\n        conversations: {\r\n          ...data.conversations,\r\n          byId: {\r\n            ...data.conversations.byId,\r\n            [conversationId]: {\r\n              ...data.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      //   this.updateState(newState);\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    async sendToBotIntent(intent, intent_data) {\r\n      let imageMessages = this.messages.filter(\r\n        (msg) => msg.type === \"text\" || msg.type === \"input\"\r\n      );\r\n      let messageStrings = imageMessages.map((msg) => \"\\n\" + msg.text);\r\n\r\n      const lastMessage = this.messages[this.messages.length - 1].text;\r\n\r\n      let allMessageText = \" \\nhello\\n \" + messageStrings.join(\"\");\r\n      try {\r\n        const response = await axios({\r\n          method: \"post\",\r\n          url: \"https://beta.arthian.dev/answer-me/\",\r\n\r\n          data: {\r\n            user: \"moboid\",\r\n            convo: allMessageText,\r\n            prompt: lastMessage,\r\n            intent: intent,\r\n            intent_data: intent_data,\r\n          },\r\n        });\r\n\r\n        await this.socket.emit(\"message\", {\r\n          conversationId: this.conversationId,\r\n          type: \"text\",\r\n          username: \"bot\",\r\n          message: { text: response.data.response },\r\n          isUser: false,\r\n        });\r\n        this.isTyping = false;\r\n      } catch (error) {\r\n        // console.error(error);\r\n        this.isTyping = false;\r\n      }\r\n      this.sending = false;\r\n    },\r\n\r\n    async sendToBot() {\r\n      let isbot = await this.lastMessageIsBot();\r\n      if (isbot || this.automated) {\r\n        this.sending = false;\r\n        this.isTyping = false;\r\n        return;\r\n      }\r\n      this.sending = true;\r\n      this.isTyping = true;\r\n      let imageMessages = this.messages.filter(\r\n        (msg) => msg.type === \"text\" || msg.type === \"input\"\r\n      );\r\n      let messageStrings = imageMessages.map((msg) => \"\\n\" + msg.text);\r\n\r\n      const lastMessage = messageStrings[messageStrings.length - 1].text;\r\n\r\n      let allMessageText = \" \\nhello\\n \" + messageStrings.join(\"\");\r\n      this.inputText = \"\";\r\n      try {\r\n        const response = await axios({\r\n          method: \"post\",\r\n          url: \"https://beta.arthian.dev/answer-me/\",\r\n\r\n          data: {\r\n            user: \"moboid\",\r\n            convo: allMessageText,\r\n            prompt: lastMessage,\r\n            intent: false,\r\n            intent_data: false,\r\n          },\r\n        });\r\n\r\n        await this.socket.emit(\"message\", {\r\n          conversationId: this.conversationId,\r\n          type: \"text\",\r\n          username: \"bot\",\r\n          message: { text: response.data.response },\r\n          isUser: false,\r\n        });\r\n        this.isTyping = false;\r\n      } catch (error) {\r\n        // console.error(error);\r\n        this.isTyping = false;\r\n      }\r\n      this.sending = false;\r\n    },\r\n\r\n    messageEndsWithGoodbye(statement) {\r\n      if (!statement) {\r\n        return false;\r\n      }\r\n      // Define common keywords and phrases that indicate a goodbye message\r\n      const goodbyeKeywords = [\r\n        \"goodbye\",\r\n        \"bye\",\r\n        \"farewell\",\r\n        \"see you\",\r\n        \"take care\",\r\n        \"have a nice\",\r\n        \"later\",\r\n      ];\r\n\r\n      // Define regular expressions to match common patterns in goodbye messages\r\n      const patterns = [\r\n        /\\b(thanks|thank you)\\b/gi,\r\n        /\\b(good night|night)\\b/gi,\r\n        /\\b(talk to you|chat with you)\\b/gi,\r\n        /\\b(see you|cu|ttyl|ttys)\\b/gi,\r\n        /\\b(be safe)\\b/gi,\r\n        /\\b(have a great|have a nice)\\b/gi,\r\n        /\\b(take care)\\b/gi,\r\n        /\\b(sleep well)\\b/gi,\r\n        /\\b(catch you later|laters)\\b/gi,\r\n      ];\r\n\r\n      // Check if the statement contains a goodbye keyword\r\n      for (const keyword of goodbyeKeywords) {\r\n        if (statement.toLowerCase().includes(keyword)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      // Check if the statement matches any of the common patterns\r\n      for (const pattern of patterns) {\r\n        if (pattern.test(statement)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      // If no keywords or patterns were found, assume it's not a goodbye message\r\n      return false;\r\n    },\r\n\r\n    renderMessage(message) {\r\n      // Detect links in the message and render them as clickable links\r\n      const linkRegex = /(https?|ftp):\\/\\/[^\\s]+/gi;\r\n\r\n      if (this.isLink(message)) {\r\n        // Replace the link in the message with an anchor tag element\r\n        message = message.replace(\r\n          linkRegex,\r\n          '<a href=\"$&\" target=\"_blank\">$&</a>'\r\n        );\r\n      }\r\n\r\n      return message;\r\n    },\r\n\r\n    isLink(text) {\r\n      // Match links that do not already have an anchor tag\r\n      const linkRegex = /^(?!.*?<a\\s).*?(https?|ftp):\\/\\/[^\\s]+.*$/i;\r\n      return linkRegex.test(text);\r\n    },\r\n\r\n    async iniChat(watcher) {\r\n      this.isLoading = true;\r\n      let convoinfo = {};\r\n\r\n      convoinfo = await getConversation(this.conversationId);\r\n      this.agent = convoinfo.agent;\r\n\r\n      this.messages = await getConvoChats(this.conversationId);\r\n\r\n      this.step = convoinfo.step;\r\n\r\n      await this.expiredConvId(false);\r\n\r\n      this.chatToChatbottom();\r\n\r\n      this.iniStartTime();\r\n      // await this.submitText();\r\n      this.isLoading = false;\r\n      if (convoinfo.hasOwnProperty(\"ended\")) {\r\n        this.ended = convoinfo.ended;\r\n        let item = this.getConversationBy(this.conversationId);\r\n\r\n        item.ended = convoinfo.ended;\r\n        await this.updateConversation(this.conversationId, item);\r\n      } else {\r\n        this.ended = false;\r\n      }\r\n\r\n      await this.checkCase(this.step, false, null, true);\r\n\r\n      if (!this.ended && this.isBotEnabled && !this.automated && !watcher) {\r\n        let logivVal = await this.lastMessageIsBot();\r\n\r\n        if (!logivVal) {\r\n          this.Processmessage(\"source1\");\r\n        }\r\n      }\r\n    },\r\n\r\n    recordingAudio() {\r\n      this.recording = true;\r\n      navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\r\n        this.mediaRecorder = new MediaRecorder(stream);\r\n        const chunks = [];\r\n        this.mediaRecorder.addEventListener(\"dataavailable\", (event) => {\r\n          chunks.push(event.data);\r\n        });\r\n        this.mediaRecorder.addEventListener(\"stop\", () => {\r\n          this.recording = false;\r\n          const blob = new Blob(chunks, { type: \"audio/webm\" });\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(blob);\r\n          const conversationId = this.conversationId;\r\n          reader.addEventListener(\"loadend\", () => {\r\n            const message = {\r\n              conversationId: conversationId,\r\n              username: this.user,\r\n              type: \"voice\",\r\n              author: \"Me\",\r\n              message: reader.result,\r\n              isUser: true,\r\n            };\r\n            // this.socket.emit(\"voiceMessage\", message);\r\n            this.messages.push(message);\r\n          });\r\n        });\r\n        this.mediaRecorder.start();\r\n      });\r\n    },\r\n\r\n    requestMicrophonePermission() {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ audio: true })\r\n        .then((stream) => {\r\n          this.mediaStream = stream;\r\n          this.startRecording();\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    },\r\n\r\n    startRecording() {\r\n      if (navigator.permissions) {\r\n        navigator.permissions\r\n          .query({ name: \"microphone\" })\r\n          .then((permissionStatus) => {\r\n            if (permissionStatus.state === \"granted\") {\r\n              // permission already granted, proceed with recording\r\n              this.recordingAudio();\r\n            } else if (permissionStatus.state === \"prompt\") {\r\n              // permission not yet granted, show permission prompt\r\n              navigator.mediaDevices\r\n                .getUserMedia({ audio: true })\r\n                .then((stream) => {\r\n                  stream.getTracks().forEach((track) => track.stop());\r\n                  this.recordingAudio();\r\n                })\r\n                .catch((error) => {\r\n                  console.error(error);\r\n                });\r\n            } else if (permissionStatus.state === \"denied\") {\r\n              // permission denied, show error message or prompt user to enable permission\r\n              console.error(\"Permission denied for microphone\");\r\n            }\r\n          });\r\n      }\r\n    },\r\n\r\n    stopRecording() {\r\n      this.mediaRecorder.stop();\r\n    },\r\n\r\n    playVoiceMessage(message) {\r\n      const audio = new Audio(message.text);\r\n      const playButton = document.createElement(\"button\");\r\n      playButton.textContent = \"Play\";\r\n      playButton.onclick = () => {\r\n        audio.play();\r\n      };\r\n      playButton.click();\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    this.socket = io(\"https://chatlysocket.herokuapp.com/\");\r\n    this.socket.on(\"connect\", () => {\r\n      this.socket.emit(\"userType\", \"customer\");\r\n    });\r\n\r\n    // litsen to new\r\n\r\n    this.socket.on(\"newMessage\", async (message) => {\r\n      if (message.user === this.user || message.user === \"user\") {\r\n        await this.messages.push(message);\r\n        await this.chatToChatbottom();\r\n        await this.newMessageSound(outgoing);\r\n        if (this.isBotEnabled) {\r\n          this.Processmessage(\"source2\");\r\n        }\r\n      } else {\r\n        this.messages.push(message);\r\n        this.chatToChatbottom();\r\n        this.newMessageSound(incoming);\r\n        readMessage(this.conversationId);\r\n      }\r\n    });\r\n\r\n    this.socket.on(\"joined\", async (message) => {\r\n      //   this.user != message.user,\r\n      //   this.user,\r\n      //   message.user,\r\n      //   \"the data i need\"\r\n      // );\r\n\r\n      if (this.user != message.user) {\r\n        if (this.agent !== message.user) {\r\n          this.messages.push(message);\r\n          // this.saveMessage(message);\r\n          await this.chatToChatbottom();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.socket.on(\"typing\", (isTyping) => {\r\n      this.isTyping = isTyping.status;\r\n      this.typingMsg = `${isTyping.user} is typing`;\r\n      this.chatToChatbottom();\r\n    });\r\n\r\n    this.socket.on(\"requestAccepted\", async (data) => {\r\n      this.agent = data.userId;\r\n    });\r\n\r\n    await this.iniChat(false);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    this.socket.off();\r\n  },\r\n\r\n  watch: {\r\n    messages: {\r\n      handler(newMessages) {\r\n        const lastMessage = newMessages[newMessages.length - 1];\r\n        if (\r\n          lastMessage &&\r\n          this.messageEndsWithGoodbye(lastMessage.text) &&\r\n          this.ended !== null &&\r\n          !this.ended\r\n        ) {\r\n          setTimeout(() => {\r\n            this.showFeeback();\r\n          }, 3000);\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n\r\n    conversationId: {\r\n      async handler(to, from) {\r\n        await this.iniChat(true);\r\n        // if (to.params.id !== from.params.id) {\r\n\r\n        // }\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    displayAgent() {\r\n      return this.agent || \"bot\";\r\n    },\r\n    // ...other computed properties\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <canvas ref=\"canvas\"></canvas>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    name: String,\r\n    size: {\r\n      type: Number,\r\n      default: 40,\r\n    },\r\n  },\r\n  mounted() {\r\n    const canvas = this.$refs.canvas;\r\n    const context = canvas.getContext(\"2d\");\r\n    const size = this.size; // Size of the canvas\r\n    const fontSize = size / 2; // Font size of the letter\r\n    const fontFamily = \"Arial\"; // Font family of the letter\r\n\r\n    // Set the canvas size\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n\r\n    // Draw the letter\r\n    context.fillStyle = \"#ccc\"; // Background color\r\n    context.fillRect(0, 0, size, size);\r\n    context.fillStyle = \"#fff\"; // Text color\r\n    context.textAlign = \"center\";\r\n    context.textBaseline = \"middle\";\r\n    context.font = `${fontSize}px ${fontFamily}`;\r\n    context.fillText(this.getNameInitial(), size / 2, size / 2);\r\n  },\r\n  methods: {\r\n    getNameInitial() {\r\n      return this.name ? this.name[0].toUpperCase() : \"B\";\r\n    },\r\n  },\r\n  watch: {\r\n    name: function (newValue, oldValue) {\r\n      console.log(newValue, \"there was a chnage\");\r\n      const canvas = this.$refs.canvas;\r\n      const context = canvas.getContext(\"2d\");\r\n      const size = 40; // Size of the canvas\r\n      const fontSize = size / 2; // Font size of the letter\r\n      const fontFamily = \"Arial\"; // Font family of the letter\r\n\r\n      // Set the canvas size\r\n      canvas.width = size;\r\n      canvas.height = size;\r\n\r\n      // Draw the letter\r\n      context.fillStyle = \"#ccc\"; // Background color\r\n      context.fillRect(0, 0, size, size);\r\n      context.fillStyle = \"#fff\"; // Text color\r\n      context.textAlign = \"center\";\r\n      context.textBaseline = \"middle\";\r\n      context.font = `${fontSize}px ${fontFamily}`;\r\n      context.fillText(this.getNameInitial(), size / 2, size / 2);\r\n      // Re-mount the component\r\n      // this.$nextTick(() => {\r\n      //   this.$forceUpdate();\r\n      // });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./NewImage.vue?vue&type=template&id=4d2ed1f8\"\nimport script from \"./NewImage.vue?vue&type=script&lang=js\"\nexport * from \"./NewImage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div id=\"chatview\">\r\n    <transition name=\"bounce\">\r\n      <div class=\"chat-container\">\r\n        <div class=\"chat-header\">\r\n          <img\r\n            @click=\"$emit('goBack')\"\r\n            width=\"32\"\r\n            height=\"32\"\r\n            style=\"cursor: pointer\"\r\n            src=\"https://img.icons8.com/windows/32/ffffff/long-arrow-left.png\"\r\n            alt=\"long-arrow-left\"\r\n          />\r\n          <h3>Arthian</h3>\r\n        </div>\r\n\r\n        <div\r\n          ref=\"chatbody\"\r\n          class=\"chat-body\"\r\n          id=\"chat-body\"\r\n          style=\"display: flex; justify-content: center; align-items: center\"\r\n        >\r\n          <div v-if=\"isLoading\" class=\"loading-div\"></div>\r\n\r\n          <div style=\"max-width: 360px\" class=\"\">\r\n            <v-form ref=\"form\" @submit.prevent=\"submitFeedback\">\r\n              <h3 style=\"text-align: center\">\r\n                Please tell us how was your experience?\r\n              </h3>\r\n              <v-btn-toggle v-model=\"selectedEmoji\" mandatory>\r\n                <v-btn\r\n                  v-for=\"emoji in emojis\"\r\n                  :key=\"emoji.value\"\r\n                  :value=\"emoji.value\"\r\n                  class=\"ma-2 custom-btn\"\r\n                >\r\n                  <span class=\"emoji\">{{ emoji.label }}</span>\r\n                  <v-tooltip top>\r\n                    <span class=\"tooltip-value\">{{ emoji.value }}</span>\r\n                  </v-tooltip>\r\n                </v-btn>\r\n              </v-btn-toggle>\r\n              <v-text-field\r\n                v-model=\"comments\"\r\n                label=\"Additional Comments\"\r\n                :rules=\"rules.comments\"\r\n              ></v-text-field>\r\n              <v-btn\r\n                color=\"blue\"\r\n                @click.prevent=\"submitFeedback\"\r\n                :disabled=\"selectedEmoji === null\"\r\n                >Submit</v-btn\r\n              >\r\n            </v-form>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"chat-footer\">\r\n          <!-- <div\r\n                style=\"\r\n                  margin: 24px auto 12px;\r\n                  text-align: center;\r\n                  font-size: 14px;\r\n                  line-height: 21px;\r\n                  padding-top: 0px;\r\n                  color: rgb(115, 115, 115);\r\n                \"\r\n              >\r\n                Your conversation has ended\r\n              </div>\r\n              <button @click=\"createNewConvo\" class=\"start\">\r\n                Start Conversation\r\n              </button> -->\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <ErrorDialog\r\n      v-if=\"showErrorDialog\"\r\n      :error=\"errorMessage\"\r\n      @dismiss=\"hideErrorDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updateConvo } from \"@/utils/firbase_utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedEmoji: null,\r\n      comments: \"\",\r\n      isLoading: false,\r\n      emojis: [\r\n        { value: \"bad\", label: \"😠\" },\r\n        { value: \"fair\", label: \"😕\" },\r\n        { value: \"good\", label: \"😊\" },\r\n        { value: \"great\", label: \"😄\" },\r\n      ],\r\n      rules: {\r\n        comments: [\r\n          (value) => !!value || \"Comments are required\",\r\n          (value) =>\r\n            value.length <= 1000 ||\r\n            \"Comments must be less than 1000 characters\",\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  components: {},\r\n  props: [\"conversationId\"],\r\n\r\n  methods: {\r\n    async updateConversation(conversationId, conversationData) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const newState = {\r\n        ...data,\r\n        conversations: {\r\n          ...data.conversations,\r\n          byId: {\r\n            ...data.conversations.byId,\r\n            [conversationId]: {\r\n              ...data.conversations.byId[conversationId],\r\n              ...conversationData,\r\n            },\r\n          },\r\n        },\r\n      };\r\n      //   this.updateState(newState);\r\n      console.log(newState, \"updateing feedback\");\r\n      localStorage.setItem(\"appState\", JSON.stringify(newState));\r\n    },\r\n\r\n    getConversationBy(conversationId) {\r\n      const data = JSON.parse(localStorage.getItem(\"appState\"));\r\n      const conversations = data.conversations.byId;\r\n      if (conversations.hasOwnProperty(conversationId)) {\r\n        return conversations[conversationId];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    async submitFeedback() {\r\n      if (this.$refs.form.validate()) {\r\n        await updateConvo(this.conversationId, {\r\n          ended: true,\r\n          comment: this.comments,\r\n          reaction: this.selectedEmoji,\r\n        });\r\n        let item = this.getConversationBy(this.conversationId);\r\n        console.log(\"the item\", item);\r\n        item.ended = true;\r\n        // console.log(item, \"the item\");\r\n        await this.updateConversation(this.conversationId, item);\r\n        this.$emit(\"goBackTo\");\r\n        // this.$router.push({ name: \"home\" });\r\n      }\r\n      // Code to submit feedback goes here\r\n    },\r\n  },\r\n\r\n  created() {},\r\n};\r\n</script>\r\n","import { render } from \"./feedBack.vue?vue&type=template&id=0fef096e\"\nimport script from \"./feedBack.vue?vue&type=script&lang=js\"\nexport * from \"./feedBack.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div :aria-valuetext=\"message.saved\" v-if=\"!message.saved\">\r\n    <div\r\n      v-for=\"(input, index) in message.inputs\"\r\n      :key=\"index\"\r\n      class=\"input-div\"\r\n    >\r\n      <div class=\"input-placeholder\">\r\n        {{ capitalizeName(input.placeholder) }}\r\n      </div>\r\n      <div class=\"input-container\">\r\n        <form @submit.prevent=\"handleInputSubmit(input.placeholder, input.id)\">\r\n          <input\r\n            required\r\n            :type=\"input.type\"\r\n            autocomplete=\"off\" \r\n            value=\"\"\r\n            :aria-label=\"input.placeholder\"\r\n            ref=\"qInput\"\r\n            v-model=\"inputField\"\r\n          />\r\n          <button v-if=\"input\" type=\"submit\" aria-label=\"Submit\" tabindex=\"0\">\r\n            <span aria-hidden=\"true\" class=\"\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n              >\r\n                <path\r\n                  d=\"M5.42773 4.70898C5.46387 4.85254 5.53809 4.98828 5.65039 5.10059L8.54932 8L5.64893 10.9004C5.31689 11.2324 5.31689 11.7705 5.64893 12.1025C5.98096 12.4336 6.51904 12.4336 6.85107 12.1025L10.3516 8.60059C10.5591 8.39355 10.6367 8.10449 10.585 7.83691C10.5537 7.67578 10.4761 7.52246 10.3516 7.39844L6.85254 3.89941C6.52051 3.56738 5.98242 3.56738 5.65039 3.89941C5.43066 4.11816 5.35645 4.42871 5.42773 4.70898Z\"\r\n                  fill=\"#ffffff\"\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div :aria-valuetext=\"message.saved\" v-else>\r\n    <div :key=\"index\" class=\"input-div\">\r\n      <div class=\"input-placeholder\">\r\n        {{ capitalizeName(message.placeholder) }}\r\n      </div>\r\n      <div class=\"input-container\">\r\n        <input\r\n          disabled\r\n          required\r\n          :type=\"message.type\"\r\n          autocomplete=\"off\"\r\n          :value=\"message.value\"\r\n          :aria-label=\"message.placeholder\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data: () => ({\r\n    inputField: \"\",\r\n    placeholder: \"\",\r\n  }),\r\n  props: [\"message\"],\r\n  methods: {\r\n    async handleInputSubmit(placeholder, id) {\r\n      console.log(this.inputField, placeholder);\r\n\r\n      const value = `My ${placeholder} is: ${this.inputField}`;\r\n\r\n      console.log(this.message, this.inputField, value);\r\n\r\n      this.$emit(\"handleInputSubmit\", {\r\n        id,\r\n        msg: this.message,\r\n        inputValue: this.inputField,\r\n        placeholder: placeholder,\r\n        value: value,\r\n      });\r\n    },\r\n\r\n    capitalizeName(name) {\r\n      console.log(name, \"the name\");\r\n      return name.charAt(0).toUpperCase() + name.slice(1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./inputFields.vue?vue&type=template&id=41d64396\"\nimport script from \"./inputFields.vue?vue&type=script&lang=js\"\nexport * from \"./inputFields.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","const classifyIntent = (message) => {\r\n  const intentKeywords = {\r\n    TRACK_ORDER: [\r\n      \"order\",\r\n      \"orders\",\r\n      \"product\",\r\n      \"track\",\r\n      \"order status\",\r\n      \"shipment\",\r\n    ],\r\n    RETURN_ORDER: [\r\n      \"order\",\r\n      \"orders\",\r\n      \"product\",\r\n      \"return\",\r\n      \"refund\",\r\n      \"exchange\",\r\n    ],\r\n    // Add more intent categories and keywords as needed\r\n  };\r\n\r\n  const cleanedMessage = message.replace(/\\n/g, \"\"); // Remove newline characters from the message\r\n  const tokens = cleanedMessage.split(\" \");\r\n\r\n  console.log(tokens, \"tokens\");\r\n\r\n  // Perform keyword matching and context analysis\r\n  let intentScores = {};\r\n  for (const intent in intentKeywords) {\r\n    intentScores[intent] = 0;\r\n\r\n    for (const keyword of intentKeywords[intent]) {\r\n      if (tokens.includes(keyword)) {\r\n        intentScores[intent]++;\r\n\r\n        // Add additional logic for contextual analysis, e.g., part-of-speech tagging\r\n        // Adjust the score based on proximity and context of the keyword\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(intentScores, \"scores\");\r\n\r\n  // Determine the intent with the highest score\r\n  let maxScore = -1;\r\n  let predictedIntent = \"OTHER\";\r\n\r\n  let allScoresEqual = true;\r\n  for (const intent in intentScores) {\r\n    if (intentScores[intent] > maxScore) {\r\n      maxScore = intentScores[intent];\r\n      predictedIntent = intent;\r\n    }\r\n    if (intentScores[intent] !== intentScores[Object.keys(intentScores)[0]]) {\r\n      allScoresEqual = false;\r\n    }\r\n  }\r\n\r\n  if (allScoresEqual) {\r\n    return false; // All intent scores are the same\r\n  }\r\n  if (maxScore === 0) {\r\n    return false; // No intent-related keywords found\r\n  }\r\n  return predictedIntent;\r\n};\r\n\r\nexport default classifyIntent;\r\n","<template>\r\n  <div>\r\n    <div class=\"input-div\" style=\"margin-bottom: 20px; display: inline-block\">\r\n      <div class=\"input-placeholder\">Email Address</div>\r\n      <div class=\"input-container\">\r\n        <form\r\n          @submit.prevent=\"\r\n            () => {\r\n              this.email = this.inputField1;\r\n            }\r\n          \"\r\n        >\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            autocomplete=\"off\"\r\n            ref=\"qInput1\"\r\n            v-model=\"inputField1\"\r\n          />\r\n          <button type=\"submit\" aria-label=\"Submit\" tabindex=\"0\">\r\n            <span aria-hidden=\"true\" class=\"\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n              >\r\n                <path\r\n                  d=\"M5.42773 4.70898C5.46387 4.85254 5.53809 4.98828 5.65039 5.10059L8.54932 8L5.64893 10.9004C5.31689 11.2324 5.31689 11.7705 5.64893 12.1025C5.98096 12.4336 6.51904 12.4336 6.85107 12.1025L10.3516 8.60059C10.5591 8.39355 10.6367 8.10449 10.585 7.83691C10.5537 7.67578 10.4761 7.52246 10.3516 7.39844L6.85254 3.89941C6.52051 3.56738 5.98242 3.56738 5.65039 3.89941C5.43066 4.11816 5.35645 4.42871 5.42773 4.70898Z\"\r\n                  fill=\"#ffffff\"\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div\r\n      v-if=\"email && email == inputField1\"\r\n      class=\"input-div\"\r\n      style=\"margin-bottom: 20px; display: inline-block\"\r\n    >\r\n      <div class=\"input-placeholder\">Order Id</div>\r\n      <div class=\"input-container\">\r\n        <form @submit.prevent=\"handleInputSubmit\">\r\n          <input\r\n            required\r\n            type=\"text\"\r\n            autocomplete=\"off\"\r\n            ref=\"qInput2\"\r\n            v-model=\"inputField2\"\r\n          />\r\n          <button type=\"submit\" aria-label=\"Submit\" tabindex=\"0\">\r\n            <span aria-hidden=\"true\" class=\"\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n              >\r\n                <path\r\n                  d=\"M5.42773 4.70898C5.46387 4.85254 5.53809 4.98828 5.65039 5.10059L8.54932 8L5.64893 10.9004C5.31689 11.2324 5.31689 11.7705 5.64893 12.1025C5.98096 12.4336 6.51904 12.4336 6.85107 12.1025L10.3516 8.60059C10.5591 8.39355 10.6367 8.10449 10.585 7.83691C10.5537 7.67578 10.4761 7.52246 10.3516 7.39844L6.85254 3.89941C6.52051 3.56738 5.98242 3.56738 5.65039 3.89941C5.43066 4.11816 5.35645 4.42871 5.42773 4.70898Z\"\r\n                  fill=\"#ffffff\"\r\n                ></path>\r\n              </svg>\r\n            </span>\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputField1: \"\",\r\n      inputField2: \"\",\r\n      email: \"\",\r\n      orderid: \"\",\r\n    };\r\n  },\r\n  props: [\"message\"],\r\n  methods: {\r\n    handleInputSubmit() {\r\n      console.log(\"handling\");\r\n      this.$emit(\"handleOrderRequest\", {\r\n        email: this.email,\r\n        orderId: this.inputField2,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./inputGroup.vue?vue&type=template&id=336b1788\"\nimport script from \"./inputGroup.vue?vue&type=script&lang=js\"\nexport * from \"./inputGroup.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./testing.vue?vue&type=template&id=4d196548\"\nimport script from \"./testing.vue?vue&type=script&lang=js\"\nexport * from \"./testing.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./chatmaintest.vue?vue&type=template&id=7f4d8367\"\nimport script from \"./chatmaintest.vue?vue&type=script&lang=js\"\nexport * from \"./chatmaintest.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./testApp.vue?vue&type=template&id=23559469\"\nimport script from \"./testApp.vue?vue&type=script&lang=js\"\nexport * from \"./testApp.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JOSHIJAX\\\\Desktop\\\\Chatly\\\\vue-widget\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Styles\nimport '@mdi/font/css/materialdesignicons.css'\nimport 'vuetify/styles'\n\n// Vuetify\nimport { createVuetify } from 'vuetify'\n\nexport default createVuetify(\n  // https://vuetifyjs.com/en/introduction/why-vuetify/#feature-guides\n)\n","import { createApp } from \"vue\";\r\nimport testApp from \"./testApp.vue\";\r\nimport vuetify from \"./plugins/vuetify\";\r\n\r\nconst shadowHost = document.querySelector(\"#chatly-app\");\r\nconst shadowRoot = shadowHost.attachShadow({ mode: \"open\" });\r\nshadowHost.style.display = \"none\";\r\n\r\n// Fetch the CSS file\r\nfetch(\"https://joshijax.github.io/chatlywidget/css/app.css\")\r\n  .then(function (response) {\r\n    return response.text();\r\n  })\r\n  .then(function (cssText) {\r\n    // Create a style element and set its content to the CSS text\r\n\r\n    const styleElement = document.createElement(\"style\");\r\n    styleElement.textContent = cssText;\r\n\r\n    fetch(\"https://joshijax.github.io/chatlywidget/css/chunk-vendors.css\")\r\n      .then(function (response) {\r\n        return response.text();\r\n      })\r\n      .then(function (cssText) {\r\n        // Create a style element and set its content to the CSS text\r\n\r\n        // Append the style element to the Shadow Root\r\n\r\n        // Create the Vue app and mount it within the Shadow Root\r\n        createApp(testApp).use(vuetify).mount(shadowRoot);\r\n\r\n        shadowRoot.prepend(styleElement);\r\n\r\n        const styleElement1 = document.createElement(\"style\");\r\n        styleElement1.textContent = cssText;\r\n        shadowRoot.prepend(styleElement1);\r\n\r\n        shadowHost.style.display = \"block\";\r\n      });\r\n  });\r\n\r\n// createApp(testApp).use(vuetify).mount(\"#chatly-app\");\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_widget\"] = self[\"webpackChunkvue_widget\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6176); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","xmlns","viewBox","_createElementVNode","d","_hoisted_4","width","height","fill","_hoisted_7","_createElementBlock","_hoisted_1","_createVNode","_Transition","name","style","$data","_hoisted_2","_createBlock","_component_chatmaintest","checkFirst","$options","onUpdateState","addConversation","updateConversation","removeConversation","getConversationBy","showChat","showPop","stateval","user","unreadMsg","botName","onCreateNewConvo","onUpdateUnreadMsg","onClick","_hoisted_6","_hoisted_3","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","getStorage","StartFirebase","getFirestore","db","createConversationId","async","dbref","collection","val","addDoc","step","agent","then","res","doc","error","setStepConversation","collectRef","updateDoc","console","log","saveChats","message","parentDocRef","subcollectionRef","text","type","isUser","newMessage","createdAt","serverTimestamp","agentNewmessage","lastMsgTime","userNewmessage","getConversation","snap","getDoc","exists","data","getLastChat","queryVal","query","orderBy","limit","parentData","querySnapshot","getDocs","docs","length","lastChatData","updateConvo","getConvoChats","value","orderedSubcollection","forEach","push","readMessage","ref","_component_test","$props","conversationId","onGoBack","onGoBackTo","_hoisted_5","_component_v_list","lines","_hoisted_8","_Fragment","convo","_component_SingleChat","key","_hoisted_9","_hoisted_10","_component_v_btn","getCount","_ctx","_component_v_list_item","title","subtitle","append","_component_v_badge","color","_component_v_divider","inset","dayjs","relativeTime","loaded","props","components","methods","capitalizeName","charAt","toUpperCase","slice","timeAgo","timestamp","now","datetime","toDate","diff","suffix","Math","abs","minutes","floor","hours","days","this","computed","displayAgent","imageSrc","url","__exports__","_hoisted_25","stroke","_hoisted_30","_hoisted_32","_hoisted_38","_hoisted_41","src","alt","_component_NewImage","size","index","innerHTML","option","options","for","_hoisted_15","_hoisted_16","_component_inputFields","onHandleInputSubmit","_hoisted_22","_component_inputGroup","onHandleOrderRequest","_hoisted_23","_hoisted_24","_hoisted_43","_hoisted_28","rows","disabled","onKeyup","onKeydown","placeholder","require","accept","onChange","fileInput","click","_component_feedBack","onGetConversationBy","onUpdateConversation","String","Number","default","mounted","canvas","$refs","context","getContext","fontSize","fontFamily","fillStyle","fillRect","textAlign","textBaseline","font","fillText","getNameInitial","watch","newValue","oldValue","_component_v_form","onSubmit","_component_v_btn_toggle","mandatory","emoji","label","_component_v_tooltip","top","_component_v_text_field","rules","comments","_hoisted_11","_component_ErrorDialog","onDismiss","selectedEmoji","isLoading","emojis","conversationData","JSON","parse","localStorage","getItem","newState","conversations","byId","setItem","stringify","hasOwnProperty","form","validate","ended","comment","reaction","item","$emit","created","tabindex","saved","required","autocomplete","inputs","input","inputField","msg","inputValue","classifyIntent","intentKeywords","TRACK_ORDER","RETURN_ORDER","cleanedMessage","replace","tokens","split","intentScores","intent","keyword","includes","maxScore","predictedIntent","allScoresEqual","Object","keys","email","inputField1","inputField2","orderid","handleInputSubmit","orderId","incoming","document","querySelector","outgoing","feedback","socket","automated","loading","showErrorDialog","errorMessage","orderRequested","ip","isTyping","joined","typingMsg","messages","chatTimeout","chatTimeoutDuration","chatStartTime","loaderWidth","intervalIds","showLoader","convoEnded","isBotEnabled","selectedFile","trackOrderMsg","flow","next","auto","recording","mediaRecorder","previewImageUrl","NewImage","feedBack","inputFields","inputGroup","handleFileUpload","event","target","files","reader","FileReader","onload","result","readAsDataURL","username","emit","cancelImage","insertNewLine","shiftKey","textarea","startPos","selectionStart","endPos","selectionEnd","currentValue","substring","preventDefault","showFeeback","Processmessage","source","imageMessages","filter","messageStrings","map","lastMessage","processTrackOrder","sendToBot","values","emailMsg","orderIdMsg","saveMessage","newMessageSound","sendToBotIntent","trim","status","Date","resetChatTimeout","onTyping","setTimeout","checkPrev","object","checkNxt","lastIndex","currentIndex","indexOf","sound","play","pop","checkCase","chatToChatbottom","updateMsg","save","first","valueStep","find","obj","isSocketInConversation","element","stopAutomate","shadowRoot","chatBody","scrollTop","scrollHeight","requestAssistance","userId","joinConversation","conversationRoom","isJoined","startChatTimeout","elapsedTime","remainingTime","max","expiredConvId","intervalId","setInterval","remainingPercentage","clearTimeout","clearInterval","getConversationById","savedState","conversation","getConversationIdFromLocalStorage","saveConversationId","fetchState","read","expire","isConversationIdExpired","conversationTimestamp","parseInt","twoDaysInMilliseconds","localChatId","$router","iniStartTime","intent_data","allMessageText","join","response","axios","method","prompt","sending","isbot","lastMessageIsBot","inputText","messageEndsWithGoodbye","statement","goodbyeKeywords","patterns","toLowerCase","pattern","test","renderMessage","linkRegex","isLink","watcher","convoinfo","logivVal","recordingAudio","navigator","mediaDevices","getUserMedia","audio","stream","MediaRecorder","chunks","addEventListener","blob","Blob","author","start","requestMicrophonePermission","mediaStream","startRecording","catch","permissions","permissionStatus","state","getTracks","track","stop","stopRecording","playVoiceMessage","Audio","playButton","createElement","textContent","onclick","io","on","iniChat","beforeUnmount","off","handler","newMessages","deep","to","from","immediate","socketMainpage","chatActive","showingConvo","SingleChat","show","convoId","page","init","$forceUpdate","updateUnreadMsg","handleNewMessage","conversationIndex","findIndex","c","splice","lastMsg","Timestamp","conversationsById","lastIdKey","lastConversation","lastConversationEnded","chatId","valuesArray","reversedArray","reverse","firstThree","i","convoInfo","getAllInfo","appState","sortedConversations","sort","a","b","seconds","activeConversations","endedConversations","endedCount","reduce","count","chatmaintest","toggleChat","toggle","updateState","statecheck","role","locale","hasConversations","removedConversation","remainingConversations","userIdCookie","fetch","x","json","params","get_creat_user","render","createVuetify","shadowHost","attachShadow","mode","display","cssText","styleElement","createApp","testApp","use","vuetify","mount","prepend","styleElement1","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","prop","prototype","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}